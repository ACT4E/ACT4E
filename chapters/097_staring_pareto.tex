% !TEX root = ../CategoricalCoDesign.tex
\subsection{Staring at Pareto fronts}
\label{sec:chains-antichains}
\subsubsection{Chains and Antichains} 


\begin{definition}[Chain in a poset]
\label{def:chain}
Given a poset~$S$, a \emph{chain} is a sequence of elements~${s_i}$ in~$S$ where two successive elements are comparable, i.e.:
\begin{equation}
    i \ordleq j \Rightarrow s_i \ordleq s_j.
\end{equation}
\end{definition}

\begin{definition}[Antichain in a poset]
\label{def:antichain}
An \emph{antichain} is a subset~$S$ of a poset where no elements are comparable. If~$a,b \in S$, then~$a \ordleq b$ implies~$a=b$.
\end{definition}
\begin{remark}
We denote the set of antichains of a poset~$P$ by~$\antichains P$.
\end{remark}
\begin{remark}
Note that given a poset~$\tup{P,\ordleq}$,~$\emptyset \in \antichains P$ since~$\emptyset$ contains no elements (and hence no comparable elements).
\end{remark}

In the context of pizza recipes, consider the diagram reported in~\cref{fig:antichain}. The blue points represent an antichain of recipes~$\{\tup{\unit[1]{USD},\unit[2]{h}},\tup{\unit[2]{USD},\unit[1]{h}}\}$, i.e. recipes which do not dominate each other (one is cheaper but takes longer and the other is more expensive but quicker). The red point represents a recipe which cannot be part of the antichain, since it is dominated by~$\tup{\unit[2]{USD},\unit[1]{h}}$. 

\begin{figure}[h!]
\begin{center}
\includesag{70_antichain}
\end{center}
\caption{Example of an antichain of pizza recipes. \label{fig:antichain}}
\end{figure}


\begin{example}
Let's consider the poset~$\tup{P,\ordleq}$ where~$a\ordleq b$ if~$a$ is a divisor of~$b$ and~$P=\{1,5,10,11,13,15\}$. A chain of~$P$ is~$\{1,5,10,15\}$. An antichain of~$P$ is~$\{10,11,13\}$.
\end{example}

\begin{example}
Consider \cref{ex:hasseinclusion}. Examples of chains are 
\begin{equation}
    \{\varnothing,\{a\},\{a,b\},\{a,b,c\}\}, \quad  \{\varnothing,\{b\},\{b,c\},\{a,b,c\}\}.
\end{equation}
Examples of antichains are
\begin{equation}
    \{\{a\},\{b\},\{c\}\}, \quad \{ \{a,b\},\{a,c\}, \{b,c\}\}.
\end{equation}
\end{example}

\begin{example}
\label{ex:battery}
Suppose you have to choose a battery model based on its cost and its weight, both to be minimized. There may be models which dominate others. For instance, a model~$\tup{\unit[10]{USD},\unit[1]{kg}}$ is always better than a model~$\tup{\unit[11]{USD},\unit[1.1]{kg}}$. Also, there may be models which are incomparable, i.e. which form an antichain. For example, you cannot say whether~$\tup{\unit[10]{USD},\unit[1]{kg}}$ is better than~$\tup{\unit[5]{USD},\unit[2]{kg}}$. The incomparable models form an antichain.
\end{example}

\subsubsection{Upper and lower sets}

\begin{definition}[Upper set]
\label{def:upperset}
An \emph{upper set} is a subset~$U$ of a poset~$P$ such
that, if an element is inside, all elements above it are inside as well.
In formulas:
\begin{equation}
\text{$U$ is an upperset} \equiv \forall x\in U, \forall y\in P\colon x\ordleq y \Imp y\in U.
\end{equation}
\end{definition}
\begin{remark}
We call~$\mathsf{U}P$ the set of upper sets of~$P$.
\end{remark}

\begin{definition}[Lower set]
\label{def:lowerset}
A \emph{lower set} is a subset~$L$ of a poset~$P$ if, if a point is inside, all points below it are inside as well. In formulas:
\begin{equation}
\text{$L$ is a lower set} \equiv \forall x\in L, \forall y\in P\colon y\ordleq x \Imp y\in L.
\end{equation}
\end{definition}
\begin{remark}
We call~$\mathsf{L}P$ the set of lower sets of~$P$.
\end{remark}

\begin{remark}
Note that if~$A$ is an antichain of a poset~$P$, then the set
\begin{equation}
    I(A)=\{x\colon x\ordleq y, y\in A\}
\end{equation}
is a lower set of~$P$.
\end{remark}

Consider the blue poset of pizza recipes from before. The upper and lower sets of this poset can be represented as in~\cref{fig:upperset}. The upper set can be interpreted as all the potential pizza recipes for which we can find better alternatives in the poset. Similarly, the lower set can be interpreted as all the potential pizza recipes which would be better than the ones in the poset.

\begin{figure}[h!]
\begin{center}
\includesag{70_upper_lower_set}
\end{center}
\caption{Example of upper and lower sets of a poset of pizza recipes. \label{fig:upperset}}
\end{figure}
\begin{example}[Upper and lower sets in~$\Bool$]
The booleans~$\{\false, \true \}$ form a poset with~$\false \leq \true\colon(\Bool,\ordleq)$ . The subset~$\{\false\} \subseteq \Bool$ is not an upper set, since~$\false \leq \true$ and~$\true \notin \{\false \}$.	
\end{example}

\begin{lemma}
\label{lemma:u_bounded_lat}
$\UR$ is a bounded lattice (\cref{def:lattice}) with
\begin{equation}
    \{\UR,\leq_{\UR},\bot_{\UR},\top_{\UR},\vee_{\UR},\wedge_{\UR}\}=\{\UR,\supseteq,R,\emptyset,\cap,\cup\}.
\end{equation}
\begin{proof}
Consider the poset~$\tup{\UR,\supseteq}$ and~$P,Q\in \UR$. 
\begin{itemize}
    \item First, we need to show that~$P\cap Q\in \UR$. One has~$P \subseteq \UR$ and $Q\subseteq \UR$, meaning that by definition, if~$x\in P\cap Q$, we have~$x\in P \wedge x\in Q$. It follows that~$x\in \UR$ for all~$x\in P\cap Q$. Furthermore, we need to show that~$P\cap Q$ is the least upper bound of $P,Q$. Assume this is not true, i.e. there exists a~$T\in \UR$,~$T\neq P\cap Q$, such that~$P\supseteq T\supseteq P\cap Q$ and~$Q\supseteq T\supseteq P\cap Q$. Using the fact that intersection preserves inclusions, one has
\begin{equation}
\begin{aligned}
    P\cap Q &\supseteq T\cap T \supseteq P\cap Q\\
    P\cap Q &\supseteq T \supseteq P\cap Q\\
    T&= P\cap Q,
\end{aligned}
\end{equation}
which contradicts the assumption. Therefore,~$P\cap Q$ is the least upper bound of~$P,Q$.
\item Second, we need to show that~$P\cup Q\in \LF$. One has~$P\subseteq \UR$ and~$Q\subseteq \UR$, meaning that by definition, if~$x\in P\cup Q$, we have either~$x\in P$ or~$x\in Q$. If~$x\in P$, then~$x\in \UR$. If~$x\in Q$, then~$x\in \UR$. It follows that~$x\in \UR$ for all~$x\in P\cup Q$.  Furthermore, we need to show that~$P\cup Q$ is the greatest lower bound of~$P,Q$. Assume this is not true, i.e. there exists a~$T\in \UR$,~$T\neq P\cup Q$, such that~$P\cup Q\supseteq T\supseteq P$ and~$P\cup Q\supseteq T\supseteq Q$. Using the fact that union preserves inclusions, one has
\begin{equation}
    \begin{aligned}
    (P\cup Q)\cup (P\cup Q) &\supseteq T \cup T \supseteq P\cup Q\\
    P\cup Q &\supseteq T\supseteq P\cup Q\\
    T&=P\cup Q,
    \end{aligned}
\end{equation}
which contradicts the assumption.  Therefore,~$P\cup Q$ is the greatest lower bound of~$P,Q$.
\end{itemize}
We have therefore proved that~$\tup{\UR,\supseteq}$ is a lattice. To show that it is bounded, we notice that~$\emptyset \subseteq T$ for any~$T\in \UR$, meaning that~$\emptyset$ is the top. Furthermore, we notice that~$T\subseteq R$ for any~$T\in \UR$, meaning that~$R$ is a bottom. Therefore, the lattice is bounded.
\end{proof}
\end{lemma}

\begin{lemma}
$\LF$ is a bounded lattice (\cref{def:lattice}) with 
\begin{equation}
    \{\LF,\leq_{\LF},\bot_{\LF},\top_{\LF},\vee_{\LF},\wedge_{\LF}\}=\{\LF,\subseteq,\emptyset,F,\cup,\cap\}.
\end{equation}
\end{lemma}
\begin{proof}
Consider the poset~$\tup{\LF,\subseteq}$ and~$P,Q\in \LF$.
\begin{itemize}
    \item First, we need to show that~$P\cup Q\in \LF$. One has~$P \subseteq \LF$ and~$Q\subseteq \LF$, meaning that by definition, if~$x\in P\cup Q$, either~$x\in P$ or~$x\in Q$. If~$x\in P$, then~$x\in \LF$. If~$x\in Q$, then~$x\in \LF$. It follows that~$x\in \LF$ for all~$x\in P\cup Q$. Furthermore, we need to show that~$P\cup Q$ is the least upper bound of~$P,Q$. Assume this is not true, i.e. there exists a~$T\in \LF$,~$T\neq P\cup Q$, such that~$P\subseteq T\subseteq P\cup Q$ and~$Q\subseteq T\subseteq P\cup Q$. Using the fact that union preserves inclusions, one has
\begin{equation}
\begin{aligned}
    P\cup Q &\subseteq T\cup T \subseteq P\cup Q\\
    P\cup Q &\subseteq T \subseteq P\cup Q\\
    T&= P\cup Q,
\end{aligned}
\end{equation}
which contradicts the assumption. Therefore,~$P\cup Q$ is the least upper bound of~$P,Q$.
\item Second, we need to show that~$P\cap Q\in \LF$. One has~$P\subseteq \LF$ and~$Q\subseteq \LF$, meaning that by definition, if~$x\in P\cap Q$, we have~$x\in P\wedge x\in Q$, i.e.~$x\in \LF$, for all~$x\in P\cap Q$. Furthermore, we need to show that~$P\cap Q$ is the greatest lower bound of~$P,Q$. Assume this is not true, i.e. there exists a~$T\in \LF$,~$T\neq P\cap Q$, such that~$P\cap Q\subseteq T\subseteq P$ and~$P\cap Q\subseteq T\subseteq Q$. Using the fact that intersection preserves inclusions, oen has
\begin{equation}
    \begin{aligned}
    (P\cap Q)\cap (P\cap Q) &\subseteq T \cap T \subseteq P\cap Q\\
    P\cap Q &\subseteq T\subseteq P\cap Q\\
    T&=P\cap Q,
    \end{aligned}
\end{equation}
which contradicts the assumption.  Therefore,~$P\cap Q$ is the greatest lower bound of~$P,Q$.
\end{itemize}
We have therefore proved that~$\tup{\LF,\subseteq}$ is a lattice. To show that it is bounded, we notice that~$\emptyset \subseteq T$ for any~$T\in \LF$, meaning that~$\emptyset$ is the bottom. Furthermore, we notice that~$T\subseteq F$ for any~$T\in \LF$, meaning that~$F$ is a top. Therefore, the lattice is bounded. 
\end{proof}

\GZ{Discuss the above with JL}