% !TEX root = chapter-standalone.tex
\section{Natural transformations}

\linkvideo{spring2021-nat-trafos:diagrams} % Diagrams
\linkvideo{spring2021-nat-trafos:natural-trafos} % Natural transformations

\todojira{139}{Adjust style in whole section}
We have seen that functors are ``morphisms between categories''. Indeed, categories may be assembled into a category \index{\Category} where the objects are categories and morphisms are functors. It turns out that there is an important third layer to this world of categories: there are also kinds of morphisms \emph{between} functors, and these are known as ``natural transformations''. To represent the three layers of structure involved in the world of categories, we will often draw diagrams like this:
\begin{figure}[h!]
  \includesag{3-layer-diagrams}
  \label{fig:3-layer-diagrams}
\end{figure}

where the points represent categories, the single arrows represent functors, and the double arrows represent natural transformations.

\showslides{
\begin{forslides}
  \begin{equation}
    \label{eq:ex_nt_1}
    \ntrafoa \colon \funid_\Set \nto \funa
\end{equation}
    \begin{equation}
    \label{eq:ex_nt_2}
    \begin{aligned}
    \ntrafoa_\setA \colon \funid_\Set(\setA) &\mto \funa(\setA)\\
      \setAel&\mapsto \{\setAel\}
\end{aligned}
\end{equation}
\end{forslides}
}

\linkvideo{spring2021-nat-trafos:natural-trafos:nat-trafo-def} % Definition of natural transformation
\linkvideo{spring2021-nat-trafos:natural-trafos:nattrafos-as-mor} % Natural transformations are morphisms between functors

\begin{ctdefinition}[Natural transformation]
  \label{def:natural-transformation}
  Let \CatC and \CatD be categories, and let~$\funa,\funb\colon \CatC\fto \CatD$ be functors. A \emph{\iindex{natural transformation}}~$\ntrafoa \colon \funa\nto \funb$ is specified by:


  \constit
  \begin{compactenum}
    \item For each object~$\Obja\in \CatC$, a morphism $\ntrafoa_\Obja \colon \funa(\Obja)\mto \funb(\Obja)$ in \CatD, called the $\Obja$\emph{-component} of $\ntrafoa$.
  \end{compactenum}
  \condit
  \begin{compactenum}
    \item For every morphism~$\mora\colon \Obja\mto \Objb$ in \CatC, the components of $\ntrafoa$ must satisfy the \emph{naturality condition}
    \begin{equation}
      \funa(\mora)\mthen \ntrafoa_\Objb = \ntrafoa_\Obja\mthen \funb(\mora).
    \end{equation}
    In other words, the following diagram must commute:
    \begin{center}
      \includesag{55_natural_2}
    \end{center}
  \end{compactenum}
A natural transformation $\ntrafoa \colon \funa\nto \funb$ is denoted visually as follows:
  \begin{center}
    \includesag{55_natural_1}
  \end{center}
\end{ctdefinition}

\begin{figure}[h!]
  \begin{center}
%\adjustbox{scale=1,center}{%
    \includesag{096_natural_graphically}
%}
  \end{center}
  \caption{
  \label{fig:nat_trans_graphically}}
\end{figure}

\begin{ctdefinition}[Natural isomorphism]
  \label{def:nat_iso}
  A natural transformation~$\ntrafoa \colon \funa \to \funb $ is called a \emph{\iindex{natural isomorphism}} if each component morphism ~$\ntrafoa_\Obja$ in \CatD is an isomorphism.
\end{ctdefinition}



\linkvideo{spring2021-nat-trafos:natural-trafos:double-dual} % Double dual

\begin{example}\label{ex:Vect}
  Consider the category~$\Vect_{\reals}$ whose objects are real vector spaces and whose morphisms are linear maps. (For convenience, in the following we sometimes omit reference to the ground field.) Recall that the \emph{dual} of a vector space~$V$ is the vector space describing all linear maps from~$V$ to~\reals:
  \begin{equation}\label{eq:dual-vector-space}
    V^* \definedas \HomSet{\Vect}{V}{\reals},
  \end{equation}
  Also, recall the if~$f\colon V \to W$ is a linear map, then its dual is a linear map~$f^*\colon W^* \to V^*$.

  Applying the above duality construction twice to a vector space or a linear map gives their double dual. It turns out that this is a functorial operation. That is, there is a functor~
  \begin{equation}\label{eq:double-dual-functor}
      \text{\stylefunctors{Double dual}}\colon \Vect \fto \Vect
  \end{equation}
  that maps every vector space and every linear map to its double dual.

  Furthermore, for any vector space~$V$, there is a ``canonical'' or ``natural'' map~$\ntrafoa_V \colon V \nto V^{**}$ defined by
  \begin{equation}\label{eq:natural-trafo-to-double-dual}
    \ntrafoa_V(v)(l) = l(v), \quad  v \in V, l \in V^*.
  \end{equation}
  These form the components of a natural transformation from the identity functor on \Vect to the double dual functor.
  \begin{center}
    \includesag{nat-trafo-ddual}
  \end{center}
\end{example}

\begin{example}
  Consider the powerset functor from \cref{ex:powerset_functor}, and denote it~$\funa$.
  As a reminder, the functor maps each set to its powerset, and each map to a map distributed over subsets of the powerset.
  We now look at a natural transformation~$\ntrafoa\colon \funid_\Set \nto \funa$, specified by
  \begin{equation*}
    \begin{aligned}
      \ntrafoa_\setA\colon \funid_\Set(\setA) &\mto \funa(\setA)\\
      \setA&\mto \powerset(\setA)\\
      \setAel &\mapsto \{\setAel\}.
    \end{aligned}
  \end{equation*}
  In other words, the natural transformation embeds each element of~$\setA$ into~$\powerset(\setA)$.
  To check that this is a valid natural transformation, consider~$\mora\colon \setA\mto \setB$. One has
  \begin{equation*}
  \begin{aligned}
    (\ntrafoa_\setA \mthen \funa(\mora))(\setAel)&=\{\setAel\} \mthen \funa(\mora)\\
    &=\{\mora(\setAel)\}\\
    &=\mora(\setAel)\mthen \ntrafoa_\setB\\
    &=(\mora \mthen \ntrafoa_\setB)(\setAel).
  \end{aligned}
  \end{equation*}
\end{example}


\begin{gradedexercise}[\exname{NatTrafosGraphs}]\label{ex:NatTrafosGraphs}
This exercise builds on \cref{ex:GraphsViaFunctors}.
There, we defined a category~$\Cat{G}$ which has precisely two objects and four morphisms, see \cref{fig:graph-cat-again} (the two identity morphisms are not drawn). The task there was to understand how specifying a functor from this category $G$ into the category of sets is `the same thing' as specifying a directed graph.

Now consider two functors~$\funaA, \funaB \colon \Cat{G} \fto \Set$. Spell out what it means to have a natural transformation~$\ntrafoa\colon \funaA \nto \funaB$. What does this correspond to in the language of directed graphs?
\end{gradedexercise}

\begin{marginfigure}
\begin{center}
\includesag{graph-cat}
\end{center}
\caption{}
  \label{fig:graph-cat-again}
\end{marginfigure}

\solutionof{NatTrafosGraphs}


\begin{gradedexercise}[\exname{UpperSetsNatTrafos}]\label{ex:UpperSetsNatTrafos}
This exercise builds on \cref{ex:UpperSetsViaFunctors}. There we fixed a poset $\posA$, viewed it as a category $\Cat{P}$, and saw that functors $\Cat{P} \fto \Bool$ encode upper sets in $\posA$. Suppose we have two functors $\funaA, \funaB : \Cat{P} \fto \Bool$. What does a natural transformation $\ntrafoa : \funaA \nto \funaB$ correspond to in terms of the upper sets encoded by $\funaA$ and $\funaB$, respectively?
\end{gradedexercise}

\solutionof{UpperSetsNatTrafos}

\devel{
\section{To add}
\todojira{141}{Add parts corresponding to listed videos.}
\linkvideo{spring2021-nat-trafos:natural-trafos:horizontal-composition} % Horizontal composition
\linkvideo{spring2021-nat-trafos:natural-trafos:interchange-law} % Interchange law
\linkvideo{spring2021-nat-trafos:natural-trafos:rel-mon-maps} % Relating monotone maps
\linkvideo{spring2021-nat-trafos:natural-trafos:eq-maps-gr-actions} % Equivariant maps between group actions
}