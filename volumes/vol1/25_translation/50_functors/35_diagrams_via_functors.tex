% !TEX root = chapter-standalone.tex

\section{Diagrams via functors}

\todojira{368}{@J: Explain how diagrams can be encoded using functors}

So far, we have been thinking of diagrams in a (semi)category $\CatC$ as directed graphs, with nodes labeled by objects of $\CatC$ and edges labeled by morphisms of $\CatC$.
There is another way of thinking about diagrams, using functors.

To see how this works, consider the diagram in \cref{fig:diagram-as-functor-example}.
We might say that this diagram has a certain ``shape'', which is independent of the specific labels that appear.
Namely, the diagram involves three objects, and the arrows between them are arranged in a certain way.
The idea is that we can encode this shape abstractly as a category $\CatI$ and then we may think of the diagram in \cref{fig:diagram-as-functor-example} as the ``imprint'' or image of a functor $\stylefunctors{D}: \CatI \fto \CatC$.
(We call the functor ``$\stylefunctors{D}$'' for ``diagram'' and we use the letter $\CatI$ for the shape category because it plays the role of \emph{indexing} the objects and morphism in the diagram we are encoding.)

\begin{marginfigure}
    \centering
    \includesag{diagram_as_functor_example}
    \caption{}
    \label{fig:diagram-as-functor-example}
\end{marginfigure}

\begin{marginfigure}
    \centering
    \includesag{shape_diagram_example}
    \caption{}
    \label{fig:shape-diagram-example}
\end{marginfigure}

In the case of the diagram in \cref{fig:diagram-as-functor-example}, the most intuitive choice of category $\CatI$ to use looks as in \cref{fig:shape-diagram-example}: we take it to have three objects (which we've named $1$, $2$, and $3$, respectively) and, beyond identity morphisms, we let $\CatI$ have only two other morphisms: one from $2$ to $1$, and one from $2$ to $3$ (we've named these $\stylemorph{a}$ and $\stylemorph{b}$, respectively).
The functor $\stylefunctors{D}: \CatI \fto \CatC$ that encodes \cref{fig:diagram-as-functor-example} is specified by
\begin{align*}
     & \stylefunctors{D}(\styleobj{1}) = \Obja, \quad \stylefunctors{D}(\styleobj{2}) = \Objb, \quad  \stylefunctors{D}(\styleobj{3}) = \Objc; \\
     & \stylefunctors{D}(\stylemorph{a}) = \mora, \quad \stylefunctors{D}(\stylemorph{b}) = \morb.
\end{align*}
\todo{insert nice figure showing the shape category being mapped to the diagram}

\begin{marginfigure}
    \centering
    \includesag{shape_cat_redundant}
    \caption{}
    \label{fig:shape-cat-redundant}
\end{marginfigure}

\begin{remark}
    We could also use other shape categories and functors to encode the same diagram in \cref{fig:diagram-as-functor-example}.
    For example, we could use a category $\CatJ$ as in \cref{fig:shape-cat-redundant} and define a functor $\stylefunctors{E}: \CatJ \fto \CatC$ by setting
    \begin{align*}
         & \stylefunctors{E}(\styleobj{1}) = \Obja, \quad \stylefunctors{E}(\styleobj{2}) = \Objb, \quad  \stylefunctors{E}(\styleobj{3}) = \Objc; \quad  \stylefunctors{E}(\styleobj{4}) = \Objc \\
         & \stylefunctors{E}(\stylemorph{a}) = \mora, \quad \stylefunctors{E}(\stylemorph{b}) = \morb.
    \end{align*}
    Then $\stylefunctors{E}$ will also have the diagram in \cref{fig:diagram-as-functor-example} as its image.
    The only difference to the functor $\stylefunctors{D}: \CatI \fto \CatC$ above is that we have added, in the shape category, an additional object (called $\styleobj{4}$) which is also mapped to $\Objc$.
    This isn't really useful for anything here, we are just trying to make the point that a given diagram might be encoded by different functors, some of which ``lose'' information when mapping a shape category to its image in $\CatC$.
\end{remark}

\subsection{Commutativity}

\begin{marginfigure}
    \centering
    \includesag{non-commutative_triangle}
    \caption{}
    \label{fig:non-commutative-triangle}
\end{marginfigure}

\begin{marginfigure}
    \centering
    \includesag{commutative_triangle_shape}
    \caption{}
    \label{fig:commutative-triangle-shape}
\end{marginfigure}

Now let's think about diagrams where there are non-identity arrows that can be composed (in \cref{fig:diagram-as-functor-example} this was not the case).
Consider for example the diagram in \cref{fig:non-commutative-triangle} and assume it is commutative.
So $\morc = \mora \mthen \morb$.
To encode this commutative diagram as a functor, we can use the shape category depicted in \cref{fig:commutative-triangle-shape}, satisfying $\stylemorph{c} = \stylemorph{a} \mthen \stylemorph{b}$.
Then the image of a functor $\stylefunctors{D}: \CatJ \fto \CatC$ will be a commutative diagram of the kind in \cref{fig:non-commutative-triangle}.
Commutativity is encoded ``automatically'' thanks to the the laws of a functor (compatibility with composition):
\begin{align*}
    \morc & = \stylefunctors{D}(\stylemorph{c})                                                                \\
          & = \stylefunctors{D}(\stylemorph{a} \mthen \stylemorph{b})                                          \\
          & = \stylefunctors{D}(\stylemorph{a}) \mthen \stylefunctors{D}(\stylemorph{b}) = \mora \mthen \morb.
\end{align*}

\begin{marginfigure}
    \centering
    \includesag{non_commutative_triangle_shape}
    \caption{}
    \label{fig:non-commutative-triangle-shape}
\end{marginfigure}

Now suppose we wish to encode a \emph{non-commutative} diagram of the kind in \cref{fig:non-commutative-triangle}.
Using a shape category of the kind in \cref{fig:commutative-triangle-shape} will not work.
What we \emph{can} do is for example use a shape category $\CatJ$ as in \cref{fig:non-commutative-triangle-shape}, and use the functor $\stylefunctors{D}: \CatJ \fto \CatC$ which is specified by
\begin{align*}
     & \stylefunctors{D}(\styleobj{1}) = \Obja, \quad \stylefunctors{D}(\styleobj{2}) = \Obja                                                       \\
     & \stylefunctors{D}(\styleobj{3}) = \Objb, \quad \stylefunctors{D}(\styleobj{4}) = \Objb                                                       \\
     & \stylefunctors{D}(\styleobj{5}) = \Objc, \quad \stylefunctors{D}(\styleobj{6}) = \Objc                                                       \\
     & \stylefunctors{D}(\stylemorph{a}) = \mora, \quad \stylefunctors{D}(\stylemorph{b}) = \morb, \quad \stylefunctors{D}(\stylemorph{c}) = \morc.
\end{align*}

\subsection{Analogies}

Make the analogy with sequences and with indexed sets.
..

\todo{@J: finish writing}
