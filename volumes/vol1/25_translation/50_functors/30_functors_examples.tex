% !TEX root = chapter-standalone.tex

\section{More examples of functors}
\label{sec:more-examples-functors}

\begin{example}[EquivalenceClasses]
    \label{exa:equivalence-classes-functor}
    Consider the category $\EquivRel$ from \cref{def:cat-equivalence-relations}.
    We define a functor
    \begin{equation}
        \funa \colon \EquivRel \fto \Set
    \end{equation}
    as follows.

    Given an object $\tup{\setA, \sim_\setA}$ of $\EquivRel$ (that is, a set equipped with an equivalence relation), we define $\funaob(\tup{\setA, \sim_\setA}) = \setA/_{\sim_\setA}$ to be the quotient of $\setA$ by $\sim_\setA$.

    Recall that $\setA/_{\sim_\setA}$ is the set of equivalence classes of $\sim_\setA$.
    Its elements are the subsets of $\setA$ which form the partition of $\setA$ induced by $\sim_\setA$.
    Each such subset is the set of all elements of $\setA$ which are mutually equivalent to each other according to $\sim_\setA$.
    For any element $\ela \setin \setA$, the equivalence class it belongs to is denoted $[\ela]$ and in this case $\ela$ is called a \emph{representative} of the equivalence class $[\ela]$.

    To define $\funamor$, let $\mora \colon \tup{\setA, \sim_\setA} \mto \tup{\setB, \sim_\setB}$ be a morphism in $\EquivRel$.
    We let
    \begin{equation}
        \funamor(\mora) \colon \setA/_{\sim_\setA} \mto_\Set \setB/_{\sim_\setB}, \ [\ela] \mapsto [\mora(\ela)].
    \end{equation}
    It may be readily checked that this function is well-defined, irrespective of the (arbitrary) choice of element $\ela$ used to represent a given equivalence class $[\ela]$.
\end{example}

\todotext{Give an illustration of a possible application of the above, for example using rounding of currency...}

\begin{exercise}
    Prove that the functor defined in \cref{exa:equivalence-classes-functor} is in fact a functor.
\end{exercise}
\begin{solution}
    \todotext{Write this solution}
\end{solution}

\begin{example}[Double dual]
    \label{exa:double-dual-functor}
    Let~$\VectRs$ be the category whose objects are all real \SY{vector spaces} and whose morphisms are~\reals-linear maps.
    Composition is the usual composition of linear maps.

    There is an \SY{endofunctor}~$\funa \colon \VectRs \mto \VectRs$ whose action on objects is
    \begin{equation}
        \funa ( \vecspB ) = \vecspB^{**}.
    \end{equation}
    (Recall that~$\vecspB^{**} = \makeset{ \text{linear maps } \vecspB^* \mto \reals } =  \HomSet{\VectRs}{\vecspB^*}{\reals}$).
    The action of~$\funa$ on morphisms is as follows.
    Given a linear map~$\mora \colon \vecspB \mto \vecspC$,
    \begin{equation}
        \funa ( \mora ) \colon \vecspB^{**} \mto \vecspC^{**}, \quad \xi \mapsto [ l \mapsto \xi (f \mthen l)].
    \end{equation}
\end{example}

\begin{gradedexercise}[\exname{DoubleDualFunctor}]
    \label{ex:DoubleDualFunctor}
    Prove that $\funa$ as defined in \cref{exa:double-dual-functor} is in fact a \SY{functor}.
\end{gradedexercise}
\solutionof{DoubleDualFunctor}

\begin{example}\label{exa:G-actions-as-functors}
    Let $\grpA$ be a group.
    We've seen that we can view $\grpA$ as a category with just a single object (denote that object by $\monoidcatobj$) and where the morphisms are the elements of $\grpAset$ (with composition given by the group's composition operation).

    We claim that specifying a functor $\grpA \fto \Set$ is ``the same thing'' as specifying a set $\setA$ together with a (covariant) action of $\grpA$ on $\setA$.
\end{example}

\begin{exercise}
    Prove the claim made in \cref{exa:G-actions-as-functors}.
\end{exercise}
\begin{solution}
    \todotext{Write this solution}
\end{solution}

%\begin{gradedexercise}[\exname{GActionsAsFunctors}]
%    \label{ex:GActionsAsFunctors}
% 
%\end{gradedexercise}
%\solutionof{GActionsAsFunctors}

\begin{gradedexercise}[\exname{MultiplicationWithASet}]
    \label{ex:MultiplicationWithASet}
    Let $\subA$ be a fixed set.
    We define a functor $\funa \colon \Set \fto \Set$ which acts on objects by
    \begin{equation}
        \funa(\setA) = \setA \cartprod \subA
    \end{equation}
    and on morphisms by
    \begin{equation}
        \funa(\mora) = \mora \funcprod \catid_{\subA}.
    \end{equation}
    Prove that this is indeed a functor.
\end{gradedexercise}
\solutionof{MultiplicationWithASet}

\begin{gradedexercise}[\exname{ExponentiationWithASet}]
    \label{ex:ExponentiationWithASet}
    Let $\subA$ be a fixed set.
    We can define a functor $\funa \colon \Set \fto \Set$ which acts on objects by
    \begin{equation}
        \funa(\setA) = \setA^\subA.
    \end{equation}
    (Recall that $\setA^\subA$ denotes the set of functions from $\subA$ to $\setA$.)
    For the action on morphisms, suppose we have a function $\funa \colon \setA \mto \setB$.
    Then
    \begin{equation}
        \funa(\mora) \colon \setA^\subA \mto \setB^\subA, \ \stylemorph{\varphi} \mapsto \stylemorph{\varphi} \mthen \mora.
    \end{equation}
    Prove that this does really define a functor.
\end{gradedexercise}
\solutionof{ExponentiationWithASet}

\begin{gradedexercise}[\exname{GraphsViaFunctors}]
    \label{ex:GraphsViaFunctors}
    Consider the following category, which has two objects,~$\styleobj{V}$ and~$\styleobj{A}$, and four morphisms: besides the \SY{identity morphisms}, there are two morphisms,~$\stylemorph{s}$ and~$\stylemorph{t}$, from~$\styleobj{A}$ to~$\styleobj{V}$.
    See \cref{fig:graph-cat}.
    Call this category~$\CatSymbol{G}$.

    Can you explain the following statement?
    ``Specifying a \SY{functor}~$\CatSymbol{G} \fto \Set$ is the ``same thing'' as specifying a directed graph''.
\end{gradedexercise}
\solutionof{GraphsViaFunctors}

\begin{marginfigure}
    \centering
    \includesag{graph-cat}
    \caption{}
    \label{fig:graph-cat}
\end{marginfigure}

\begin{gradedexercise}[\exname{UpperSetsViaFunctors}]
    \label{ex:UpperSetsViaFunctors}
    Recall that~$\Bool$ denotes the category with two objects,~$\true$ and~$\false$, and with precisely one non-identity morphism which goes from~$\false$ to~$\true$.
    Let~\posA be a poset.
    View it as a category~$\CatSymbol{P}$, and let~$\funa \colon \CatSymbol{P} \mto \Bool$ be a \SY{functor}.
    In other words,~$\funaMap = \funaob$ is a \SY{monotone function}.
    Prove that the set
    \begin{equation}
        \subA \definedas \makeset{ \posAel \setin \posAset \mid \funaMap(\posAel) = \true } \setsubseteq \posA
    \end{equation}
    is an \SY{upper set}.
\end{gradedexercise}
\solutionof{UpperSetsViaFunctors}

\begin{gradedexercise}[\exname{CartProdAsFunctor}]
    \label{ex:CartProdAsFunctor}

    Recall that, given categories $\CatC$ and $\CatD$, we can form the product category $\CatC \times \CatD$.
    In this exercise we will use this construction in a situation where we consider the product of the category $\Set$ with itself.

    Your task in this exercise is to show that there is a functor $\funa \colon \Set \times \Set \fto \Set$ which is defined by the operation of ``taking the cartesian product of sets and functions''.

    Concretely, given any two sets $\setA$, $\setB$, let
    $$\funa(\tup{\setA, \setB}) \definedas \setA \cartprod \setB$$
    (this defines $\funa$ on the level of objects) and given any two functions $\mora \colon \setA \mto \setC$, $\morb \colon \setB \mto \setD$, let
    $$\funa(\tup{\mora, \morb}) \definedas \mora \catprodmor \morb$$
    (this defines $\funa$ on the level of morphisms).

    To show that $\funa$ is in fact a functor, check the two conditions in the defintion of a functor, namely that $\funa$ is compatible with composition and with identities.
\end{gradedexercise}
\solutionof{CartProdAsFunctor}

\begin{gradedexercise}[\exname{ProbabilityFunctor}]
\label{ex:probability-functor}

In this exercise we will define a functor $\funa \colon \Set \fto \Set$ and your task is to check that it is in fact a functor. 

$\funa$ on objects: for any set $\setA$ we define $\funaob(\setA)$ to be the set of \emph{finitely supported probability measures} on $\setA$. These are functions $p \colon \setA \to [0,1]$ with only finitely-many non-zero values and such that these sum to $1$:
\begin{equation}\label{eq:probability-measure}
\sum_{\ela \setin \setA} p(\ela) = 1. 
\end{equation}

$\funa$ on morphisms: for any function $\mora \colon \setA \mto \setB$, the function $\funamor(\mora) \colon \funaob(\setA) \mto \funaob(\setB)$ is defined by
\begin{equation}
\funamor(\mora)(p) \colon \setB \to [0,1], \ \elb \mapsto \sum_{\ela \setin \mora^{-1}(\elb)} p(\ela). 
\end{equation}

The following is a helpful visualization. We may think of finitely-supported probability measures on $\setA$ as ``finite normalized histograms over the elements of $\setA$'', and the functor $\funa$ moves the columns of a histogram on $\setA$ ``along'' $\mora$ to make a histogram on $\setB$, stacking columns on top of each other whenever they end up over the same element. (Credit: this nice description is taken from Paolo Perrone's \emph{Notes on category theory}.)
\end{gradedexercise}

\solutionof{ProbabilityFunctor}

\begin{example}\label{exa:hom-functor}
    Let $\CatC$ be any category.
    There is a functor
    \begin{equation}\label{eq:hom-functor-type}
        \funa \colon \CatC\op \Ctimes \CatC \fto \Set
    \end{equation}
    defined on objects by
    \begin{equation}\label{eq:hom-functor-on-objects}
        \funaob(\tup{\Obja, \Objb}) = \Hom_\CatC(\Obja, \Objb).
    \end{equation}
    To see how $\funa$ is defined on morphisms, let $\mora\op \colon \Objd \mtoin{\CatC\op} \Obja$ and $\morb \colon \Objb \mtoin{\CatC} \Objc$ be morphisms in $\CatC\op$ and $\CatC$, respectively, and recall that $\mora\op \colon \Objd \mtoin{\CatC\op} \Obja$ is, by definition, a morphism $\mora \colon \Obja \mtoin{\CatC} \Objd$.
    We define $\funamor(\tup{\mora\op, \morb})$ to be the function
    \begin{equation}\label{eq:hom-functor-on-morphisms}
        \Hom_\CatC(\Obja, \Objb) \to \Hom_\CatC(\Objd, \Objc), \ \stylemorph{\varphi} \mapsto \mora \mthen \stylemorph{\varphi} \mthen \morb.
    \end{equation}

\end{example}

\begin{gradedexercise}[\exname{HomFunctor}]
    \label{ex:HomFunctor}
    Prove that the hom-functor defined in \cref{exa:hom-functor} is in fact a functor.
\end{gradedexercise}
\solutionof{HomFunctor}

\devel{

    \subsection{The elevation functor}

    \begin{figure}
        \includegraphics[width=8cm]{berg_elevation}
    \end{figure}

}

\subsection{Planning as the search for a functor}
\label{sec:planning-as-functor}

\begin{example}
    \label{exa:planning-as-search-functor}
    Recall the category \Berg introduced in \cref{sec:trekking} and define a category \Plans where objects are activities and morphisms describe activities order constraints, illustrated in \cref{fig:plans_functor} (left).

    For instance, there is a morphism from ``mountain lodge'' to ``panoramic lake'', which describes the plan of going from the lodge area to the lake area.
    We call such morphisms \emph{plans}.
    Plans can be composed via concatenation.
    For instance, given a plan to go from ``mountain lodge'' to ``panoramic lake'', and a plan to go from ``panoramic lake'' to ``peak'', their composition is the plan of going from ``mountain lodge'' to the ``peak'', passing through the ``panoramic lake''.

    When we talk about ``planning'' in this context, we refer to the action of finding a \SY{functor}~$\funa$ from \Plans to \Berg.
    % Let's look at this in more detail.
    The objects of \Berg are tuples~$\tup{p,v}$, where~$p$ represent coordinates of a specific location and~$v\setin \reals^3$ represents velocities.
    Morphisms in \Berg are paths that connect locations.
    For the sake of our planning, we can identify areas of the mountain as sets of locations.
    Such areas are, for instance, the ``mountain lodge'', ``panoramic lake'', and the
    ``peak'' (note that the ``peak'' represents an area corresponding to a single location).
    Given some plans as in \cref{fig:plans_functor} (left), we want to find a map~$P$ which maps each object in \Plans (activity) to an object of \Berg (specific location and velocity).
    Similarly, it must map each morphism in \Plans (activity order constraints) to a morphism in \Berg (specific paths).
    This is illustrated in \cref{fig:plans_functor}.
\end{example}

\begin{figure*}[h!]
    \centering
    \includesag{planning_berg}
    \caption{Planning \SY{functor}.}
    \label{fig:plans_functor}
\end{figure*}

\vfill
\clearpage
\vfill

\todojira{484}{\alphubel: @Gioele: Show that there is a \SY{functor} from reals to cat, which maps an alpha to the category bergalpha}
