% !TEX root = chapter-standalone.tex

\section{Traces for semicategories}

\devel{

    \todo{fill this section}

    \begin{widepar}
        \begin{ctdefinition}[Traced symmetric monoidal associative stacking semicategory]
            \label{def:traced-strict-mon-scat}
            We say that a symmetric monoidal associative stacking \SY{semicategory}~$\tup{\CatC, \mtimescat, \idmoncat, \sourceperm{\sigma}, \targetperm{\sigma} }$ is \emph{traced} if it is equipped with a family of functions
            \begin{equation}
                \Tr_{\Obja,\Objb}^\Objc\colon \HomSet{\CatC}{\Obja \mtimescatob \Objc}{\Objb\mtimescatob \Objc}\to \HomSet{\CatC}{\Obja}{\Objb},
            \end{equation}
            satisfying the following axioms:
            \begin{enumerate}

                \item \emph{Naturality in $\Obja$:} For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obja' \mto \Obja$, if $\Objc$ has an identity $\catidat\Objc$, then
                      \begin{equation}
                          \Tr_{\Obja', \Objb}^\Objc ( (\morb \mtimescatmor \catidat\Objc) \mthen \mora) = \morb \mthen \Tr_{\Obja, \Objb}^\Objc (\mora).
                      \end{equation}

                \item \emph{Naturality in $\Objb$:}
                      For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Objb \mto \Objb'$, if $\Objc$ has an identity $\catidat\Objc$, then
                      \begin{equation}
                          \Tr_{\Obja, \Objb'}^\Objc ( \mora \mthen (\morb \mtimescatmor \catidat\Objc) ) = \Tr_{\Obja, \Objb}^\Objc (\mora) \mthen \morb.
                      \end{equation}

                \item \emph{Dinaturality in $\Objc$:}
                      For any morphisms $\mora \colon \Obja \mtimescatob \Objc \mto \Objb \mtimescatob \Objc'$ and $\morb \colon \Objc' \mto \Objc$, if $\catidat\Obja$ and $\catidat\Objb$ exist, then
                      \begin{equation}
                          \Tr_{\Obja, \Objb}^{\Objc} (\mora \mthen (\catidat\Objb \mtimescatmor \morb)) = \Tr_{\Obja, \Objb}^{\Objc'}((\catidat\Obja \mtimescatmor \morb) \mthen \mora).
                      \end{equation}

                \item \emph{Vanishing I:}
                      For any morphism~$\mora \colon \Obja\mto \Objb$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-vanishing_1}
                          \Tr_{\Obja,\Objb}^\idmoncat (\mora)=\mora.
                      \end{equation}

                \item \emph{Vanishing II:}
                      For any morphism~$\mora \colon \Obja\mtimescatob \Objc \mtimescatob \Objd \mto \Objb\mtimescatob \Objc \mtimescatob \Objd$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-vanishing_2}
                          \Tr_{\Obja,\Objb}^{\Objc\mtimescatob \Objd}(\mora)=\Tr_{\Obja,\Objb}^\Objc\pars{
                              \Tr_{\Obja \mtimescatob \Objc, \Objb \mtimescatob \Objc}^\Objd(\mora)}.
                      \end{equation}

                \item \emph{Superposing:}
                      For any morphisms~$\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obje \mto \Objf$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-superposing}
                          \Tr_{\Obje\mtimescatob \Obja,\Objf\mtimescatob \Objb}^{\Objc}(\morb \mtimescatmor \mora)=\morb \mtimescatmor \Tr_{\Obja,\Objb}^\Objc(\mora).
                      \end{equation}

                \item \emph{Yanking:}
                      For any object $\Objc$, if $\catidat\Objc$ exists, then
                      \begin{equation}
                          \label{eq:semicat-trace-yanking-I}
                          (\sourceperm{\pi} \mthen \Tr_{\Objc,\Objc}^\Objc)\pars{\catidat\Objc \mtimescatmor \catidat\Objc }=\catidat\Objc
                      \end{equation}
                      and
                      \begin{equation}
                          \label{eq:semicat-trace-yanking-II}
                          (\targetperm{\pi} \mthen \Tr_{\Objc,\Objc}^\Objc)\pars{\catidat\Objc \mtimescatmor \catidat\Objc }=\catidat\Objc,
                      \end{equation}
                      where $\pi \setin S_2$ is the odd permutation corresponding to swapping the two copies of $\Objc$.
            \end{enumerate}
        \end{ctdefinition}
    \end{widepar}

    \begin{widepar}
        \begin{ctdefinition}[Traced symmetric strict monoidal semicategory]
            \label{def:traced-sym-strict-mon-scat}
            We say that a symmetric monoidal associative stacking \SY{semicategory}~$\tup{\CatC, \mtimescat, \idmoncat, \sourceperm{\sigma}, \targetperm{\sigma} }$ is \emph{traced} if it is equipped with a family of functions
            \begin{equation}
                \Tr_{\Obja,\Objb}^\Objc\colon \HomSet{\CatC}{\Obja \mtimescatob \Objc}{\Objb\mtimescatob \Objc}\to \HomSet{\CatC}{\Obja}{\Objb},
            \end{equation}
            satisfying the following axioms:
            \begin{enumerate}

                \item \emph{Naturality in $\Obja$:} For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obja' \mto \Obja$, if $\Objc$ has an identity $\catidat\Objc$, then
                      \begin{equation}
                          \Tr_{\Obja', \Objb}^\Objc ( (\morb \mtimescatmor \catidat\Objc) \mthen \mora) = \morb \mthen \Tr_{\Obja, \Objb}^\Objc (\mora).
                      \end{equation}

                \item \emph{Naturality in $\Objb$:}
                      For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Objb \mto \Objb'$, if $\Objc$ has an identity $\catidat\Objc$, then
                      \begin{equation}
                          \Tr_{\Obja, \Objb'}^\Objc ( \mora \mthen (\morb \mtimescatmor \catidat\Objc) ) = \Tr_{\Obja, \Objb}^\Objc (\mora) \mthen \morb.
                      \end{equation}

                \item \emph{Dinaturality in $\Objc$:}
                      For any morphisms $\mora \colon \Obja \mtimescatob \Objc \mto \Objb \mtimescatob \Objc'$ and $\morb \colon \Objc' \mto \Objc$, if $\catidat\Obja$ and $\catidat\Objb$ exist, then
                      \begin{equation}
                          \Tr_{\Obja, \Objb}^{\Objc} (\mora \mthen (\catidat\Objb \mtimescatmor \morb)) = \Tr_{\Obja, \Objb}^{\Objc'}((\catidat\Obja \mtimescatmor \morb) \mthen \mora).
                      \end{equation}

                \item \emph{Vanishing I:}
                      For any morphism~$\mora \colon \Obja\mto \Objb$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-vanishing_1-b}
                          \Tr_{\Obja,\Objb}^\idmoncat (\mora)=\mora.
                      \end{equation}

                \item \emph{Vanishing II:}
                      For any morphism~$\mora \colon \Obja\mtimescatob \Objc \mtimescatob \Objd \mto \Objb\mtimescatob \Objc \mtimescatob \Objd$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-vanishing_2-b}
                          \Tr_{\Obja,\Objb}^{\Objc\mtimescatob \Objd}(\mora)=\Tr_{\Obja,\Objb}^\Objc\pars{
                              \Tr_{\Obja \mtimescatob \Objc, \Objb \mtimescatob \Objc}^\Objd(\mora)}.
                      \end{equation}

                \item \emph{Superposing:}
                      For any morphisms~$\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obje \mto \Objf$ in \CatC,
                      \begin{equation}
                          \label{eq:semicat-trace-superposing-b}
                          \Tr_{\Obje\mtimescatob \Obja,\Objf\mtimescatob \Objb}^{\Objc}(\morb \mtimescatmor \mora)=\morb \mtimescatmor \Tr_{\Obja,\Objb}^\Objc(\mora).
                      \end{equation}

                \item \emph{Yanking:}
                      For any object $\Objc$, if $\catidat\Objc$ exists, then
                      \begin{equation}
                          \label{eq:semicat-trace-yanking-I-b}
                          (\sourceperm{\pi} \mthen \Tr_{\Objc,\Objc}^\Objc)\pars{\catidat\Objc \mtimescatmor \catidat\Objc }=\catidat\Objc
                      \end{equation}
                      and
                      \begin{equation}
                          \label{eq:semicat-trace-yanking-II-b}
                          (\targetperm{\pi} \mthen \Tr_{\Objc,\Objc}^\Objc)\pars{\catidat\Objc \mtimescatmor \catidat\Objc }=\catidat\Objc,
                      \end{equation}
                      where $\pi \setin S_2$ is the odd permutation corresponding to swapping the two copies of $\Objc$.
            \end{enumerate}
        \end{ctdefinition}
    \end{widepar}

    \todotext{J: the above defines what might more precisely be called a \emph{right} trace... in a \SY{symmetric monoidal category} this will, I think, automatically also give a left trace, because the axioms work nicely with the symmetric braiding... in the above I'm not sure if this works out still all nicely... perhaps or perhaps not... }

    \begin{figure*}[h!]
        \centering
        \includesag{feedback_axiomatic-semicat-trace-nat-X}
        %\includegraphics[scale=0.35]{feedback_axiomatic-semicat-trace-nat-X}
        \caption{Naturality in $\Obja$.}
        \label{fig:axiomatic-semicat-trace-nat-X}
    \end{figure*}

    \begin{figure}[h!]
        \centering
        \includesag{feedback_axiomatic-semicat-trace-vanishing-I}
        %\includegraphics[scale=0.15]{feedback_axiomatic-semicat-trace-vanishing-I}
        \caption{Vanishing I.}
        \label{fig:axiomatic-semicat-trace-vanishing-I}
    \end{figure}

    \begin{figure}[h!]
        \centering
        \includesag{feedback_axiomatic-semicat-trace-superposing}
        %\includegraphics[scale=0.2]{feedback_axiomatic-semicat-trace-superposing}
        \caption{Superposing.}
        \label{fig:axiomatic-semicat-trace-superposing}
    \end{figure}

}
