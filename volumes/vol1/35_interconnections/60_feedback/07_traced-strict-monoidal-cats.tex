% !TEX root = chapter-standalone.tex

\section{Traced symmetric strict monoidal categories}
\publictodomessage

\begin{widepar}
    \begin{ctdefinition}[Traced symmetric strict monoidal category]
        \label{def:traced-sym-strict-mon-cat}
        We say that a symmetric strict monoidal  \SY{category}~$\tup{\CatC, \mtimescat, \idmoncat, \permmap}$ is \emph{traced} if it is equipped with a family of functions
        \begin{equation}\label{eq:trace-def-trace-map}
            \Tr_{\Obja,\Objb}^\Objc\colon \HomSet{\CatC}{\Obja \mtimescatob \Objc}{\Objb\mtimescatob \Objc}\to \HomSet{\CatC}{\Obja}{\Objb},
        \end{equation}
        satisfying the following axioms:
        \begin{enumerate}

            \item \emph{Naturality in $\Obja$:} For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obja' \mto \Obja$, if $\Objc$ has an identity $\catidat\Objc$, then
                  \begin{equation}\label{eq:trace-def-naturality-in-source}
                      \Tr_{\Obja', \Objb}^\Objc ( (\morb \mtimescatmor \catidat\Objc) \mthen \mora) = \morb \mthen \Tr_{\Obja, \Objb}^\Objc (\mora).
                  \end{equation}

            \item \emph{Naturality in $\Objb$:}
                  For any morphisms $\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Objb \mto \Objb'$, if $\Objc$ has an identity $\catidat\Objc$, then
                  \begin{equation}\label{eq:trace-def-naturality-in-target}
                      \Tr_{\Obja, \Objb'}^\Objc ( \mora \mthen (\morb \mtimescatmor \catidat\Objc) ) = \Tr_{\Obja, \Objb}^\Objc (\mora) \mthen \morb.
                  \end{equation}

            \item \emph{Dinaturality in $\Objc$:}
                  For any morphisms $\mora \colon \Obja \mtimescatob \Objc \mto \Objb \mtimescatob \Objc'$ and $\morb \colon \Objc' \mto \Objc$, if $\catidat\Obja$ and $\catidat\Objb$ exist, then
                  \begin{equation}\label{eq:trace-def-dinaturality-in-traced-object}
                      \Tr_{\Obja, \Objb}^{\Objc} (\mora \mthen (\catidat\Objb \mtimescatmor \morb)) = \Tr_{\Obja, \Objb}^{\Objc'}((\catidat\Obja \mtimescatmor \morb) \mthen \mora).
                  \end{equation}

            \item \emph{Vanishing I:}
                  For any morphism~$\mora \colon \Obja\mto \Objb$ in \CatC,
                  \begin{equation}\label{eq:trace-def-vanishing-I}
                      \Tr_{\Obja,\Objb}^\idmoncat (\mora)=\mora.
                  \end{equation}

            \item \emph{Vanishing II:}
                  For any morphism~$\mora \colon \Obja\mtimescatob \Objc \mtimescatob \Objd \mto \Objb\mtimescatob \Objc \mtimescatob \Objd$ in \CatC,
                  \begin{equation}\label{eq:trace-def-vanishing-II}
                      \Tr_{\Obja,\Objb}^{\Objc\mtimescatob \Objd}(\mora)=\Tr_{\Obja,\Objb}^\Objc\pars{
                          \Tr_{\Obja \mtimescatob \Objc, \Objb \mtimescatob \Objc}^\Objd(\mora)}.
                  \end{equation}

            \item \emph{Superposing:}
                  For any morphisms~$\mora\colon \Obja\mtimescatob \Objc \mto \Objb\mtimescatob \Objc$ and $\morb \colon \Obje \mto \Objf$ in \CatC,
                  \begin{equation}\label{eq:trace-def-superposing}
                      \Tr_{\Obje\mtimescatob \Obja,\Objf\mtimescatob \Objb}^{\Objc}(\morb \mtimescatmor \mora)=\morb \mtimescatmor \Tr_{\Obja,\Objb}^\Objc(\mora).
                  \end{equation}

            \item \emph{Yanking:}
                  For any object $\Objc$,
                  \begin{equation}\label{eq:trace-def-yanking}
                      \Tr_{\Objc,\Objc}^\Objc(\permmap_{\Objc,\Objc})=\catidat\Objc.
                  \end{equation}
        \end{enumerate}
    \end{ctdefinition}
\end{widepar}

\todotext{JL: diagram for vanishing II is incorrect -- Z and U need to be swapped}

\begin{definition}[Trace for $\RelL$ with concatenation as monoidal product]
    \label{def:tuple-REL-trace}
    Consider the symmetric strict monoidal category $\RelL$, where the monoidal product is defined via the concatenation operation $\cprod$ for lists of sets.
    Given a relation $\relA \colon \cObj{\setA, \setC}  \to \cObj{\setB, \setC}$, its \emph{trace} is defined as
    %
    \begin{equation}
        \label{eq:tupel-REL-tracedef}
        \begin{aligned}
            \Tr_{\cObj{\setA}, \cObj{\setB}}^{\cObj{\setC}}(\relA) = \{ \tup{\ela, \elb} \in \cObj{\setA} \times \cObj{\setB} \mid \exists \ \elc \in \cObj{\setC} : \tup{\ela \tupconcat \elc, \elb \tupconcat \elc} \in \relA \}
        \end{aligned}
    \end{equation}
\end{definition}

\devel{

    \begin{figure}[h!]
        \centering
        \includegraphics[width=12cm]{trace-naturality-x}
        \caption{Naturality in $\Obja$}
        \label{fig:trace-naturality-x}
    \end{figure}
    \begin{figure}[h!]
        \centering
        \includegraphics[width=12cm]{trace-naturality-y}
        \caption{Naturality in $\Objb$}
        \label{fig:trace-naturality-y}
    \end{figure}
    \begin{figure}[h!]
        \centering
        \includegraphics[width=12cm]{trace-dinaturality-z}
        \caption{Dinaturality in $\Objc$}
        \label{fig:trace-dinaturality-z}
    \end{figure}
    \begin{figure}[h!]
        \centering
        \includegraphics[width=12cm]{trace-vanishing-i}
        \caption{Vanishing I}
        \label{fig:trace-vanishing-i}
    \end{figure}
    \begin{figure}[h!]
        \centering
        \includegraphics[width=12cm]{trace-vanishing-ii}
        \caption{Vanishing II}
        \label{fig:trace-vanishing-ii}
    \end{figure}

}