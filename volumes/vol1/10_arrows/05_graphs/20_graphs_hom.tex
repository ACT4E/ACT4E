% !TEX root = chapter-standalone.tex

\section{Graph homomorphisms}
\begin{definition}[Graph homomorphism]
    \label{def:graph_homom}
    Given graphs~$\graph_1=\tupp{\verticesn{1},\arcsn{1},\sourcen{1},\targetn{1}}$ and~$\graph_2=\tupp{\verticesn{2},\arcsn{2},\sourcen{2},\targetn{2}}$, a graph homomorphism~$\funa \colon \graph_1 \fto \graph_2$ is given by two maps~
    \begin{equation}
        \funaob\colon \verticesn{1} \fto \verticesn{2},
    \end{equation}
    \begin{equation}
        \funamor\colon \arcsn{1} \fto \arcsn{2},
    \end{equation}
    such that
    \begin{equation}
        \funamor \mthen \sourcen{2} = \sourcen{1}\mthen \funaob
    \end{equation}
    % and
    \begin{equation}
        \funamor \mthen \targetn{2} = \targetn{1}\mthen \funaob.
    \end{equation}
    % \begin{equation}
    %     (\funamor \mthen \sourcen{2})(\arc)
    %     =(\sourcen{1}\mthen \funaob)(\arc), \quad \forall \arc\setin \arcsn{1},
    % \end{equation}
    % and
    % \begin{equation}
    %     (\funamor \mthen \targetn{2})(\arc)
    %     =(\targetn{1}\mthen \funaob)(\arc), \quad \forall \arc\setin \arcsn{1}.
    % \end{equation}
    \todographics{\alphubel: Draw commutative diagram for the above}
\end{definition}

\begin{remark}
    \todotext{\alphubel: This is not intuitive at all - explain better}
    Intuitively, all this is saying is that ``arrows are bound to their vertices'', meaning that if a vertex~$\vertexan{1}$ is connected to~$\vertexan{2}$ via an arrow~$\arc$, the vertices~$\funaob(\vertexan{1})$ and~$\funaob(\vertexan{2})$ have to be connected via an arrow~$\funamor(\arc)$.
\end{remark}

\begin{example}
    \label{exa:homomorphism_graph_positive}
    Let us consider the two graphs,~$\graph_1$ and~$\graph_2$ depicted in \cref{fig:ex_graph_homom}.
    \begin{figure}[h]
        \centering
        \includesag{20_ex_graph_hom}
        \caption{Example of graphs for graph homomorphism.}
        \label{fig:ex_graph_homom}
    \end{figure}

    \begin{marginfigure}
        \centering
        \includesag{graph_homo_a}
        \caption{}
        \label{fig:graph_homo_a}
        \todographics{@Gioele: these should be $\mapsto$}
    \end{marginfigure}

    \begin{marginfigure}
        \centering
        \includesag{graph_homo_b}
        \caption{}
        \label{fig:graph_homo_b}
    \end{marginfigure}
    A possible graph homomorphism between the two is given by~$\funaob,\funamor$ graphically defined as in \cref{fig:graph_homo_a} and \cref{fig:graph_homo_b}, respectively.
    \todographics{Why don't we show the actual homomorphism, by drawing again G1 and G2 with arrows?
        The figures  \cref{fig:graph_homo_a} and \cref{fig:graph_homo_b} are really not intuitive...}
\end{example}

\begin{example}[Counterexample]
    By considering the graphs in \cref{exa:homomorphism_graph_positive}, we could define~$\funaob,\funamor$ in the same way, exception made for~$\funaob(e)=x$.
    Clearly, this would violate the commuting diagrams condition.
\end{example}

\begin{exercise}
    Consider the two graphs depicted in \cref{fig:ex_graph_hom}.
    \begin{figure}[h]
        \centering
        \includesag{graph_hom_ex}
        \caption{
            \label{fig:ex_graph_hom}}
    \end{figure}
    %
    \begin{marginfigure}
        \centering
        \includesag{graph_homo_ex_a}
        \caption{}
        \label{fig:exercise_graph_hom_a}
    \end{marginfigure}
    Furthermore, consider the map~$\funaob$ depicted in \cref{fig:exercise_graph_hom_a}.

    Find a map~$\funamor$ such that~$\funaob,\funamor$ describe a graph homomorphism between~$\graph$ and~$\graph'$.
\end{exercise}

\begin{solution}
    We know:
    \begin{itemize}
        \item $\source(1)=a$ and~$\target(1)=b$: we have~$\funaob(a)=\alpha$ and~$\funaob(b)=\beta$, meaning that~$\funamor(1)=\text{I}$.
        \item $\source(2)=b$ and~$\target(2)=c$: we have~$\funaob(b)=\beta$ and~$\funaob(c)=\gamma$, meaning that~$\funamor(2)=\text{II}$.
        \item $\source(3)=c$ and~$\target(3)=d$: we have~$\funaob(c)=\gamma$ and~$\funaob(d)=\alpha$, meaning that~$\funamor(3)=\text{III}$.
        \item $\source(4)=d$ and~$\target(4)=e$: we have~$\funaob(d)=\alpha$ and~$\funaob(e)=\gamma$, meaning that~$\funamor(4)=\text{IV}$.
        \item $\source(5)=e$ and~$\target(5)=a$: we have~$\funaob(e)=\gamma$ and~$\funaob(a)=\alpha$, meaning that~$\funamor(5)=\text{IV}$.
    \end{itemize}
    Therefore, the map~$\funamor$ is as reported in \cref{fig:exercise_graph_hom_b}.

    \begin{marginfigure}
        \centering
        \includesag{graph_homo_ex_b}
        \caption{}
        \label{fig:exercise_graph_hom_b}
    \end{marginfigure}
\end{solution}

\todotext{@J: make a graded exercise here}
