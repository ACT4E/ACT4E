% !TEX root = chapter-standalone.tex

\section[Categories of graphs]{Categories of graphs}
\label{sec:cat-grph}

Before introducing the category of graphs \Grph, we show how we can compose \SY{graph homomorphisms}.
Given \SY{graph homomorphisms}~$\funa\colon \graph_1\mto \graph_2$ and $\funb\colon \graph_2\mto \graph_3$, their composition $\funa\fthen \funb \colon \graph_1 \fto \graph_3$ acts on vertices with~$\funaob \mthen \funbob$ and on edges with~$\funamor \mthen \funbmor$.

\begin{lemma}
    \label{lem:composing_homomorphisms}
    The composition of \SY{graph homomorphisms} is a \SY{graph homomorphism}.
\end{lemma}
%
\begin{proof}
    Consider graphs~$\graph_1=\tup{\verticesn{1},\arcsn{1},\sourcen{1},\targetn{1}}$,~$\graph_2=\tup{\verticesn{2},\arcsn{2},\sourcen{2},\targetn{2}}$, and~$\graph_3=\tup{\verticesn{3},\arcsn{3},\sourcen{3},\targetn{3}}$ and
    \SY{graph homomorphisms}~$\funa \colon \graph_1 \fto \graph_2$ and~$\funb \colon \graph_2 \fto \graph_3$.
    The composition of the \SY{graph homomorphisms} is~$\funa\mthen \funb \colon \graph_1 \fto \graph_3$, and acts on vertices with~$\funaob \mthen \funbob$ and on edges with~$\funamor \mthen \funbmor$.
    Then,~$\funa\mthen \funb$ is a \SY{graph homomorphism}, since we have:
    \begin{equation}
        \begin{aligned}
            (\funamor\mthen \funbmor) \mthen \sourcen{3} & =\funamor\mthen \funbmor \mthen \sourcen{3} \qquad \text{ associativity in \Set} \\
                                                         & =\funamor\mthen \sourcen{2} \mthen \funbob \quad \text{ $\funb$ is a graph homom.
            } \\
                                                         & =\sourcen{1} \mthen \funaob\mthen \funbob \quad \text{ $\funa$ is a graph homom.} \\
                                                         & =\sourcen{1} \mthen (\funaob\mthen \funbob) \quad \text{ associativity in \Set},
        \end{aligned}
    \end{equation}
    and
    \begin{equation}
        \begin{aligned}
            (\funamor \mthen \funbmor) \mthen \targetn{3} & =\funamor \mthen \funbmor \mthen \targetn{3} \quad \text{ associativity in \Set} \\
                                                          & =\funamor \mthen \targetn{2}\mthen \funbob \quad \text{ $\funb$ is a graph homom.} \\
                                                          & =\targetn{1} \mthen \funbob\mthen \funbob \quad \text{ $\funa$ is a graph homom.} \\
                                                          & =\targetn{1} \mthen (\funbob\mthen \funbob)\quad \text{ associativity in \Set}.
        \end{aligned}
    \end{equation}
    These are precisely the conditions for a \SY{graph homomorphism}~$\graph_1 \fto \graph_3$
\end{proof}
\begin{ctdefinition}[Category \Grph]
    \SYNDEF{category of graphs and graphs homomorphisms}
    \label{def:Grph}
    The category~\Grph is defined by:
    \begin{enumerate}
        \item \emph{Objects}: all graphs.
        \item \emph{Morphisms}: for graphs~$\Obja$ and~$\Objb$, $\HomSet{\Grph}{\Obja}{\Objb}$ is the set of \SY{graph homomorphisms} (\cref{def:graph-homomorphism}) from~$\Obja$ to~$\Objb$.
        \item \emph{Composition}: composition of \SY{graph homomorphisms}.
        \item \emph{Identity morphisms}: for a graph~$\Obja =\tup{\vertices,\arcs,\source,\target}$,
              its identity morphism $\catidat\Obja$ is the \SY{graph homomorphism} $\funa$ with $\funaob = \catid_{\vertices}$ and $\funamor= \catid_{\arcs}$.
    \end{enumerate}
\end{ctdefinition}

\begin{lemma}\label{lem:Grph-is-cat}
    \Grph is indeed a category.
\end{lemma}

\begin{proof}
    First, from \cref{lem:composing_homomorphisms} we know that the composition of \SY{graph homomorphisms} is a \SY{graph homomorphism}.
    We check unitality and associativity.
    We start with unitality.
    Consider graphs~$\graph_1,\graph_2$ and a \SY{graph homomorphism}~$\funa\colon \graph_1\mto \graph_2$.
    For~$\catidat{\graph_1}\mthen \funa$ we have, for every~$\arc \setin \arcsn{1}$ that $\mapid\mthen \funaob=\funaob$ and $\mapid\mthen \funamor=\funamor$.
    Similarly, for~$\funa \mthen \catidat{\graph_2}$ we have, for every $\arc \setin \arcsn{2}$ that $\funaob\mthen \mapid=\funaob$ and $\funamor \mthen \mapid=\funamor$.
    (In short, unitality follows from the unitality in \Set).
    Similarly, associativity follows from associativity in \Set.
\end{proof}
