% !TEX root = chapter-standalone.tex

\section[The category~$\Grph$]{The category~$\Grph$}
\label{sec:cat-grph}

Before introducing the category of graphs \Grph, we show how one can compose graph homomorphisms.
Given graph homomorphisms~$\funa\colon \graph_1\mto \graph_2$ and~$\funb\colon \graph_2\mto \graph_3$, their composition is~$\funa\mthen \funb \colon \graph_1 \fto \graph_3$, and acts on vertices with~$\funaob \mthen \funbob$ and on arcs with~$\funamor \mthen \funbmor$.

\begin{lemma}
    \label{lem:composing_homomorphisms}
    The composition of graph homomorphisms is a graph homomorphism.
\end{lemma}
%
\begin{proof}
    Consider graphs~$\graph_1=\tup{\vertices_1,\arcs_1,\source_1,\target_1}$,~$\graph_2=\tup{\vertices_2,\arcs_2,\source_2,\target_2}$, and~$\graph_3=\tup{\vertices_3,\arcs_3,\source_3,\target_3}$ and
    graph homomorphisms~$\funa \colon \graph_1 \fto \graph_2$ and~$\funb \colon \graph_2 \fto \graph_3$.
    The composition of the graph homomorphisms is~$\funa\mthen \funb \colon \graph_1 \fto \graph_3$, and acts on vertices with~$\funaob \mthen \funbob$ and on arcs with~$\funamor \mthen \funbmor$.
    Then,~$\funa\mthen \funb$ is a graph homomorphisms, since for all~$\arc \setin \arcs_1$ one has:
    \begin{equation*}
        \begin{aligned}
            ((\funamor\mthen \funbmor) \mthen \source_3)(\arc) & =(\funamor\mthen \funbmor \mthen \source_3)(\arc) \qquad \text{ associativity in \Set} \\
                                                               & =(\funamor\mthen \source_2 \mthen \funbob)(\arc) \quad \text{ $\funb$ is a graph homom.
            } \\
                                                               & =(\source_1 \mthen \funaob\mthen \funbob)(\arc) \quad \text{ $\funa$ is a graph homom.} \\
                                                               & =(\source_1 \mthen (\funaob\mthen \funbob))(\arc) \quad \text{ associativity in \Set},
        \end{aligned}
    \end{equation*}
    and
    \begin{equation*}
        \begin{aligned}
            ((\funamor \mthen \funbmor) \mthen \target_3)(\arc) & =(\funamor \mthen \funbmor \mthen \target_3)(\arc) \quad \text{ associativity in \Set} \\
                                                                & =(\funamor \mthen \target_2\mthen \funbob)(\arc) \quad \text{ $\funb$ is a graph homom.} \\
                                                                & =(\target_1 \mthen \funbob\mthen \funbob)(\arc)\quad \text{ $\funa$ is a graph homom.} \\
                                                                & =(\target_1 \mthen (\funbob\mthen \funbob))(\arc)\quad \text{ associativity in \Set}.
        \end{aligned}
    \end{equation*}
    These are precisely the conditions for a graph homomorphism~$\graph_1 \fto \graph_3$
\end{proof}
\begin{ctdefinition}[Category \Grph]
    \label{def:Grph}
    The category~\iindex{\Grph} is defined by:
    \begin{enumerate}
        \item \emph{Objects}: The objects of this category are graphs.
        \item \emph{Morphisms}: The morphisms from a graph~$\Obja$ to a poset~$\Objb$ are graph homomorphisms (\cref{def:graph_homom}) from~$\Obja$ to~$\Objb$.
        \item \emph{Identity morphism}: The identity morphism for the poset~$\Obja$
              is the graph homomorphism given by identity maps on vertices and on edges.
        \item \emph{Composition operation}: The composition operation is composition of graph homomorphisms.
    \end{enumerate}
\end{ctdefinition}

\begin{lemma}
    \Grph is indeed a category.
\end{lemma}

\begin{proof}
    First of all, from \cref{lem:composing_homomorphisms} we know that the composition of graph homomorphisms is a graph homomorphism.
    We check unitality and associativity.
    Let's start with unitality.
    Consider graphs~$\graph_1,\graph_2$ and a graph homomorphism~$\funa\colon \graph_1\mto \graph_2$.
    For~$\catid_{\graph_1}\mthen \funa$ one has, for every~$\arc \setin \arcs_1$ that~$\mapid\mthen \funaob=\funaob$ and~$\mapid\mthen \funamor=\funamor$.
    Similarly, for~$\funa \mthen \catid_{\graph_2}$ one has, for every~$\arc \setin \arcs_2$ that~$\funaob\mthen \mapid=\funaob$ and~$\funamor \mthen \mapid=\funamor$.
    (In short, unitality follows from the unitality in \Set).
    Similarly, associativity follows from associativity in \Set.
\end{proof}