% !TEX root = chapter-standalone.tex


\section{Relations}
\label{sec:connection-relations}

A basic mathematical notion which underlies the above discussion is that of a \textbf{binary relation}.

\begin{definition}[Binary relation]
  \label{def:binary-relation}
  A \emph{\iindex{binary relation}} from a set~$\setA$ to a set~$\setB$ is a subset of the Cartesian product $\setA\cartprod \setB$.
\end{definition}

\begin{remark}
  We will often drop the word ``binary'' and simply use the name ``relation''.
\end{remark}

\begin{example}\label{exa:simple-rel}
Let $\setA = \{ \ela_1, \ela_2, \ela_3 \}$ and $\setB = \{ \elb_1, \elb_2, \elb_3, \elb_4 \}$. An example of a relation is the subset
\begin{equation}
\relA = \{ \tup{\ela_1, \elb_1}, \tup{\ela_2, \elb_3}, \tup{\ela_1, \elb_4} \} \subseteq \setA \times \setB.
\end{equation}
\end{example}

\devel{

\


$$\setA = \{ \ela_1, \ela_2, \ela_3 \} \label{slides-1}$$



$$\setB = \{ \elb_1, \elb_2, \elb_3, \elb_4 \} \label{slides-2}$$

$$\setC = \{ \elc_1, \elc_2  \} \label{slides-4}$$

$$\relA \subseteq \setA \times \setB \label{slides-5} $$

$$\relB \subseteq \setB \times \setC \label{slides-6} $$


\begin{equation}
\relA = \{ \tup{\ela_1, \elb_1}, \tup{\ela_2, \elb_3}, \tup{\ela_1, \elb_4} \} \subseteq \setA \times \setB \label{slides-7}
\end{equation}

\begin{equation}
\relB = \{ \tup{\ela_2, \elc_1}, \tup{\ela_2, \elc_2} \} \subseteq \setA \times \setB \label{slides-8}
\end{equation}


\begin{equation}
\relA \then \relB = \{ \tup{\ela_2, \elc_1}, \tup{\ela_2, \elc_2} \} \subseteq \setA \times \setB \label{slides-9}
\end{equation}


\begin{center}
  $R =$ ``$\leq$'', on $\natnumbers $ \label{slides-10}
\end{center}

\begin{center}
  $R =$ ``$\leq$'', on $\reals^2 $ \label{slides-11}
\end{center}

\begin{center}
  $R =$ ``is married to'', on the set of british royals \label{slides-11}
\end{center}


$$ \setA = \setB = \reals^2 \label{slides-12}$$


\begin{center}
 $\relA =$ ``$\leq$''  \label{slides-13}
\end{center}

$$ \tup{\ela_1, \ela_2} \leq \tup{\elb_1, \elb_2} \quad \Leftrightarrow \quad \ela_1 \leq \elb_1 \text{ and } \ela_2 \leq \elb_2 \label{slides-14}$$

\begin{equation}
\ela \relA \elb \definedas \tup{\ela, \elb} \in \relA  \label{slides-15}
\end{equation}

$$ \ela_1 \relA \elb_1 \label{slides-16}$$

$$ \ela_2 \relA \elb_3 \label{slides-17}$$

$$ \ela_2 \relA \elb_4 \label{slides-18}$$






}

\


\begin{marginfigure}
  \centering
  \includesag{30_rel_1}
  \caption{}
  \label{fig:example_rel}
\end{marginfigure}

If~$\setA$ and~$\setB$ are finite sets, we can depict a relation~$\relA \subseteq \setA \cartprod \setB$ graphically as in \cref{fig:example_rel}. For each element~$\tup{\ela,\elb} \in \setA \cartprod \setB$, we draw an arrow from~$\ela$ to~$\elb$ if and only if~$\tup{\ela,\elb} \in \relA \subseteq \setA \cartprod \setB$.


\begin{marginfigure}
  \begin{center}
    \includesag{30_rel_graph}
  \end{center}
  \caption{Relations visualized in ``coordinate systems''.}
  \label{fig:example_rel_coord}
\end{marginfigure}

We can also depict this relation graphically as a subset of~$\setA \cartprod \setB$ in a ``coordinate system way'', as in \cref{fig:example_rel_coord}. The shaded grey area is the subset~$\relA$ defining the relation.



The visualization in \cref{fig:example_rel} hints at the fact that we can think of a relation~$\relA \subseteq \setA \cartprod \setB$ as a \emph{morphism} from~$\setA$ to~$\setB$.

\begin{ctdefinition}[Category \Rel]
  \label{def:Rel}
  The category of relations \iindex{\Rel}  is given by:
  \begin{compactenum}
    \item \emph{Objects}: The objects of this category are all sets.
    \item \emph{Morphisms}: Given sets~$\Obja, \Objb$, the homset~$\HomSet{\Rel}{\Obja}{\Objb}$ consists of all
    relations~$\relA\subseteq \Obja\times \Objb$.
    \item \emph{Identity morphisms}: Given a set~$\Obja$, its identity morphism is
    \begin{equation}
      \catid_\Obja \definedas \{ \tup{\ela,\ela} \mid  \ela \in \Obja \}.
    \end{equation}
    \item \emph{Composition}: Given relations~$\relA \then \Obja\mto \Objb$,~$\relB \colon \Objb\mto \Objc$, their composition is given by
    \begin{equation}
      \label{eq:RelCompRule}
      \relA \then \relB \definedas \{\tup{\ela,\elc} \mid  \exists \elb \in \Objb \colon \ \left(\tup{\ela,\elb} \in \relA\right) \wedge \left(\tup{\elb,\elc} \in \relB\right)\}.
    \end{equation}
  \end{compactenum}
\end{ctdefinition}

To illustrate the composition rule in \cref{eq:RelCompRule} for relations, let's consider a simple example, involving sets~$\setA$,~$\setB$, and~$\setC$, and relations~$\relA \colon \setA \to \setB$ and $\relB \colon \setB \to \setC$, as depicted graphically below in \cref{fig:example_rel_composable}.
%
\begin{figure}[h!]
  \centering
  \includesag{30_rel_2}
  \caption{Relations compatible for composition.}
  \label{fig:example_rel_composable}
\end{figure}
%
Now, according to the rule in \cref{eq:RelCompRule}, the composition~$\relA \then \relB \subseteq \setA \times \setC$ will be such that~$\tup{\ela,\elc} \in \relA \then \relB$ if and only if there exists some~$\elb \in \setB$ such that~$\tup{\ela,\elb} \in \relA$ and~$\tup{\elb,\elc} \in \relB$, which, graphically, means that for~$\tup{\ela,\elc}$ to be an element of the relation~$\relA \then \relB$,~$\ela$ and~$\elb$ need to be connected by at least one sequence of two arrows such that the target of the first arrow is the source of the second.
For example, in \cref{fig:example_rel_composable}, there is an arrow from~$\ela_2$ to~$\elb_3$, and from there on to~$\elc_1$, and therefore, in the composition~$\relA \then \relB$ depicted in \cref{fig:example_rel_composed}, there is an arrow from~$\ela_2$ to~$\elc_1$.
%
\begin{figure}[h!]
  \centering
  \includesag{30_rel_3}
%\includegraphics[width=0.5\linewidth]{pics/dist_net_10.png}
  \caption{Composition of relations.}
  \label{fig:example_rel_composed}
\end{figure}

\begin{remark}
  Relations with the same source and target can be \emph{compared} via inclusion.
  Given~$\relA \subseteq \setA\times \setB$ and~$\relA'\subseteq \setA\times \setB$, we can ask whether~$\relA\subseteq \relA'$ or~$\relA'\subseteq \relA$.
\end{remark}
