% !TEX root = chapter-standalone.tex


\section{Rope Goldberg Machines}

The inventions of Professor Butts, transcribed by Rube Goldberg, are prodigious machines that provide practical ways to perform everyday tasks (\cref{fig:Rube3}). They also highlight the power of compositionality.

\begin{figure}[h]
  \includegraphics[width=\textwidth]{Rube3}
  \caption{\emph{Lifeâ€™s Little Jokes \#59,380}, Rube Goldberg}
  \label{fig:Rube3}
\end{figure}



We are going to assemble similar machines. We start by introducing some of the essential elements:

\begin{itemize}
  \item Rope
  \item Elastic
  \item Brick
  \item Glass
  \item Spring
  \item Rubber
\end{itemize}

\todographics{work on original icons}

\begin{center}
\begin{tabular}{ccc}
  \rope{ropecola}{ropecolb}{2}{0}{0}{1}{}&
  \includegraphics[width=2cm, height=2cm]{elastic_rope}&
  \includegraphics[width=2cm, height=2cm]{brick}\\
  rope&elastic&brick\\
  \includegraphics[width=2cm, height=2cm]{empty_glass}&
  \includegraphics[width=2cm, height=2cm]{spring}&
  \includegraphics[width=2cm, height=2cm]{rubber}\\
  glass&spring&rubber
\end{tabular}
\end{center}

These different elements can be classified by their elasticity properties, and hence by the way in which they deform.
Given any material, it reacs to the application of specific forces. The force applied per unit area is referred to as \emph{stress}, and the stretching/compression produced as a response from the material is called \emph{strain}.
The strain~$\strain$ is usually written as the ratio of the difference in length along the direction of the stress~$\Delta L$, and the original length of the material~$L_0$:
\begin{equation*}
  \strain = \frac{\Delta L}{L_0}
\end{equation*}

When stress is applied, each material experiences a specific strain, which depends on the chemical bonds creating the material. Whether the material returns to its original shape when stress is removed, depends on the entity of deformation.
One usually differentiates between \emph{elastic} deformation (when removing the stress makes the material return to its original shape), and \emph{plastic} deformation (when the material deforms irreversibly): see \cref{fig:stress_strain}.
If one observes the stress vs. strain curve, the first region behaves linearly, meaning that the force required to deform an elastic material is directly proportional to its deformation.
This is commonly known as the Hooke's law, which is due to the physicist Robert Hooke:
\begin{equation*}
  \force=-\springconst \deformation,
\end{equation*}
where~$\force$ represents the force,~$\deformation$ the deformation of the material, and~$\springconst$ the so-called \emph{spring constant} (in \unit[]{[N/m]}).

\begin{figure}[h]
\begin{center}
\includegraphics[width=10cm]{strain_stress}
\end{center}
  \caption{\todo{do our one}. \label{fig:stress_strain}}
\end{figure}

\begin{example}
  You are skiing in the beautiful Swiss alps. Your friend weighs \unit[100]{kg} and sits on a chairlift with spring constant \unit[4,000]{N/m}. The nominal extension of the chairlift is \unit[0.25]{m}. The weight of your friend will create an extension of the chairlift, which can be computed as:
  \begin{equation*}
  \begin{aligned}
    \deformation &=\frac{\force}{\springconst}\\
    &=\frac{mg}{\springconst}\\
    &\approx \unit[0.15]{m}.
  \end{aligned}
  \end{equation*}
  One can therefore compute the extension as~$L=L_0-\deformation=\unit[0.1]{m}$.
\end{example}

The ability of a material to being deformed elastically is described by the so-called Young's \emph{modulus}, name of which is due to the physicist Thomas Young. This modulus, usually named~$\youngmod$ is defined as
\begin{equation*}
  \youngmod=\frac{\text{stress}}{\text{strain}}.
\end{equation*}
Note that~$\youngmod$~is a constant if computed in the domain of validity of Hooke's law. In this domain, we can obtain the spring constant~$\springconst$ by using the formula:
\begin{equation*}
  \springconst=\youngmod \frac{A}{L_0},
\end{equation*}
where~$L_0$ is the nominal length of the material, and~$A$ is the area over which the force is applied.

It is interesting to see what happens when one combines multiple materials. The first two elastic material combinations which come to mind are \emph{series} and \emph{parallel}. If you take two materials with the same spring constant~$\springconst$, you concatenate them, and you hang a weight at their lower end (\cref{fig:series_spring}), they will be equivalent to one single spring with double the length.
The effective spring constant of the combination must therefore be halved to~$\springconst/2$.
In case one puts the two materials in parallel (\cref{fig:parallel}), the length remains the same, and the resulting spring constant doubles to~$2\springconst$.

\todo{This is the exact same reasoning for capacitors in electrical circuits (isomorphic example for ITET people:) )}
\begin{tabular}{cc}
\includesag{30_spring_series}&\includesag{30_spring_parallel}
\end{tabular}

\todotext{Describe here the properties of these components (elasticity, etc.)}


These are the classes that define the data.

\classsource{Component}{max_size=25}
\classsource{Rope}{max_size=25}
\classsource{Brick}{max_size=25}
\classsource{Elastic}{max_size=25}

\begin{gradedexercise}[\exname{TestRopeGoldberg}]
  In this exercise you will compute the behavior of a chain of those components.

  The interface you need to implement is:

  \classsource{RupeGoldbergSolver}{}


  \begin{enumerate}
    \item The first function asks what would happen if you were to hang this chain on one end, and let it hang (\cref{fig:hang}).
    Would it break? If not, what would be the extended length?
   \GZ{The ```would it break'' question is not as smooth as it seems. The strain-stress diagrams have nonlinearities and maybe we end up in oversimplifying.}
    \item The second question asks what would happen if you were to let the chain rest horizontally (\cref{fig:push}). Then fix one end to an \emph{immovable wall} and push to the other end. What would happen? If the push destroys some of the objects, consider
    them destroyed and of length 0.
    \item  The third question asks what would happen if you were to pull with a certain force  (\cref{fig:pull}). Either you will break the chain, or there will be an equilibrium. What would be the length?
  \end{enumerate}

\end{gradedexercise}

\begin{figure}
  \hfill
  \subfloat[\label{fig:hang}Hanging the chain]{
    \includegraphics[width=3cm, height=4cm]{placeholder}
  }
  \hfill
  \subfloat[\label{fig:push}Horizontal compression]{
  \includegraphics[width=3cm, height=4cm]{placeholder}
  }
  \hfill
  \subfloat[\label{fig:pull}Horizontal extension]{
  \includegraphics[width=3cm, height=4cm]{placeholder}
  }
  \hfill
  \caption{Visualization of the three scenarios.
  \todographics{Make graphics. }}
\end{figure}


We will walk you through the theoretical part, but we will leave the implementation to you.

We should think \emph{compositionally}. We should first see what happens in the specific cases,
and see if the answer can be generalized in a way that the solution is compositional.

\todotext{Go through the specific cases}


\todotext{Give breakthrough observation that all the behavior can be described by one relation between force and length. Hence what we are talking about is really composition in a certain monoid.}

\todotext{The solution is to create for each component this relation, and then compose the relations.}
