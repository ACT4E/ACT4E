\sectionexercises{Set products}

When we compute the union of two sets, we want to forget the structure.
With products we want to remember to structure.
So we define a \classname{SetProduct} to be a special \Setoid that remembers its factors.

\classlisting{SetProduct}

The semantics is the following:
\begin{itemize}
    \item The method \funcname{components} returns the ordered list of the setoid components.
    \item The method \funcname{pack} takes a number of arguments and creates an element of the product.
    \item The method \funcname{projections} returns the list of projection mappings.
          The~$i$-th projection mapping takes an element of the product and returns the~$i$-th component.
\end{itemize}

There is also a specialization, which corresponds to a product of finite sets; the only change is that the components are finite sets rather than setoids.

\classlisting{FiniteSetProduct}

\codeboilerplate{FiniteMakeSetProduct}{

    Given two sets, compute their product.
}
\classlisting{FiniteMakeSetProduct}{}

The interface above means that if you are passed 2 \FiniteSet{}s, you should return a \FiniteSet.
Otherwise, you should return a \Setoid.

\margindatafilefig{set_product}{$\{a,b\} \cartprod \{1,2\}$}{fig:set_product}

\margindatafilefig{set_product111}{$\{1\} \cartprod \{1\} \times \{1\}$}{fig:set_product11}%

\margindatafilefig{set_product10}{$\{1\} \cartprod\emptyset$}{fig:set_product10}%

\begin{codeexercise}[\exname{TestFiniteSetRepresentationProduct}]
    Extend now the code you wrote for loading sets to allow the format in \cref{fig:set_product,fig:set_product11,fig:set_product10}.
    We add another clause to the parsing algorithm:
    \begin{enumerate}
        \item If it has a field \fieldname{elements}, it is a finite set described with elements directly.
        \item If there is a field \fieldname{product}, it must be a list of sets, and the semantics is the product of those sets.
        \item Otherwise, it is an error --- for now; we will introduce many more ways to describe sets.
    \end{enumerate}
    Test your results using
    %: note this cannot be boilerplate
    \checkexercise{TestFiniteSetRepresentationProduct}
\end{codeexercise}
