% !TEX root = chapter-standalone.tex

\section{Endorelations}
\label{sec:endorelations}

\linkvideo{spring2021-relations:relations:endorel} % Endorelations

\begin{table*}[bp]
    \caption{Summary of \SY{endorelation} properties.}
    \setlength{\tabcolsep}{15pt}
    \begin{tabular}{cccc}
        Reflexive                                                                    & Total      & Symmetric     & Transitive \\[+10pt]
        \prftree{\true}{\inrel{\ela}{\relA}{\ela}}                                   &
        \prftree{\true}{\inrel{\ela}{\relA}{\elb} \boolor \inrel{\elb}{\relA}{\ela}} &
        \prfdouble{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }                                                                            &
        \prftree{\inrel{\ela}{\relA}{\elb}}{\inrel{\elb}{\relA}{\elc}}{\inrel{\ela}{\relA}{\elc}} \\[+10pt]
        Irreflexive                                                                  & Asymmetric & Antisymmetric & \\[+10pt]
        \prftree{
            \inrel \ela \relA \ela
        }{
            \false
        }                                                                            &
        \prftree{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }{
            \false
        }                                                                            &
        \prftree{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }{
            \ela = \elb
        }                                                                            & \\
    \end{tabular}
    \label{tab:endo_properties}
\end{table*}

\begin{ctdefinition}[Endorelation]
    \label{def:endorelation}
    An \maindef{endorelation} on a set~\setA is a relation~$\relA\colon \setA \mto \setA$.
\end{ctdefinition}

\begin{example}
    ``Equality'' on a set~\setA is an endorelation~$\relstyle{=}_\setA$ of the form
    \begin{equation}
        \relstyle{=}_\setA \definedas \makeset{\tup{\ela,\elb}\setin \setA\cartprod \setA \mid \ela=\elb}.
    \end{equation}
\end{example}

\begin{example}
    Take~$\setA=\natnumbers$.
    The relation ``less than or equal'' is an \SY{endorelation} of the form
    \begin{equation}
        \relstyle{\leq} \definedas \makeset{\tup{\ela,\elb}\setin \natnumbers\cartprod \natnumbers\mid \ela \leq \elb}.
    \end{equation}
\end{example}

\begin{example}
    The relation depicted in \cref{fig:power_internodal} is an \SY{endorelation} between the set of high voltage nodes.
\end{example}

\begin{ctdefinition}[Symmetry, asymmetry, and antisymmetry]
    \label{def:endo_sym_asym_antisym}
    \label{def:antisymmetry}
    \label{def:symmetric-relation}
    \label{def:asymmetric-relation}
    \label{def:antisymmetric-relation}
    \SYNDEF{symmetric relation}
    \SYNDEF{asymmetric relation}
    \SYNDEF{antisymmetric relation}
    An endorelation~$\relA\colon \setA\mto \setA$ is \emph{symmetric} if
    \begin{equation}\label{eq:symmetric}
        \prfdoublecomma{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }
    \end{equation}
    is \emph{asymmetric} if
    \begin{equation}\label{eq:asymmetric}
        \prfcomma{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }{
            \false
        }
    \end{equation}
    and is \emph{antisymmetric} if
    \begin{equation}\label{eq:antisymmetric}
        \prfperiod{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \ela
        }{
            \ela = \elb
        }
    \end{equation}
\end{ctdefinition}

\begin{ctdefinition}[Reflexivity and irreflexivity of endorelations]
    \label{def:endo_reflexive_irreflexive}
    \SYNDEF{reflexive relation}
    \SYNDEF{irreflexive relation}
    \label{def:reflexive-relation}
    \label{def:irreflexive-relation}
    An endorelation~$\relA\colon \setA\mto \setA$ is \emph{reflexive} if
    \begin{equation}\label{eq:reflexive}
        \prfcomma{
            \true
        }{
            \inrel \ela \relA \ela
        }
    \end{equation}
    and is \emph{irreflexive} if
    \begin{equation}\label{eq:irreflexive}
        \prfperiod{
            \inrel \ela \relA \ela
        }{
            \false
        }
    \end{equation}
\end{ctdefinition}

\begin{ctdefinition}[Total]
    \label{def:total-relation}
    \SYNDEF{total relation}
    An endorelation~$\relA\colon \setA\mto \setA$ is \emph{total} if
    \begin{equation}\label{eq:total}
        \prfperiod{
            \true
        }{
            (\inrel\ela\relA\elb )\,\boolor\, (\inrel\elb\relA\ela)
        }
    \end{equation}
\end{ctdefinition}

\begin{example}
    The relation ``less than or equal'' on~\natnumbers is not \SY{symmetric}.
    It is \SY{reflexive} since~$n\leq n \ \forall n\setin \natnumbers$, and it is \SY{transitive} since~$l\leq m$ and~$m\leq n$ implies~$l\leq m$.
\end{example}

\begin{example}
    The relation depicted in \cref{fig:power_internodal} is \SY{reflexive} (each node is connected to itself).
\end{example}
\begin{marginfigure}
    \centering
    \includesag{030_ex_sym_rel}
    \caption{Example of \SY{symmetric} endorelation.}
    \label{fig:ex_sym_rel}
\end{marginfigure}
\begin{example}
    The \SY{endorelation} depicted in \cref{fig:ex_sym_rel} is a \SY{symmetric} relation on~$\setA=\makeset{\sbretzel,\sfondue}$.
\end{example}

\begin{quiz}[\exname{ReflexiveOrNot}]
Which of the following endorelations is reflexive?
\begin{enumerate}[label=(\alph*)]
\item $R=\{(x,y)\in\mathbb{R}\times\mathbb{R}\vert x\neq y\}$ on $\mathbb{R}$.
\item $$R=\{(x,y)\in\mathbb{R}\times\mathbb{R}\vert y=x^{2}\}$$ on $\mathbb{R}$.
\item $R=\{(U,V)\in\mathcal{P}(\mathbb{N})\times\mathcal{P}(\mathbb{N})\vert U\subseteq V\}$ on the set of subsets $\mathcal{P}(\mathbb{N})$ of the natural numbers $\mathbb{N}$.
\item The endorelation $R$ on the employees of a company given by: $aRb$ for employees of $a$ and $b$ if and only if $a$ is supervisor of $b$.
\end{enumerate}
\end{quiz}

\begin{quiz}[\exname{SymmetricOrNot}]
Which of the following endorelations is symmetric?
\begin{enumerate}[label=(\alph*)]
\item $R=\{(m,n)\in\mathbb{N}\times\mathbb{N}\vert m\text{ divides }n\}$ on the natural numbers $\mathbb{N}$.
\item The relation $R$ on the set of words of the German language defined by: $aRb$ for words $a$ and $b$ if and only if $a$ is the plural of $b$.
\item $R=\{(m,n)\in\mathbb{N}\times\mathbb{N} m \text{ and } n \text{ are odd}\vert\}$ on the natural numbers $\mathbb{N}$.
\item The relation $R$ on the set of words of the English language defined by: $aRb$ for words $a$ and $b$ if and only if $a$ sounds like $b$. 
\end{enumerate}
\end{quiz}

\begin{ctdefinition}[Transitive]
    \label{def:transitive-relation}
    \SYNDEF{transitive relation}
    An endorelation~$\relA\colon \setA\mto \setA$ is \emph{transitive} if
    \begin{equation}\label{eq:transitive}
        \prfperiod{
            \inrel \ela \relA \elb
        }{
            \inrel \elb \relA \elc
        }{
            \inrel \ela \relA \elc
        }
    \end{equation}
\end{ctdefinition}

\begin{example}
    The relation ``has the same birthday as'' is \SY{transitive} because if Anna has the same birthday as Bob, and Bob has the same birthday as Clara, then Anna has the same birthday as Clara.
\end{example}


\subsection{Closures}

Sometimes an endorelation $\relA \subseteq \setA \cartprod \setA$ might not satisfy a property we desire it to have -- such as transitivity, for example -- but we may be able to find a ``best approximation'' to $\relA$ that \emph{does} have a desired property. In the case of transitivity, this ``best approximation'' is called the \emph{transitive closure} of the relation $\relA$. A similar definition also exists, for example, for the property of symmetry of endorelations. 

\begin{ctdefinition}[Transitive closure]
    \label{def:transitive-closure}
    Let \relA be an endorelation on a set~\setA, and consider the set
    \begin{equation}
\makeset{ \relB \subseteq \setA \cartprod \setA \mid \relA \subseteq \relB \text{ and } \relB \text{ is transitive } } 
\end{equation}
of transitive relations on $\setA$ containing $\relA$. (Note that it is non-empty, because the relation $\relB = \setA \cartprod \setA$ contains $\relA$ and is transitive.) The \maindef{transitive closure} $\traclos{\relA}$ of $\relA$ is
\begin{equation}
\traclos{\relA} = \bigsetintersection \makeset{ \relB \subseteq \setA \cartprod \setA \mid \relA \subseteq \relB \text{ and } \relB \text{ is transitive } }. 
\end{equation}
\end{ctdefinition}

\begin{remark}
It is straightforward to check that the intersection of any number of transitive relations on a set $\setA$ is again a transitive relation; in particular therefore $\traclos{\relA}$ is transitive. This is at the core of why the above definition is useful. An analogous definition using inclusion in place of containment would not work well, because in general the union of transitive relations is not necessarily again transitive. 
\end{remark}

\begin{remark}
The transitive closure of an endorelation~\relA on a set~\setA is the unique relation $\traclos{\relA}$ on~\setA satisfying the following conditions:
    \begin{enumerate}
        \item $\relA \setsubseteq \traclos{\relA}$;
        \item $\traclos{\relA}$ is transitive;
        \item if $\relB$ is a relation on $\setA$ that satisfies the previous two points, then $\traclos{\relA} \setsubseteq \relB$.
    \end{enumerate}
We might translate these conditions as follows: the first one is saying that $\traclos{\relA}$ approximates $\relA$ (via containment); the second one states that $\traclos{\relA}$ has the property of interest to us here; the third one says that $\traclos{\relA}$ is the ``best'' approximation among such relations. 
\end{remark}

%\begin{example}
%    Consider a relation~$\relA$ on~$\setA=\{\sbretzel,\swine,\sfondue\}$ such that $\inrel \sbretzel \relA \swine$ and $\inrel \swine \relA \sfondue$.
%    The \SY{transitive} closure of~$\relA$ is~$\relA^+$, where~$\inrel \sbretzel \relA^+ \swine$, $\inrel \swine \relA^+ \sfondue$, and~$\inrel \sbretzel \relA^+ \sfondue$.
%\end{example}

\begin{example}
    \label{exa:party}
    Consider a relation~\relA on a set of people
    \begin{equation}
        \setA=\makesett{\text{Gioele}, \text{Andrea}, \text{Jonathan}, \text{Emilio}, \text{Raff}},
    \end{equation}
    which describes who invites which friend to a party:
    \begin{equation}
        \label{eq:transitive_clos_a}
        \middlesag{transitive_clos_a}
    \end{equation}

    In other words, Gioele invites Andrea and Emilio, Andrea invites Jonathan, and Emilio invites Raff.
    The \SY{transitive closure}~$\traclos{\relA}$ of~\relA describes all invitations resulting from \SY{transitivity}.
    \begin{equation}
        \label{eq:transitive_clos_b}
        \middlesag{transitive_clos_b}
    \end{equation}
    In particular, Gioele invites Jonathan and Raff as well, due to the fact that Andrea invites Jonathan, and Emilio invites Raff.
\end{example}
\begin{quiz}[\exname{TransitiveOrNot}]
Which of the following endorelations is \textbf{not} transtive?
\begin{enumerate}[label=(\alph*)]
\item The relation $\perp$ on the set of lines in the Euclidean plane $\mathbb{R}^{2}$ give by: $L_{1}\perp L_{2}$ for lines $L_{1},L_{2}\subset\mathbb{R}^{2}$ if and only if $L_{1}$ is perpendicular to $L_{2}$.
\item The implication relation $\implies$ on logical statements.
\item $R=\{(x,y)\in\mathbb{R}\times\mathbb{R}\vert x\neq y\}$ on $\mathbb{R}$.
\item The relation $R$ on a genealogical tree given by $xRy$ if and only if $x$ is ancestor of $y$.
\end{enumerate}
\end{quiz}

\begin{quiz}[\exname{InternationalRelations}]
Let $X$ be the set of countries on earth and $R$ the relation $xRy$ if and only if $x$ and $y$ share a border for any two countries $x,y\in X$. Then $R$ is...(select the properties that apply)
\begin{enumerate}[label=(\alph*)]
\item injective.
\item single valued.
\item surjective.
\item everywhere defined.
\item reflexive.
\item symmetric.
\item transitive.
\item none of the above.
\end{enumerate}
\end{quiz}

% \devel{\includepdf[scale=0.8,pages={8},nup=1x3,frame,pagecommand={}]{ACT4E-06-posets.pdf} }% equivalence}
