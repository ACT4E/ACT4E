% !TEX root = chapter-standalone.tex

\section{Relations}
\label{sec:connection-relations}

\linkvideo{spring2021-relations:relations:rel-def} % Definition of relation
A basic mathematical notion which underlies the above discussion is that of a \textbf{binary relation}.

\begin{ctdefinition}[Binary relation]
    \label{def:binary-relation}
    A \emph{\iindex{binary relation}} from a set~$\setA$ to a set~$\setB$ is a subset of the Cartesian product~$\setA\cartprod \setB$.
\end{ctdefinition}

We will often drop the word ``binary'' and simply use the name ``relation''.

We also write
\begin{equation*}
    \relA \colon \setA \to \setB
\end{equation*}
to indicate a relation from~$\setA$ to~$\setB$.
($\setA$ is the source, and~$\setB$ is the target).

\begin{marginfigure}
    \centering
    \includesag{30_rel_1}
    \caption{}
    \label{fig:example_rel}
\end{marginfigure}

\begin{example}
    \label{exa:simple-rel}
    Let~$\setA = \{ \sbretzel, \sfondue, \schoco \}$ and~$\setB = \{ \stea, \smilk, \swater, \swine \}$.
    An example of a relation is the subset
    \begin{equation*}
        \relA = \{ \tup{\sbretzel, \stea}, \tup{\sfondue, \swater}, \tup{\sbretzel, \swine} \} \setsubseteq \setA \cartprod \setB.
    \end{equation*}
\end{example}

\showslides{
    \begin{forslides}
        \includesag{30_rel_identity}

        \begin{equation}
            \setA = \{ \sbretzel, \sfondue, \schoco \} \label{eq:slides-1}
        \end{equation}

        \begin{equation}
            \setB = \{ \stea, \smilk, \swater, \swine \} \label{eq:slides-2}
        \end{equation}

        \begin{equation}
            \setC = \{ \elc_1, \elc_2  \} \label{eq:slides-4}
        \end{equation}

        \begin{equation}
            \relA \setsubseteq \setA \cartprod \setB \label{eq:slides-5}
        \end{equation}

        \begin{equation}
            \relB \setsubseteq \setB \cartprod \setC \label{eq:slides-6}
        \end{equation}

        \begin{equation}
            \relA = \{ \tup{\sbretzel, \stea}, \tup{\sfondue, \swater}, \tup{\sbretzel, \swine} \} \setsubseteq \setA \cartprod \setB \label{eq:slides-7}
        \end{equation}
        %
        \begin{equation}
            \relB = \{ \tup{\sfondue, \elc_1}, \tup{\sfondue, \elc_2} \} \setsubseteq \setA \cartprod \setB \label{eq:slides-8}
        \end{equation}
        %
        \begin{equation}
            \relA \then \relB = \{ \tup{\sfondue, \elc_1}, \tup{\sfondue, \elc_2} \} \setsubseteq \setA \cartprod \setB \label{eq:slides-9}
        \end{equation}
        %
        \begin{center}
            $R =$ ``$\leq$'', on $\natnumbers $ \label{eq:slides-10}
        \end{center}

        \begin{center}
            $R =$ ``$\leq$'', on $\reals^2 $ \label{eq:slides-11}
        \end{center}

        \begin{center}
            $R =$ ``is married to'', on the set of british royals \label{eq:slides-11a}
        \end{center}

        \begin{equation}
            \setA = \setB = \reals^2 \label{eq:slides-12}
        \end{equation}

        \begin{center}
            $\relA =$ ``$\leq$''  \label{eq:slides-13}
        \end{center}

        \begin{equation}
            \tup{\sbretzel, \sfondue} \leq \tup{\stea, \smilk} \quad \Leftrightarrow \quad \sbretzel \leq \stea \text{ and } \sfondue \leq \smilk \label{eq:slides-14}
        \end{equation}

        \begin{equation}
            \ela \relA \elb \definedas \tup{\ela, \elb} \setin \relA  \label{eq:slides-15}
        \end{equation}
        %
        \begin{equation}
            \sbretzel \relA \stea \label{eq:slides-16}
        \end{equation}

        \begin{equation}
            \sfondue \relA \swater \label{eq:slides-17}
        \end{equation}

        \begin{equation}
            \sfondue \relA \swine \label{eq:slides-18}
        \end{equation}

        A relation $\relA \setsubseteq \setA \cartprod \setB$ is ``the same thing'' as a function $\phi : \setA \cartprod \setB \sto \{\true, \false\}$.

        A relation $\relA \setsubseteq \setA \cartprod \setB$ is ``the same thing'' as a function $h : \setA  \sto \powerset (\setB)$.

        \begin{equation}
            f : X \to Y
        \end{equation}

        \begin{equation}
            R_f \definedas \{ \tup{x, y} \setin X \cartprod Y \mid y = f(x) \}
        \end{equation}

    \end{forslides}
}

If~$\setA$ and~$\setB$ are finite sets, we can depict a relation~$\relA \colon \setA \to \setB$ graphically as in \cref{fig:example_rel}.
For each element~$\tup{\ela,\elb} \setin \setA \cartprod \setB$, we draw an arrow from~$\ela$ to~$\elb$ if and only if~$\tup{\ela,\elb} \setin \relA$.

\begin{marginfigure}
    \centering
    \includesag{30_rel_graph}
    \caption{Relations visualized in ``coordinate systems''.}
    \label{fig:example_rel_coord}
\end{marginfigure}

We can also depict this relation graphically as a subset of~$\setA \cartprod \setB$ in a ``coordinate system way'', as in \cref{fig:example_rel_coord}.

The shaded area is the subset~$\relA$ defining the relation.

\begin{remark}[Notation for relations]
    From now on, instead of explicitly writing~$\tup{\ela,\elb}\setin \relA$, we adopt the notation~$\inrel \ela \relA \elb$:
    \begin{equation*}
        \inrel \ela \relA \elb \ \definedas\  \tup{\ela,\elb}\setin \relA.
    \end{equation*}
\end{remark}

\begin{exercise}
    Do there exist relations whose source is the empty set~$\emptyset$?
\end{exercise}
\begin{solution}
    Given any set~$\setB$, such a relation would be of the form~$\relA \setsubseteq \emptyset \cartprod \setB \definedas \emptyset$.
    This implies that~$\relA=\emptyset$.
    We now need to check whether~$\relA=\emptyset$ corresponds to a function~$\emptyset\to \setB$:
    \begin{itemize}
        \item For all~$\ela\setin \setA=\emptyset$, there exists a~$\elb \setin \setB$ such that $\inrel{\ela}{\relA}{\elb}$ (trivially satisfied).
        \item Clearly, given~$\inrel{\ela}{\relA}{\elb},~\inrel{\ela'}{\relA}{\elb'}$ when~$\relA=\emptyset$, having~$\ela=\ela'$ implies~$\elb=\elb'$.
    \end{itemize}
    Therefore, the answer to the original question is yes.
\end{solution}

\begin{exercise}
    Do there exist relations whose target is the empty set~$\emptyset$?
\end{exercise}
\begin{solution}
    Again, given any set~$\setA$, such a relation would be of the form~$\relA \setsubseteq \setA \cartprod \emptyset\definedas \emptyset$.
    This, again, implies~$\relA=\emptyset$.
    We now need to check whether~$\relA=\emptyset$ corresponds to a function~$\setA \to \emptyset$:
    \begin{itemize}
        \item For all~$\ela\setin \setA$, there exists a~$\elb\setin \Objb=\emptyset$ such that~$\inrel{\ela}{\relA}{\elb}$?
              Unless~$\setA=\emptyset$, this is not satisfied.
    \end{itemize}
    Therefore, given~$\setA \neq \emptyset$, there is no function (or relation)~$\setA \to \emptyset$.
\end{solution}

\vfill
\begin{gradedexercise}[\exname{VisualizeLeqRelation}]
    \label{ex:visualize-leq-relation}
    Let~$\setA = \setB = \{1, 2, 3, 4 \}$ and consider the relation~$\relA \setsubseteq \setA \cartprod \setB$ defined by
    \begin{equation*}
        \relA = \{ \tup{\ela,\elb} \setin \setA \cartprod \setB \mid \ela \leq \elb \}.
    \end{equation*}
    %
    Visualize the relation~$\relA$ via the method in \cref{fig:example_rel} and \cref{fig:example_rel_coord} each.
\end{gradedexercise}

\solutionof{VisualizeLeqRelation}
