% !TEX root = chapter-standalone.tex

\section{Equivalence relations}
\linkvideo{spring2021-relations:relations:equivalence-rel} % Equivalence relations

\begin{ctdefinition}[Equivalence relation]
    \label{def:equivalence-relation}
    An endorelation~$\relA\colon \setA\mto \setA$ is an \maindef{equivalence relation} if it is \SY{symmetric}, \SY{reflexive}, and \SY{transitive}.
    If $\relA$ is an equivalence relation, we sometimes write~$\ela\sim \elb$ instead of~$\inrel{\ela}{\relA}{\elb}$.
\end{ctdefinition}

\begin{example}
    The relation ``equals'' on~\natnumbers  is an \SY{equivalence relation}.
    The relation ``less than or equal'' on~\natnumbers  is not.
\end{example}

\begin{example}
    The relation on~\natnumbers  ``differing by a multiple of 3''
    \begin{equation}
        \prfdoubleperiod{
            \inrel{\ela}{\relA}{\elb}
        }{
            (\ela-\elb) \mod 3 = 0
        }
    \end{equation}
    is an \SY{equivalence relation}.
    Indeed, the relation is \SY{reflexive}, and \SY{symmetric}.
    Furthermore, if~$\ela$ differs by a multiple of 3 from~$\elb$ and~$\elb$ differs by a multiple of 3 from~$\elc$, then~$\ela$ differs by a multiple of 3 from~$\elc$ (transitivity).
\end{example}

\begin{example}
    The relation ``has the same birthday as'' on the set of all people is an \SY{equivalence relation}.
    It is \SY{symmetric}, because if Anna has the same birthday as Bob, then Bob has the same birthday as Anna.
    It is \SY{reflexive} because every person has the same birthday as themselves.
    % It is \SY{transitive} because if Anna has the same birthday as Bob, and Bob has the same birthday as Clara, then Anna has the same birthday as Clara.
\end{example}

\begin{example}
    Let~$\mapa\colon \setA \sto \setB$ be a function between sets.
    The following defines an \SY{equivalence relation} $\sim_f$:
    \todotext{We should use style of relations for the equivalence symbol.
        Macro!}
    \begin{equation}
        \prfdoubleperiod{
            \ela\sim_f \elb
        }{
            \mapa(\ela)=\mapa(\elb)
        }
    \end{equation}
\end{example}

\begin{ctdefinition}[Partition]
    \label{def:partition}
    A \maindef{partition} of a set~\setA is a collection~$\makeset{\setA_i}_{i\setin I}$ of subsets~$\setA_i\setsubseteq \setA$ such that
    \begin{enumerate}
        \item $\setA_i\setintersection \setA_j=\Emptyset \quad \forall i\neq j$;
        \item $\bigsetunion_{i\setin I}\setA_i=\setA$.
    \end{enumerate}
\end{ctdefinition}

\begin{remark}
    \SY{Equivalence relations} are a way to group together elements of a set which we think of as ``the same'' in some respect.
    There is a one-to-one correspondence between \SY{equivalence relations} on a set~\setA and partitions on~\setA.
\end{remark}

\begin{marginfigure}
    \centering
    \includesag{030_information_networks}
    \caption{
        \label{fig:info_network}
    }
\end{marginfigure}

\begin{example}
    An example of partitions can be shown through information networks.
    An exemplary network is depicted in \cref{fig:info_network}.
    Here, nodes represent data centers, and the arrows represent information flows.
    We say that data centers~$x$ and~$y$ are equivalent ($x\sim y$) if and only if there is a path from~$x$ to~$y$ and a path from~$y$ to~$x$.
    In \cref{fig:info_network}, we have that~$a\sim b$,~$e\sim d$, and also every center is equivalent with itself.
\end{example}

\vfill
\begin{gradedexercise}[\exname{CountingEquivalenceRelations}]
    \label{ex:CountingEquivalenceRelations}
    Let~$\setA = \makeset{ 1, 2, 3, 4 }$.
    How many different \SY{equivalence relations} are there on \setA?
    Explain how you found your answer.
\end{gradedexercise}

\solutionof{CountingEquivalenceRelations}
