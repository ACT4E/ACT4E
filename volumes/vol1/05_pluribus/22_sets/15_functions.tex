% !TEX root = chapter-standalone.tex


\section{Functions}
\label{sec:functions}


\linkvideo{spring2021-morphisms:functions-nomenclature}

\bigskip


One typical way of thinking about functions is in terms of ``input'' and ``output''.
Given a function~$\mapa$ from a set~$\setA$ to a set~$\setB$ (for which we write~$\mapa\colon \setA \to \setB$) we sometimes speak of ``plugging in'' an element~$\ela \in \setA$ into the function~$\mapa$, and then it will ``output'' an element~$\mapa(\ela) \in \setB$.

One reason for this kind of thinking is that sometimes functions describe things that are like a computational process or a machine:
for instance, we might give a software program an input, it might then perform as series of computations, and then output an answer, and all of this might described by a function.
Another reason for thinking of functions in terms of input and output is because humans often use functions -- \emph{as mathematical entities} -- in a deterministic ``machine'' kind of way.
Starting with some element~$\ela \in \setA$, we can sometimes use the function~$\mapa$ to \emph{calculate} or otherwise \emph{determine} what the ``output''~$\mapa(\ela) \in \setB$ is.
Functions are \emph{deterministic}, mathematically speaking, in the sense that for any input~$\ela$, there is exactly one output~$\mapa(\ela)$.

We will take the point of view that a function~$\mapa\colon \setA \to \setB$ defines a certain kind of \emph{relation} between the elements of~$\setA$ and~$\setB$.
Given an~$\ela \in \setA$, the function~$\mapa$ tells us that this~$\ela$ is related to a certain~$\elb \in B$, which we happen to call~$\mapa(\ela)$.
This point of view is fully compatible with thinking of functions as ``mathematically deterministic''.
However, it is strictly more general than interpreting functions as describing processes which are in any sense ``physically deterministic'' or where ``the input precedes the output'' in any temporal sense.

As an illustration, consider a large phone book (of personal mobile numbers), which is just a table of names and phone numbers.
Let~$\setA$ be the set of phone numbers in the book, and~$\setB$ the set of names.
There is a function~$\mapa\colon \setA \to \setB$ which, given any phone number in~$\setA$, will output the name of the person to whom that number is registered.
Normally, every number is assigned to a single name, so a name as an ``output'' of the function is completely determined (mathematically speaking) by the number one ``inputs''.
However, there is no ``physical determinism'' here: there is no non-mathematical process by which the name of the person was ``computed'' or ``causally determined'' by the phone number.
Rather, the function we described arises simply from a table of information.

Note also that if we were to try to define a function~$\setB \to \setA$ which takes a name as an input and outputs a phone number, then we would (in a very large phone book at least) run into a problem: there may be multiple persons with the same name, but different telephone numbers.
In other words, without introducing some further mechanism for choosing, we cannot define the intended function~$\setB \to \setA$ because for a given name there are multiple numbers to which it might correspond.
This is a situation where we lack ``mathematical determinism'', so to speak.\footnote{One thing we \emph{could} do in this situation is, for any given name, consider the \emph{set} of phone numbers to which that name is associated.
This would define a function~$\setB \to \powerset \setA$}

The pseudo-philosophical introduction above is intended to sensitize the reader to aspects of ``input/output'' thinking, and to motivate our definition of functions below.
The idea is that we can formally define a function~$\mapa\colon \setA \to \setB$ by the ordered pairs~$\tup{\ela, \elb} \in \setA \times \setB$ which are the elements of what might be called the ``graph'' of the function.
In other words, those ordered pairs of the form ``$\tup{\ela, \mapa(\ela)}$''.

\begin{definition}
    \label{def:function}
Let~$\setA$ and~$\setB$ be sets. A \emph{function}~$\mapa\colon \setA \to \setB$ is a subset
\begin{equation*}
\mapa \subseteq \setA \times \setB
\end{equation*}
with the property
\begin{equation}
    \label{eq:function-determinism}
\forall \ \ela \in \setA  \quad  \exists ! \ \elb \in \setB \colon \tup{\ela,\elb} \in \mapa.
\end{equation}
We say that~$\setA$ is the \emph{source} and~$\setB$ is the \emph{target} of~$\mapa$.
\end{definition}

The property \cref{eq:function-determinism} describes the ``mathematical determinism'' that functions are supposed to have:
for any~$\ela \in \setA$ there exists \emph{exactly one} element~$\elb \in \setB$ such that~$\tup{\ela, \elb} \in \mapa$.

Another important aspect of \cref{eq:function-determinism} is that it says \emph{for every}~$\ela \in \setA$ there exists a~$\elb \in \setB$ that is related to~$\ela$ by $\mapa$.
In other words, we do not allow functions to be ``partially defined''.
For example, the formula ``$\mapa(x) = \frac{1}{x}$'' could be used to define a function~$\reals \backslash \{ 0 \} \to \reals$ but it would \emph{not} be valid for defining a function~$\reals \to \reals$.
The ``domain'' of a function is ``baked in'' as its source set, and the source and target of a function are \emph{part of the definition} of the function. For example, the formula~$\mapa(x) = x^2$ defines \emph{different} functions, depending on whether we think of it as defining a function~$\reals \to \reals$,~$\reals \to \reals_{\geq 0}$,~or $[0,1] \to [0,1]$.

Although we take \cref{def:function} as our \emph{formal} definition of functions, we will continue to use the standard kinds of notation for functions, for example usually writing~$\elb = \mapa(\ela)$ and not~$\tup{\ela, \elb} \in \mapa$.
The formal definition above is useful to keep in the back of our minds though.
For instance, when thinking about situations involving the empty set.
Do there exist functions~$\emptyset \to \setB$ for any set~$\setB$? What about~$\setA \to \emptyset$?

Consulting \cref{def:function}, we can figure out, using \cref{eq:function-determinism}, that there are \emph{no} functions of the type~$\setA \to \emptyset$, and for any set~$\setB$, except for the case~$\setB = \emptyset$, there \emph{is} a function~$\emptyset \to \setB$ (and in fact only one such function).
For the case~$\setA \to \emptyset$, there is no such function because the part ``$\exists ! \ \elb \in \setB$'' of \cref{eq:function-determinism} cannot be satisfied, since here~$\setB = \emptyset$.
For the case~$\emptyset \to \setB$, with~$\setB \neq \emptyset$, we see that because of the condition ``$\forall \ \ela \in \setA ...$'', \cref{eq:function-determinism} is trivially satisfied since~$\setA = \emptyset$ here.
In this case,~$\mapa \subseteq \setA \times \setB$ corresponds to~$\emptyset \subseteq \emptyset \times \setB = \emptyset$.

It is worth remarking that functions can be specified in a variety of ways.
Sometime they are given using formulae, such as~$\mapa(x)=x^2$ (and specifying the source and target set).
Sometimes the are defined using a table, like in the in the phone book example above.
Other times a function might be characterized by equations or properties.
For example, the exponential function~$\exp \colon \reals \to \reals$ is known to be  characterized by the fact that it satisfies the differential equation~$\mapa'(x) = \mapa(x)$ and the initial condition~$\mapa(0) =1$.
Still other times one might be able to prove the existence (and perhaps also uniqueness) of some function satisfying some given properties, but one might not have any means to ``evaluate'' or ``calculate'' that function!

Even if we don't know a lot of the specifics of some functions, there is a lot we can still say about how functions between sets can behave \emph{in general}. In the following we review a number of basic observations and properties.

Let~$\mapa\colon \setA \to \setB$ be a function.
Recall that~$\mapa$ is said to be \emph{injective} if the condition
\begin{equation}\label{eq:injectivity-cond}
\forall \ \ela_1, \ela_2 \in \setA \colon \mapa(\ela_1) = \mapa(\ela_2)  \Rightarrow \ela_1 = \ela_2
\end{equation}
is satisfied.
And~$\mapa$ is called \emph{surjective} if the condition
\begin{equation}\label{eq:surjectivity-cond}
\forall \ \elb \in \setB \ \exists \ \ela \in \setA \colon \mapa(\ela) = \elb
\end{equation}
holds. A function which is both injective and surjective is called \emph{bijective}.

The \emph{image} of~$\mapa\colon \setA \to \setB$ is the set
\begin{equation}
\mapa(\setA) \coloneqq \{ \elb \in \setB \mid \exists \ela \in \setA \colon \mapa(\ela) = \elb \}.
\end{equation}
More generally, given a subset~$\subA \subseteq \setA$, its image under~$\mapa$ is
\begin{equation*}
\mapa(\subA) \coloneqq \{ \elb \in \setB \mid \exists \ela \in \subA \colon \mapa(\ela) = \elb \}.
\end{equation*}
Given a subset~$\subB \subseteq \setB$, its \emph{preimage} under~$\mapa$ is
\begin{equation*}
\mapa^{-1}(\subB) \coloneqq \{ \ela \in \setA \mid  \mapa(\ela) \in \subB \}.
\end{equation*}
An alternative way of phrasing injectivity of~$\mapa$ is to say that for every singleton subset~$\{ \elb \} \subseteq \setB$, its preimage under~$\mapa$ is either a singleton set or the empty set.
Surjectivity of~$\mapa$ is equivalent to saying that~$\mapa(\setA) = \setB$.

Importantly, functions can be \emph{composed} when the target set of one functions is the same as the source set of another. Given functions $\mapa: \setA \to \setB$ and $\mapb : \setB \to \setC$, we will denote their composition by
\begin{equation}\label{eq:composition-notation-functions}
\mapa \then \mapb \colon \setA \to \setB,
\end{equation}
which is different from the more traditional notation ``$\mapb \circ \mapa$''.
We speak \cref{eq:composition-notation-functions} as ``$\mapa$ then $\mapb$'', which aligns with the fact that, to evaluate the composition~$\mapa \then \mapb$ at an element~$\ela \in \setA$, we first apply~$\mapa$ to compute~$\mapa(\ela)$ and \emph{then} we apply~$\mapb$ to compute
\begin{equation*}
\mapb(\mapa(\ela))=(\mapa \then \mapb)(\ela).
\end{equation*}

For every set~$\setB$ there is a special function which ``does nothing''.
It is called the \emph{identity function} on~$\setB$, denoted~$\catid_\setB$, and is given by the formula
\begin{equation*}
\catid_\setB(\elb) = \elb \quad \forall \ \elb \in \setB.
\end{equation*}
Because such a function ``does nothing'', it behaves neutrally with respect to the composition of functions:
given~$\mapa \colon \setA \to \setB$ and~$\mapb \colon \setB \to \setC$, we have~$\mapa \then \catid_\setB = \mapa$ and~$\catid_\setB \then \mapb = \mapb$.

Identity functions are used, for example, to say when a function is \emph{invertible} or, synonymously, that it is an isomorphism.
Given~$\mapa \colon \setA \to \setB$, an inverse to~$\mapa$ is a function~$\mapb \colon \setB \to \setA$ such that
\begin{equation}\label{eq:isomorphism-equations}
\mapa \then \mapb = \catid_\setA \text{ and }  \mapb \then \mapa = \catid_\setB.
\end{equation}


\begin{exercise}
Show that an inverse to~$\mapa$ is necessarily unique (so we can speak of ``the'' inverse).
\end{exercise}
\begin{solution}
    \todotextjira{341}{Write solution to inverse-is-unique}
    \end{solution}
We note that if~$\mapb$ is the inverse to~$\mapa$, then also~$\mapa$ is the inverse of~$\mapb$.
In this case,~$\mapa$ (and~$\mapb$) is called invertible or called an isomorphism.

\begin{exercise}\label{ex:bijective-functions-are-isomorphisms}
Show that a function is an isomorphism if and only if it is bijective.
\end{exercise}
\begin{solution}
    \todotextjira{342}{Write solution to bijective=isomorphism}
    \end{solution}

The compositional characteristics of functions (and many other mathematical structures) will be a central theme in this book.
Many features that sets and functions exhibit will be broadly generalized.
A guiding philosophy for making or understanding such generalizations is to formulate properties of functions in a way that only uses their ``external compositional aspects'' and does not rely, in any essential way, on the fact that we are dealing with sets, which have elements and thus for which we can ``look inside them''.

The ``compositional aspects'' we are referring to here are about how functions and sets \emph{relate to one another} via composition.
This likely sounds vague at the moment.
To begin to illustrate what we mean, consider the the property that a function may or may not have of being bijective.
According to \cref{ex:bijective-functions-are-isomorphisms}, a function~$\mapa\colon \setA \to \setB$ is bijective if and only if it is an isomorphism.
The latter means, by definition, that there exists~$\mapb \colon \setB \to \setA$ such that~$\mapa \then \mapb = \catid_\setA$ and~$\mapb \then \mapa = \catid_\setB$.
The point is that the equations in the definition of ``isomorphism'' only make use of the operation of function composition, the notion of quality, and the existence of special identity functions.
There is no mention of elements of sets, as there is in the definitive of ``bijective''!

Let us given another example.
The notion of ``subset'' is traditionally defined, as we did above, by saying the at~$\setA \subseteq \setB$ if and only if~$\forall \ \ela \in \setA \colon \ela \in \setA \Rightarrow \ela \in \setB$.
There are, however, alternatives that do not refer to ``elements''!
To see one way, consider the set~$\stylesets{2} = \{ 0, 1\}$.
Any function~$\mapa \colon \setB \to \stylesets{2}$ defines a subset
\begin{equation*}
\setA_\mapa = \{ \elb \in \setB \mid \mapa(\elb) = 1 \} \subseteq \setB
\end{equation*}
Conversely, any subset~$\setA \subseteq \setB$ defines a function~$\mapa_\setA \colon \setB \to \stylesets{2}$ by setting
\begin{equation*}
\mapa_\setA(\elb) = 1 \text{ if } \elb \in \setA; \mapa_\setA(\elb) = 0 \text{ else}.
\end{equation*}
It can be checked that this sets up a 1-to-1 correspondence between functions~$\setB \to \stylesets{2}$ and subsets of~$\setB$.
So, instead of using a definition of subset that involves elements of sets, we can work with functions~$\setB \to \stylesets{2}$.

Even the notion of ``element of a set" can itself be ``externalized''.
Let~$\stylesets{1}$ denote the set~$\{ * \}$ which has a single element, namely the symbol ``$*$'' (we could just as well have chosen anything else).
Observe that functions~$\stylesets{1} \to \setA$ are in 1-to-1 correspondence with the elements of~$\setA$.
Indeed, a function~$\mapa\colon \stylesets{1} \to \setA$ will have to map ``$*$'' to some element~$\mapa(*) \in \setA$, and since~$\stylesets{1}$ has no other elements, that is all that~$\mapa$ does!
So~$\mapa$ ``picks out'' an element of a~$\setA$.
We can work with functions~$\stylesets{1} \to \setA$ in place of elements of~$\setA$.

Suppose now that we have a function~$\mapb \colon \setA \to \setB$.
Given an element~$\ela \in \setA$, this will be mapped by~$\mapb$ to an element~$\mapb(\ela) \in \setB$.
If we use, instead of~$\ela \in \setA$, the function~$\mapa \colon \stylesets{1} \to \setA$ to which it corresponds, then the element~$\mapb(\ela) \in \setB$ corresponds to the function~$\mapa \then \mapb\colon \stylesets{1} \to \setA$!
In other words, we can talk about evaluation of a function~$\mapb \colon \setA \to \setB$ ``at an element of~$\setA$'' without actually using elements, but rather just using functions and function composition.



\todojira{5}{the set of functions from a given source to a given target}

\todojira{6}{families, index sets, generalized cartesian product}


\todojira{7}{make closing remark or footnote that this isn't the only way to define functions}

\clearpage
