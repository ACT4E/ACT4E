% !TEX root = chapter-standalone.tex

\section{Matrix groups}
\label{sec:matrix-grps}

%\linkvideo{spring2021-actions:matrix-groups} % Matrix groups

There are various \emph{matrix groups} (\cref{tab:matrix-groups}) that represent linear transformations having special properties.
In this section, all \SY{vector spaces} and matrices are over the real number field~\reals.

\begin{definition}
    [General linear group~$\mgGLn$]
    \label{def:general-linear-group}
    The (real) general linear group of order~$n$, written~$\mgGLn$, is the group of $\ntimesn$ invertible matrices with entries in \reals.
\end{definition}

\begin{definition}
    [Orthogonal group~$\mgOn$]
    \label{def:general-orthogonal-group}
    The (real) orthogonal group of order~$n$, written~$\mgOn$, is the group of~$\ntimesn$  real matrices that satisfy
    \begin{equation}
        \mat{M} \mat{M}\mattransp = \mat{M}\mattransp \mat{M} = \idmat.
    \end{equation}
\end{definition}

\begin{definition}
    [\textbf{Special} linear group~$\mgSLn$]
    \label{def:special-linear-group}
    The (real) special linear group of order~$n$, written~$\mgSLn$, is the group of~$\ntimesn$ invertible real matrices with determinant equal to~1.
\end{definition}
\begin{definition}
    [\textbf{Special} orthogonal group~$\mgSOn$]
    \label{def:special-orthogonal-group}
    The (real) special orthogonal group of order~$n$, written~$\mgSOn$, is the group of~$\ntimesn$ real matrices that satisfy
    \begin{equation}
        \mat{M} \mat{M}\mattransp = \mat{M}\mattransp \mat{M} = \idmat,
    \end{equation}
    and~$\deter(\mat{M}) = 1$.
\end{definition}

\begin{definition}
    [General Euclidean group~$\mgEn$]
    \label{def:general-euclidean-group}
    The general (real) Euclidean group of order~$n$, written~$\mgEn$, is the group of~$\matdim{(n+1)}{(n+1)}$ real matrices of the form
    \begin{equation}
        \label{eq:En-def}
        \Ematrix{\matmor{R}}{\vectmor{t}},
    \end{equation}
    where~$\matmor{R}\setin \mgOn$ and~$\vectmor{t} \setin \reals^n$.
\end{definition}

\begin{definition}
    [\textbf{Special}
        Euclidean group~$\mgSEn$]
    \label{def:special-euclidean-group}
    The special (real) Euclidean group of order~$n$, written~$\mgSEn$, is the group of~$(n+1)\times (n+1)$ real matrices of the form
    \begin{equation}
        \label{eq:SEn-def}
        \Ematrix{\matmor{R}}{\vectmor{t}},
    \end{equation}
    where~$\matmor{R}\setin \mgSOn$ and~$\vectmor{t} \setin \reals^n$.
\end{definition}

\begin{table*}
    \caption{Matrix groups}
    \label{tab:matrix-groups}
    \begin{tabular}{cllc}
        \mgGLn & General linear group     & arbitrary linear transformations \\
        \mgSLn & Special linear group     & invertible linear transformations \\ \\
        \mgOn  & Orthogonal group         & preserve length of vectors \\
        \mgSOn & Special orthogonal group & rotations \\ \\
        \mgEn  & Euclidean group          & preserve distances and angles     & \\
        \mgSEn & Special Euclidean group  & rigid motions \\
    \end{tabular}
\end{table*}

\todojira{610}{\bernina: There's lots of definitions but not much synthesis.
    Create picture with hierarchy of matrix \SY{groups}.
}

\subsection{Special Euclidean group}

The \SY{groups}~$\mgSEtwo$ and~$\mgSEthree$ are particular important in robotics because they represent the roto-translations of the plane and 3D space, respectively.

From~\cref{eq:En-def} we know we can represent one by a pair~$\tupp{\matmor{R}, \vectmor{t}}$, with~$\matmor{R}\setin\mgSOn$ and~$\vectmor{t} \setin \reals^n$.

If we look at how matrices compose, we get
%
\begin{equation}
    \label{eq:SE-composition}
    \Ematrix{\matmor{R}_2}{\vectmor{t}_2} \Ematrix{\matmor{R}_1}{\vectmor{t}_1} = \Ematrix{\matmor{R}_2 \matmor{R}_1}{\matmor{R}_2\vectmor{t}_1 + \vectmor{t}_2}.
\end{equation}
%
The formula for composition is
%
\begin{equation}
    \label{eq:SE-composition-short}
    \tupp{\matmor{R}_1, \vectmor{t}_1} \mtimesof{\mgSEn} \tupp{\matmor{R}_2, \vectmor{t}_2}  = \tupp{\matmor{R}_2 \matmor{R}_1, \matmor{R}_2 \vectmor{t}_1 + \vectmor{t}_2}.
\end{equation}
%

% %
% \begin{equation}
%   \tupp{\matmor{R}_1, \vectmor{t}_1} \mthenof{\mgSEn} \tupp{\matmor{R}_2, \vectmor{t}_2}  = \tupp{\matmor{R}_2 \matmor{R}_1, \matmor{R}_2 \vectmor{t}_1 + \vectmor{t}_2}
% \end{equation}
%
% Note that because we are using $\mthen$ (then), we do not have the nice symmetry
% that we had if we were using $\after$ (after).
% %
% %

The group~$\mgSEn$ induces a transformation on the points of~$\reals^n$.
We are going to call this an \emph{action}.

The action is the following function:
%
\begin{equation}
    \label{eq:apply}
    \defmapperiodset{\mgact}{
        \mgSEn \cartprod \reals^n
    }{
        \reals^n,
    }{
        \tupp{ \tupp{\matmor{R}, \vectmor{t}}, \vectob{p}}
    }{
        \matmor{R}\vectob{p} + \vectmor{t}
    }
\end{equation}
Given a roto-translation and a point, the function returns the roto-translated point.
%
We can also see this in matrix form as follows.
We need to substitute for a point~$\vectob{p} \setin \reals^n$ a homogenous point~$\Epoint{\vectob{p}} \setin \reals^{n+1}$.
%
\begin{equation}
    \label{eq:homogenous}
    \Ematrix{\matmor{R}}{\vectmor{t}}
    \Epoint{\vectob{p}}
    =
    \Epoint{\matmor{R}\vectob{p} + \vectmor{t}}.
\end{equation}
%

If we apply two rototranslations, first~$\monela=\tupp{\matmor{R}_{\monela}, \vectmor{t}_{\monela}}$ and then~$\monelb=\tupp{\matmor{R}_{\monelb}, \vectmor{t}_{\monelb}}$, we find:
%
\begin{equation}
    \label{eq:rototranslation-series}
    \begin{aligned}
        \mgact(\tupp{\matmor{R}_{\monelb}, \vectmor{t}_{\monelb}}, \mgact(\tupp{\matmor{R}_{\monela}, \vectmor{t}_{\monela}}, \vectob{p})) & =
        \mgact(\tupp{\matmor{R}_{\monelb}, \vectmor{t}_{\monelb}}, \matmor{R}_{\monela}\vectob{p} + \vectmor{t}_{\monela}) \\
                                                                                                                                           & = \matmor{R}_{\monelb}\matmor{R}_{\monela}\vectob{p} + \matmor{R}_{\monelb}\vectmor{t}_{\monela} + \vectmor{t}_{\monelb}.
    \end{aligned}
\end{equation}
%
\showslides{
    \begin{forslides}
        \begin{equation}
            \label{eq:composing-rot}
            \matmor{R}_{\monelb}\matmor{R}_{\monela}\vectob{p} + \matmor{R}_{\monelb}\vectmor{t}_{\monela} + \vectmor{t}_{\monelb}
        \end{equation}
        \begin{equation}
            \label{eq:roto-b}
            \monelb=\tupp{\matmor{R}_{\monelb}, \vectmor{t}_{\monelb}}
        \end{equation}
        \begin{equation}
            \label{eq:roto-a}
            \monela=\tupp{\matmor{R}_{\monela}, \vectmor{t}_{\monela}}
        \end{equation}
        \begin{equation}
            \label{eq:intermediate}
            \matmor{R}_{\monela}\vectob{p} + \vectmor{t}_{\monela}
        \end{equation}
        \begin{equation}
            \label{eq:point}
            \vectob{p}
        \end{equation}
        \begin{equation}
            \label{eq:apply-mora}
            \mgact(\monela, -)
        \end{equation}
        \begin{equation}
            \label{eq:apply-morb}
            \mgact(\monelb, -)
        \end{equation}
        %
        \begin{equation}
            \label{eq:apply-both}
            \mgact(\monela \mtimes\monelb, -)
        \end{equation}
        \begin{equation}
            \label{eq:only-SEn}
            \mgSEn
        \end{equation}
        \begin{equation}
            \label{eq:only-AutR3}
            \Autof \reals^3
        \end{equation}
        \begin{equation}
            \label{eq:only-apply}
            \mgact
        \end{equation}
        \begin{equation}
            \label{eq:apply-morphism}
            \mgact: \mgSEn \fto \Autof {\reals^3}
        \end{equation}
        \begin{equation}
            \label{eq:apply-end}
            \mgact: \mgSEn \fto \Endof {\reals^3}
        \end{equation}
        %
        \begin{equation}
            \label{eq:rototranslation-clean}
            \monela \mtimes \monelb = \tupp{\matmor{R}_{\monelb} \matmor{R}_{\monela}, \matmor{R}_{\monelb} \vectmor{t}_{\monela} + \vectmor{t}_{\monelb}}
        \end{equation}
    \end{forslides}
}

%
It is easy to see that it is equal to compose the two transformations in the inverse order
%
\begin{equation}
    \label{eq:rototranslation-series-2}
    \tupp{\matmor{R}_{\monela}, \vectmor{t}_{\monela}} \mtimesof{\mgSEn} \tupp{\matmor{R}_{\monelb}, \vectmor{t}_{\monelb}}  = \tupp{\matmor{R}_{\monelb} \matmor{R}_{\monela}, \matmor{R}_{\monelb} \vectmor{t}_{\monela} + \vectmor{t}_{\monelb}},
\end{equation}
%
and then apply it to the object
\begin{equation}
    \label{eq:rototranslation-series-3}
    \mgact(\tupp{\matmor{R}_{\monelb} \matmor{R}_{\monela}, \matmor{R}_{\monelb} \vectmor{t}_{\monela} + \vectmor{t}_{\monelb}}, \vectob{p})
    = \matmor{R}_{\monelb}\matmor{R}_{\monela}\vectob{p} + \matmor{R}_{\monelb}\vectmor{t}_{\monela} + \vectmor{t}_{\monelb}.
\end{equation}
%
Thus, we have proved this property
%
\begin{equation}
    \label{eq:rototranslation-action}
    \mgact(\monelb, \mgact(\monela, \vectob{p})) = \mgact(\monela \mtimes \monelb, \vectob{p})),
\end{equation}
which is graphically reported in \cref{fig:graphical-roto-action}.

\begin{figure}[h]
    \includesag{10_graph_roto_action}
    \caption{Graphical representation of roto-translation action.}
    \label{fig:graphical-roto-action}
\end{figure}
%
The notion of \SY{semigroup action} generalizes this property.
