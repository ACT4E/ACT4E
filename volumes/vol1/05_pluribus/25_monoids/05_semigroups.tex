% !TEX root = chapter-standalone.tex

\section{Semigroups}
\label{sec:semigroups}

A \emph{semigroup} is a magma for which composition is associative.

\linkvideo{spring2021-semi-mon-gro:mag-semi}
\begin{ctdefinition}[Semigroup]
    \label{def:semigroup}
    A \emph{\iindex{semigroup}}~$\sgrpA$ is:
    \begin{body}
        \constit
        \begin{enumerate}
            \item A set~$\sgrpAset$;
            \item A binary operation~$\mtimes  \colon \sgrpAset \cartprod \sgrpAset \sto \sgrpAset$ called \emph{composition}.
        \end{enumerate}
        \condit
        \begin{enumerate}
            \item Associative law
                  \begin{equation}
                      \label{eq:semigroup-associative}
                      (\sgrpela \mtimes   \sgrpelb)\mtimes   \sgrpelc
                      = \sgrpela \mtimes   (\sgrpelb \mtimes  \sgrpelc),
                  \end{equation}
                  for all~$\sgrpela , \sgrpelb, \sgrpelc \setin \sgrpAset$.
        \end{enumerate}
    \end{body}
\end{ctdefinition}

\begin{remark}
    Given a fixed set~$\sgrpAset$, there will in general be many choices of composition operation which make~$\sgrpAset$ into a semigroup.
    Therefore, technically, a semigroup $\sgrpA$ is a pair~$\tup{\sgrpAset, \mtimes}$ consisting of a set~$\sgrpAset$ and a choice of composition~$\mtimes$.
    The set~$\sgrpAset$ is the \emph{underlying set} of the semigroup.

    Often we will be slightly imprecise and refer to a semigroup simply by the name of its underlying set;
    this is practical when it is clear from context which multiplication operation we are considering, or when it is not necessary to refer to the multiplication explicitly.

    Also note that any semigroup is in particular a magma~$\sgrpA = \tup{\sgrpAset, \mtimes}$, and so it also has an `underlying magma'.
\end{remark}

\begin{definition}[Commutative semigroup]
    A semigroup~$\sgrpA = \tup{\sgrpAset, \mtimes}$ is called \emph{commutative} (or: Abelian) if its underlying magma is commutative.
\end{definition}

\subsection{Some examples}

\begin{example}
    \label{exa:natnum-semigroup}
    Consider the semigroup~$\tup{\natnumbers,+}$, which defines composition as
    \begin{equation}
        \label{eq:natnum-semigroup-definition}
        \monela \mtimes \monelb \definedas  \monela + \monelb.
    \end{equation}
    %
    This is a semigroup, since, for all~$l,m, n \setin \natnumbers$, we have
    \begin{equation}
        (l+m)
        +n = l+(m+n).
    \end{equation}
    %
    It is also a commutative semigroup because addition is commutative.
\end{example}

\begin{example}
    Pair-wise average on~$\reals$,
    \begin{equation}
        \label{eq:pairwise}
        \monela \mtimes \monelb \definedas  \frac{\monela + \monelb}{2},
    \end{equation}
    does not define semigroup composition, because it is not associative.

    For example:
    \begin{equation}
        \label{eq:pairwise-counterexample}
        (4 \mtimes 8) \mtimes 16 = 11\  \neq\   8 = 4 \mtimes (8 \mtimes 16).
    \end{equation}
\end{example}

\showslides{
    \begin{forslides}
        \begin{equation}
            \label{eq:natnum-product}
            \monela \mtimes \monelb \definedas  \monela \cdot \monelb
        \end{equation}
        \begin{equation}
            \label{eq:natnum-min}
            \monela \mtimes \monelb \definedas  \min(\monela, \monelb)
        \end{equation}
        \begin{equation}
            \label{eq:natnum-max}
            \monela \mtimes \monelb \definedas  \max(\monela, \monelb)
        \end{equation}
    \end{forslides}
}

\begin{margintable}
    \caption{Composition table for booleans.}
    \label{tab:comp-table-bool}
    \centering
    \begin{tabular}{c|cc}
        $\booland$ & $\false$ & $\true$ \\
        \hline
        $\false$   & $\false$ & $\false$ \\
        $\true$    & $\false$ & $\true$
    \end{tabular}
\end{margintable}

\begin{example}[Booleans]
    \label{exa:booleans-table}
    \label{ex:bool_semigroup}
    Consider the set~$\boolset=\makeset{\false, \true}$, and~$\tup{\boolset,\booland}$, where the operation~$\booland$ is defined via \cref{tab:comp-table-bool}.

    This forms a semigroup, given the associativity of~$\booland$.
\end{example}

\begin{gradedexercise}[\exname{CompositionTable}]
    \label{ex:CompositionTable}
    Consider the composition presented in \cref{tab:comp-table}.
    %    \begin{comment}
    %        \begin{center}
    %            \begin{tabular}{c|cc}
    %                $\mtimes$       & $\alphabetasymba$ & $\alphabetasymbb$ \\
    %                \hline
    %                \alphabetasymba & \alphabetasymba   & \alphabetasymba \\
    %                \alphabetasymbb & \alphabetasymbb   & \alphabetasymba
    %            \end{tabular}
    %        \end{center}
    %    \end{comment}
    Does this composition operation define a semigroup?
\end{gradedexercise}
\solutionof{CompositionTable}

\begin{exercise}[Cross-product]
    \label{ex:cross_prod}
    Consider~$\sgrpAset=\reals^3$ and the operation usually referred to as the ``cross-product'':
    \begin{equation}
        \begin{bmatrix}
            a \\ b\\ c
        \end{bmatrix}
        \mtimes
        \begin{bmatrix}
            x \\ y \\ z
        \end{bmatrix}
        \definedas
        \begin{bmatrix}
            bz-cy \\
            cx-az \\
            ay-bx
        \end{bmatrix}.
    \end{equation}
    This is a binary operation and therefore~$\tupp{\reals^3,\mtimes}$ forms a magma.
    Show that this does not form a semigroup.
\end{exercise}
%
\begin{solution}
    We show a counterexample.
    Clearly we have
    \begin{equation}
        \left(
        \begin{bmatrix}
            0 \\ 2\\ 1
        \end{bmatrix}\mtimes
        \begin{bmatrix}
            1 \\ 0 \\ 1
        \end{bmatrix}
        \right)
        \mtimes
        \begin{bmatrix}
            1 \\ 0 \\ 0
        \end{bmatrix}
        =
        \begin{bmatrix}
            0 \\-1\\-2
        \end{bmatrix}.
    \end{equation}
    However,
    \begin{equation}
        \begin{bmatrix}
            0 \\ 2\\ 1
        \end{bmatrix}\mtimes \left(\begin{bmatrix}
            1 \\ 0 \\ 1
        \end{bmatrix}\mtimes
        \begin{bmatrix}
            1 \\ 0 \\ 0
        \end{bmatrix}\right)
        =\begin{bmatrix}
            -2 \\0\\0
        \end{bmatrix},
    \end{equation}
    violating the associative law.
\end{solution}

\begin{example}
    \label{string-sgrp}
    \label{exa:string-semigroup}
    Consider a finite set~$\setA$, which we think of as an alphabet.
    For instance, consider
    %
    \begin{equation}
        \label{eq:string-semigroup-alphabet}
        \setA = \makeset{ \alphabeta, \alphabetb }.
    \end{equation}
    %
    Let~$\sgrpA = \listsof \setA$ be the set of non-empty lists of elements of~$\setA$.
    For example,
    %
    \begin{equation}
        \label{eq:string-semigroup-word}
        \makelist{\alphabeta , \alphabeta , \alphabetb , \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta}
    \end{equation}
    %
    is a non-empty list of elements of~$\setA$.

    We may define a multiplication operation on~$\sgrpA$ simply by concatenating lists.
    Given the lists
    \begin{equation}
        \makelist{\alphabeta, \alphabeta, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta} \text{ and } \makelist{\alphabetb, \alphabetb, \alphabeta, \alphabetb},
    \end{equation}
    their concatenation
    \begin{equation}
        \label{eq:string-semigroup-wordab}
        \makelist{\alphabeta, \alphabeta, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta} \mtimes  \makelist{\alphabetb, \alphabetb, \alphabeta, \alphabetb}
    \end{equation}
    is the list
    \begin{equation}
        \label{eq:string-semigroup-wordab-concat}
        \makelist{\alphabeta, \alphabeta, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabeta, \alphabetb}.
    \end{equation}
    It is readily seen that concatenation satisfies the associative law, so~$\sgrpA$, together with this multiplication, forms a semigroup.
    It is often called \emph{free semigroup} on the set $\setA$, a terminology which we will explain later.
\end{example}
\showslides{
    \begin{forslides}
        \begin{equation}
            \label{eq:string-semigroup-empty-string}
            \makelist{\alphabeta\alphabeta \alphabetb} \mtimes \makelist{} =  \makelist{\alphabeta\alphabeta \alphabetb}
        \end{equation}
        \begin{equation}
            \label{eq:setalphabet}
            \setA= \makeset{\alphabeta, \alphabetb}
        \end{equation}
        \begin{equation}
            \label{eq:string-semigroup-wordabab}
            \makelist{\alphabeta, \alphabeta, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta} \mtimes  \makelist{\alphabetb, \alphabetb, \alphabeta, \alphabetb}
        \end{equation}
        \begin{equation}
            \label{eq:string-semigroup-wordab-concatbis}
            \makelist{\alphabeta, \alphabeta, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabetb, \alphabeta, \alphabetb, \alphabetb, \alphabeta, \alphabetb}.
        \end{equation}
    \end{forslides}
}

\begin{gradedexercise}[\exname{VariationsOnConcatenation}]
    \label{ex:VariationsOnConcatenation}
    \label{ex:alphabet}
    Consider the set~$\sgrpA$ of finite non-empty lists of symbols from the alphabet~$\setA$, as in \cref{exa:string-semigroup}.

    Can you think of other candidates for multiplication operations on~$\sgrpA$, besides the straightforward concatenation of lists considered above?
    Do your candidates define semigroup multiplications---that is, do they obey the associative law?

    For example, one might consider the operation where, given an ordered pair of lists, one first doubles the last symbol of the first list and then concatenates.
    Is this operation associative?
    Justify your answers.
\end{gradedexercise}
\solutionof{VariationsOnConcatenation}

\begin{example}
    \label{max-semigroup}

    The function~$\max \colon \natnumbers \cartprod \natnumbers \sto \natnumbers$ defines a multiplication operation which equips~$\natnumbers$ with the structure of a semigroup.
    It is easy to show that it satisfies associativity.
    Given~$\sgrpela,\sgrpelb,\sgrpelc\setin \natnumbers$, we have:

    \begin{equation}
        \label{eq:max-assoc}
        \max(\max(\sgrpela,\sgrpelb),\sgrpelc)
        =
        \max(\sgrpela,\max(\sgrpelb,\sgrpelc)).
    \end{equation}
\end{example}

\begin{exercise}
    \label{ex:max-semigroup}
    Verify the statement made in \cref{max-semigroup}; that is, check that the associative law holds.

    Does~$\min \colon \natnumbers \cartprod \natnumbers \sto \natnumbers$ also define a semigroup structure on~$\natnumbers$?
\end{exercise}
\begin{solution}
    Given~$\sgrpela,\sgrpelb,\sgrpelc\setin \natnumbers$, we have:
    \begin{equation}
        \label{eq:min-assoc}
        \min(\min(\sgrpela,\sgrpelb),\sgrpelc)=\min(\sgrpela,\min(\sgrpelb,\sgrpelc)).
    \end{equation}
\end{solution}

\begin{marginfigure}
    \centering
    \includesag{05_plants}
    \caption{Graphical representation of plant transitions.}
    \label{fig:plants_transitions}
\end{marginfigure}

\begin{example}
    \label{exa:plant-trafo-semigroup}
    \todographicsjira{9}{@Gioele: POST-ALPHUBEL: work on original icons}
    Consider the set~$\setA = \makeset{ \sprout, \yng, \mature, \old, \dead }$ which describes five possible states of a plant.
    Let~$\mapa \colon \setA \sto \setA$ be the function that describes ``development'' (\cref{fig:plants_transitions}):
    \begin{align*}
        \mapa(\sprout) & =  \yng, \\
        \mapa(\yng)    & =  \mature, \\
        \mapa(\mature) & =  \old, \\
        \mapa( \old)   & = \dead, \\
        \mapa (\dead)  & = \dead.
    \end{align*}
    % \begin{marginfigure}
    %     \includesag{05_plants}
    %     \caption{Graphical representation of plant transitions.}
    %     \label{fig:plants_transitions}
    % \end{marginfigure}
    In other words, we think of~$\mapa$ as the change of state of the plant during a given time interval (say, three months).
    Composing the function~$\mapa$ with itself corresponds to considering multiples of the given time interval.
    For example, the function
    \begin{equation}
        (\mapa \mtimes \mapa \mtimes \mapa)
        \colon \setA \sto \setA
    \end{equation}
    models the change over the course of nine months.
    In general, for the n-fold composition of~$\mapa$ with itself we write~$\mapa^n$.
    The set~$\sgrpA = \makeset{ \mapa^n \mid n \setin \natnumbers }$, together with the multiplication given by the composition operation, forms a semigroup.
\end{example}
%
% \begin{example}
%     \label{exa:plant-trafo-semigroup}
%     \todographicsjira{9}{@Gioele: work on original icons}
%     Consider the set~$\setA = \makeset{ \sprout, \yng, \mature, \old, \dead }$ which describes five possible states of a plant.
%     Let~$\mapa \colon \setA \sto \setA$ be the function that describes ``development'' (\cref{fig:plants_transitions}):
%     \begin{align*}
%         \mapa(\sprout) & =  \yng, \\
%         \mapa(\yng)    & =  \mature, \\
%         \mapa(\mature) & =  \old, \\
%         \mapa( \old)   & = \dead, \\
%         \mapa (\dead)  & = \dead.
%     \end{align*}
%     In other words, we think of~$\mapa$ as the change of state of the plant during a given time interval (say, three months).
%     Composing the function~$\mapa$ with itself corresponds to considering multiples of the given time interval.
%     For example, the function
%     \begin{equation}
%         \mapa \mtimes \mapa \mtimes \mapa \colon \setA \sto \setA
%     \end{equation}
%     models the change over the course of nine months.
%     In general, for the n-fold composition of~$\mapa$ with itself we write~$\mapa^n$.
%     The set~$\sgrpA = \makeset{ \mapa^n \mid n \setin \natnumbers }$, together with the multiplication given by the composition operation, forms a semigroup.
% \end{example}

\subsection{Subsemigroups}

\todotext{ Add some text and some examples to this subsection}

\begin{definition}
    Let~$\sgrpA = \tup{\sgrpAset, \mtimes}$ be a semigroup.
    A \emph{subsemigroup} of~$\sgrpA$ is:

    \constit

    \begin{enumerate}
        \item A subset~$\sgrpBset \setsubseteq \sgrpAset$.
    \end{enumerate}

    \condit

    \begin{enumerate}
        \item The set~$\sgrpBset$ is closed under the composition operation~$\mtimes$ from~$\sgrpA$:
              \begin{equation}
                  \prfperiod{
                      \sgrpela \setin \sgrpBset \quad \sgrpelb \setin \sgrpBset
                  }{
                      (\sgrpela \mtimes \sgrpelb) \setin \sgrpBset
                  }
              \end{equation}
    \end{enumerate}
\end{definition}
\todo{Add example of even numbers with addition}

\subsection{Induced~$n$-ary multiplication}
Given a semigroup~$\tup{\setA, \mtimes}$, for each integer~$n\geq1$, we can define an induced~$n$-ary multiplication operation
%
\begin{equation}
    \defmapperiodset{\mtimes^n}{\setA^n}{\setA}{\tup{\elna{1}, \elna{2}, \ldots, \elna{n}}}{ \elna{1} \mtimes \elna{2} \ldots \mtimes \elna{n}}.
\end{equation}

\todotextjira{10}{POST-ALPHUBEL @JL: insert something introducing a notion of ``simplifying'' or ``computing''?
    Insert exercise about computing/simplifying a multiplication using a multiplication table?
    Rewrite the above in function definition extended form; give a name.
}

Thanks to the associative law, this is well-defined — that is, we do not need to use parentheses.
We will say that an element~$\elna{} \setin \setA$ is an \emph{n-fold multiplication} if it is in the image of this~$n$-ary multiplication operation.
At times, we may not wish to specify the arity of the multiplication, in which case we just speak of a \emph{multiplication}.

\showslides{
    \begin{forslides}
        \begin{equation}
            \label{eq:sg-mora}
            \mora
        \end{equation}
        \begin{equation}
            \label{eq:sg-morb}
            \morb
        \end{equation}
        \begin{equation}
            \label{eq:sg-morab}
            \mora\then\morb
        \end{equation}
    \end{forslides}
}
