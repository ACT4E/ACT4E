% !TEX root = chapter-standalone.tex


\section{\statusdraft{Semigroups}}\label{sec:semigroups}


\begin{ctdefinition}[Semigroup]
  \label{def:semigroup}
  A \emph{\iindex{semigroup}} $\sgrpA$ is a set~$\sgrpAset$, together with a binary operation~
  \begin{equation}
    \mtimes  \colon \sgrpAset \cartprod \sgrpAset \sto \sgrpAset,
  \end{equation}
  called \emph{composition}, which satisfies the \emph{associative} law:
  \begin{equation}
    \label{eq:semigroup-associative}
    (\sgrpela \mtimes   \sgrpelb)\mtimes   \sgrpelc
    = \sgrpela \mtimes   (\sgrpelb \mtimes  \sgrpelc)
  \end{equation}
  for all~$\sgrpela , \sgrpelb, \sgrpelc \in \sgrpAset$.
\end{ctdefinition}


\begin{remark}
  Given a fixed set $\sgrpAset$, there will in general be many different choices of composition operation which make~$\sgrpAset$ into a semigroup.
  So, technically, a semigroup is a pair~$\tup{\sgrpAset, \mtimes}$ consisting of a set~$\sgrpAset$ and a choice of composition~$\mtimes A$.
  The set~$\sgrpAset$ is the \emph{underlying set} of the semigroup.
  Often we will be slightly imprecise and refer to a semigroup simply by the name of its underlying set; this is practical when it is clear from context which multiplication operation we are considering, or when it is not necessary to refer to the multiplication explicitly.
\end{remark}



\begin{example}
Pair-wise average on $\reals$,
\begin{equation}
    \label{eq:pairwise}
    \monela \mtimes \monelb \definedas  \frac{\monela + \monelb}{2},
\end{equation}
does not define semigroup composition, because it is not associative.

Counterexample:
\begin{equation}\label{eq:pairwise-counterexample}
(4 \mtimes 8) \mtimes 16 = 11 \neq  8 = 4 \mtimes (8 \mtimes 16)
\end{equation}
\end{example}



\begin{example}
  \label{exa:natnum-semigroup}
  Consider~$\tup{\natnumbers,+}$. Defined as

  \begin{equation}
    \label{eq:natnum-semigroup-definition}
    \monela \mtimes \monelb \definedas  \monela + \monelb
\end{equation}


  This is a semigroup, since, for all~$l,m, n \in \natnumbers$, we have
  \begin{equation*}
  (l+m)
    +n
    =l+(m+n).
  \end{equation*}

\end{example}

\begin{comment}

  \begin{equation}
    \label{eq:natnum-product}
    \monela \mtimes \monelb \definedas  \monela \cdot \monelb
\end{equation}
  \begin{equation}
    \label{eq:natnum-min}
    \monela \mtimes \monelb \definedas  \min(\monela, \monelb)
\end{equation}
  \begin{equation}
    \label{eq:natnum-max}
    \monela \mtimes \monelb \definedas  \max(\monela, \monelb)
\end{equation}
\end{comment}


\begin{example}
  \label{string-semigroup}
  Consider a finite set~$A$, which we think of as an alphabet. For instance, consider
  \begin{equation} \label{eq:string-semigroup-alphabet}
  A = \{ \alphabeta, \alphabetb \}.
  \end{equation}

  Let~$\sgrpA$ be the set of non-empty strings of elements of~$A$. For example,
  \begin{equation}  \label{eq:string-semigroup-word}
    \alphabeta\alphabeta \alphabetb \alphabeta \alphabetb \alphabetb \alphabetb \alphabeta
  \end{equation}
  is a non-empty string of elements of~$A$.

  We may define a multiplication operation on~$\sgrpA$ simply by concatenating strings. Given the strings
  \begin{equation*}
    \worda \text{ and } \wordb
  \end{equation*}
  their concatenation
  \begin{equation*}  \label{eq:string-semigroup-wordab}
    \worda \mtimes  \wordb
  \end{equation*}
  is the string
  \begin{equation*} \label{eq:string-semigroup-wordab-concat}
     \worda \wordb.
  \end{equation*}
  It is readily seen that concatenation satisfies the associative law, so~$\sgrpA$, together with this multiplication, forms a semigroup.
\end{example}
\begin{comment}
\begin{equation}  \label{eq:string-semigroup-empty-string}
    \alphabeta\alphabeta \alphabetb \mtimes \tup{} =  \alphabeta\alphabeta \alphabetb
  \end{equation}
%
%\begin{definition}
%take space \label{def:python-list}
%
%\begin{minted}{python}
%assert [1, 1, 2] + [] == [1, 1, 2]
%\end{minted}
%%
%\end{definition}
%\end{comment}

When the underlying set of a semigroup~$\tup{\sgrpA, \mtimes}$ is a finite set, one way to specify the multiplication~$\mtimes$ is simply by writing out what it does with each pair of elements of~$\sgrpA$.
Since~$\mtimes$ is a function of two variable, this can be conveniently displayed as a table, called a \emph{multiplication table}.

\todotext{JL: write out (and include graphic) of a simply multiplication table}

\begin{exercise}
  \label{ex:alphabet}
  Consider the set~$\sgrpA$ of finite non-empty strings of symbols from the alphabet~$A$, as in \cref{string-semigroup}. Can you think of other candidates for multiplication operations on~$\sgrpA$, besides the straightforward concatenation of strings considered above? Do your candidates define semigroup multiplications -- that is, do they obey the associative law?
  For example, one might consider the operation where, given an ordered pair of strings, one first doubles the last symbol of the first string, and then concatenates. Is this operation associative?
\end{exercise}
\begin{solution}
  \todotext{Write solution of \cref{ex:alphabet}.}
\end{solution}


\begin{example}
  \label{max-semigroup}
  The function~$\max \colon \natnumbers \times \natnumbers \sto \natnumbers$ defines a multiplication operation which equips~$\natnumbers$ with the structure of a semigroup.
\end{example}

\begin{exercise}
  \label{ex:max-semigroup}
  Verify the statement made in \cref{max-semigroup}; that is, check that the associative law holds.

  Does~$\min \colon \natnumbers \times \natnumbers \sto \natnumbers$ also define a semigroup structure on~$\natnumbers$?
\end{exercise}
\begin{solution}
  \todotext{Write solution of \cref{ex:max-semigroup}.}
\end{solution}


\begin{example}
  \label{plant-trafo-semigroup}
  Consider the set~$X = \{ \sprout, \yng, \mature, \old, \dead \}$ which describes five possible states of a plant. Let~$T \colon X \sto X$ be the function that describes ``development'':
  \begin{align*}
    T(\text{sprout}) &=  \yng \\
    T(\yng) &=  \mature \\
    T(\mature) &=  \old \\
    T( \old) &= \dead \\
    T (\dead) &= \dead
  \end{align*}
  In other words, we think of $T$ as the change of state of the plant during a given time interval (say, three months).
  Composing the function~$T$ with itself corresponds to considering multiples of the given time interval. For example, the function
  \begin{equation*}
    T \then T \then T \colon X \sto X
  \end{equation*}
  models the change over the course of nine months. In general, for the n-fold composition of $T$ with itself we write $T^n$.
  The set~$\sgrpA = \{ T^n \mid n \in \natnumbers \}$ is a semigroup, with the multiplication given by the composition operation.
\end{example}


  \label{ex:discrete-time-linear}
  \begin{definition}[Discrete-time linear systems]
    \label{def:dicrete-time-linear-system}
    A discrete-time linear time-invariant proper open system is defined by three matrices $A,B,C$.
    Together they give a recurrence of the type
    \begin{equation} \label{eq:discrete-time-dynamics}
      \begin{aligned}
        x_{k+1} &=& \mathbf{A} x_k & + \mathbf{B} u_k \\
        y_{k}   &=& \mathbf{C} x_k  \\
      \end{aligned}
    \end{equation}
    If $x$ has dimension $n\geq1$, $u$ dimension $m\geq1$ and $y$ dimension $p\geq1$, then
    $A$ has dimension $n \times n$, $B$ has dimension $n \times m$, $C$ has dimension
    $p \times n$.
  \end{definition}

\begin{example}
  Consider now discrete-time linear systems as above, where $m=p$ (but possibly different $n$): these are systems with
  input and output of the same size. Hence we can compose them in series.

  \todotext{Give formulas for composition in series}


  \todotext{Show that the composition is associative, and hence for a monoid}

\end{example}

\subsection{Induced $n$-ary multiplication}
Given a semigroup~$\tup{S, \mtimes}$, for each~$n \in \natnumbers$, we can define an induced n-ary multiplication operation
\begin{equation*}
  S^n \sto S, \ \tup{s_1, s_2, ..., s_n} \mapsto s_1 \mtimes s_2 \dots \mtimes s_n.
\end{equation*}

\todotext{Rewrite the above in function definition extended form; give a name.  }

Thanks to the associative law, this is well-defined -- that is, we do not need to set parentheses.
We will say that an element~$s \in S$ is an \emph{n-fold multiplication} if it is in the image of this n-ary multiplication operation.
At times we may not wish to specify the arity of the multiplication, in which case we just speak of a \emph{multiplication}.
