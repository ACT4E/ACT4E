% !TEX root = chapter-standalone.tex


\section{Rope Goldberg Machines}

The inventions of Professor Butts, transcribed by Rube Goldberg, are prodigious machines that provide practical ways to perform everyday tasks (\cref{fig:Rube3}). They also highlight the power of compositionality.

\begin{figure}[h]
  \includegraphics[width=\textwidth]{Rube3}
  \caption{\emph{Lifeâ€™s Little Jokes \#59,380}, Rube Goldberg}
  \label{fig:Rube3}
\end{figure}



We are going to assemble similar machines. We start by introducing some of the essential elements, reported in \cref{tab:basic_els}

\begin{table}[h]
\begin{center}
\begin{tabular}{ccc}
   \includegraphics[height=2cm]{rope}&
  \includegraphics[height=2cm]{elastic}&
  \includegraphics[height=2cm]{brick}\\
  rope&elastic&brick\\[+10pt]
  \includegraphics[height=2cm]{glass}&
  \includegraphics[height=2cm]{spring}&
  \includegraphics[height=2cm]{rubber}\\
  glass&spring&rubber
\end{tabular}
\end{center}
  \caption{Essential elements. \label{tab:basic_els}}
\end{table}

These different elements can be classified by their elasticity properties, and hence by the way in which they deform.
A good reference book for these concepts is Hibbeler~\cite{hibbeler2014mechanics}.
Given any material, it reacs to the application of specific forces. The force applied per unit area is referred to as \emph{stress}, and the stretching/compression produced as a response from the material is called \emph{strain}.
The strain~$\strain$ is usually written as the ratio of the difference in length along the direction of the stress~$\Delta L$, and the original length of the material~$L_0$:
\begin{equation*}
  \strain = \frac{\Delta L}{L_0}
\end{equation*}

When stress is applied, each material experiences a specific strain, which depends on the chemical bonds creating the material. Whether the material returns to its original shape when stress is removed, depends on the entity of deformation.
One usually differentiates between \emph{elastic} deformation (when removing the stress makes the material return to its original shape), and \emph{plastic} deformation (when the material deforms irreversibly): see \cref{fig:stress_strain}.
If one observes the stress vs. strain curve, the first region behaves linearly, meaning that the force required to deform an elastic material is directly proportional to its deformation.
This is commonly known as the Hooke's law, which is due to the physicist Robert Hooke:
\begin{equation*}
  \force=-\springconst \deformation,
\end{equation*}
where~$\force$ represents the force,~$\deformation$ the deformation of the material, and~$\springconst$ the so-called \emph{spring constant} (in \unit[]{[N/m]}).

\begin{figure}[h]
\begin{center}
\includegraphics[width=10cm]{strain_stress}
\end{center}
  \caption{Exemplary stress-strain diagram. \label{fig:stress_strain}}
\end{figure}

\begin{example}
  You are skiing in the beautiful Swiss alps. Your friend weighs \unit[100]{kg} and sits on a chairlift with spring constant \unit[4,000]{N/m}. The nominal extension of the chairlift is \unit[0.25]{m}. The weight of your friend will create an extension of the chairlift, which can be computed as:
  \begin{equation*}
  \begin{aligned}
    \deformation &=\frac{\force}{\springconst}\\
    &=\frac{mg}{\springconst}\\
    &\approx \unit[0.15]{m}.
  \end{aligned}
  \end{equation*}
  One can therefore compute the extension as~$L=L_0-\deformation=\unit[0.1]{m}$.
\end{example}

The ability of a material to being deformed elastically is described by the so-called Young's \emph{modulus}, name of which is due to the physicist Thomas Young. This modulus, usually named~$\youngmod$ is defined as
\begin{equation*}
  \youngmod=\frac{\text{stress}}{\text{strain}}.
\end{equation*}
Note that~$\youngmod$~is a constant if computed in the domain of validity of Hooke's law. In this domain, we can obtain the spring constant~$\springconst$ by using the formula:
\begin{equation*}
  \springconst=\youngmod \frac{A}{L_0},
\end{equation*}
where~$L_0$ is the nominal length of the material, and~$A$ is the area over which the force is applied.

It is interesting to see what happens when one combines multiple materials. The first two elastic material combinations which come to mind are \emph{series} and \emph{parallel}.
If you take two materials with the same spring constant~$\springconst$, you concatenate them, and you hang a weight at their lower end (\cref{fig:spring_series}), they will be equivalent to one single spring with double the length.
The effective spring constant of the combination must therefore be halved to~$\springconst/2$.
In case one puts the two materials in parallel (\cref{fig:spring_parallel}), the length remains the same, and the resulting spring constant doubles to~$2\springconst$.
In general, given any two springs with spring constants~$\springconst_1$ and~$\springconst_2$, one can put them in series and get a spring with equivalent spring constant~$\springconst_{\mathrm{s}}$, satisfying:
\begin{equation*}
  \frac{1}{\springconst_\mathrm{s}}=\frac{1}{\springconst_1}+\frac{1}{\springconst_2}.
\end{equation*}
One can also put them in parallel and get a spring with equivalent spring constant~$\springconst_\mathrm{p}$, satisfying:
\begin{equation*}
  \springconst_\mathrm{p}=\springconst_1+\springconst_2.
\end{equation*}

\begin{remark}
  This behavior is very typical in engineering. While the above represents a classic mechanical engineering example, we could define similar examples in electronics and thermodynamics. In electronics, capacitors in series behave as springs in series.
  In thermodynamics, thermal resistances in series behave like springs in series.
\end{remark}

\begin{figure}[h]
  \begin{center}
  \subfloat[c][Series \label{fig:spring_series}]{\includesag{30_spring_series}}\hspace{1cm}
  \subfloat[c][Parallel \label{fig:spring_parallel}]{\includesag{30_spring_parallel}}
\end{center}
  \caption{Series and parallel spring composition.}
\end{figure}

These formulas suggest that the property of being a spring are compositional. In the following exercise, we are going to highlight this by considering specific cases.

\begin{gradedexercise}
  Consider the components (and relative properties) listed in \cref{tab:spring_const}.
  In this exercise we will compute the behavior of a chain of these components.
  \begin{enumerate}
    \item Suppose you hang a rope, an elastic, and a brick as depicted in \cref{fig:hang}. Assume that all components remain in their elastic deformation domains.
    \begin{enumerate}[(a)]
    \item Compute the deformation of each component at equilibrium.
    \item Compute the deformation of each component at equilibrium, when you hang a \unit[1]{kg} weight at the end of the brick.
\end{enumerate}
    \item Assume now you are either pulling or pushing your chain horizontally, as depicted in \cref{fig:push} and \cref{fig:pull}.
    Define the set of materials~$\setA\definedas \{ \tup{l_0, \springconst_\mathrm{push},\springconst_\mathrm{pull}, c_\mathrm{max}, e_\mathrm{max}} \in \nonNegReals^5\}$.
Each material is characterized by a length at rest~$l_0$, spring constants for extension and compression~$\springconst_\mathrm{pull}, \springconst_\mathrm{push}$, maximum compression~$c_\mathrm{max}$, and maximum extension~$e_\mathrm{max}$.
    Define the composition operation and a neutral element for this monoid (based on the discussion about springs above), and show that they satisfy the properties of a monoid.
    \item It's now time to implement your discoveries. In this part of the exercise, you will implement the following interface:
     \classsource{RupeGoldbergSolver}{max_size=1}
    \begin{enumerate}
      \item The first function answers what would happen if you were to hang any chain on one end, and let it hang. Would it break? If not, what would be the extended length? .
      \item The second function answers what would happen if you were to let the chain rest horizontally, then fix one end to an \emph{immovable wall} and push to the other end. Would it break? If not, what would be the compressed length?
    If a component breaks, consider it destroyed and of length 0.
    \item The third function answers what would happen if you were to pull with a certain force (\cref{fig:pull}). Either you will break the chain, or there will be an equilibrium. What would be the length?
    \end{enumerate}
    \emph{Hint:} For simplicity, we say that the chain breaks if a component exceeds its maximum compression/elongation.
  \end{enumerate}
\end{gradedexercise}

\begin{table}
  \begin{center}
\begin{tabular}{lllll}
  Component & $\springconst_\mathrm{pull}$ (in \unit[]{[N/m]})&$\springconst_\mathrm{push}$ (in \unit[]{[N/m]})& Length (in \unit[]{[m]})&Mass (in \unit[]{[kg]})\\
  \toprule
  Rope & $5.6\cdot 10^2$&&0.2&0.1 \\
  Elastic & 17.0&0.2&&0.15 \\
  Brick & $20\cdot 10^7$&&0.2&2.0\\
  Glass & $7.0\cdot 10^7$&&0.2&0.5\\
  Spring & 5.0&0.2&&0.5\\
  Rubber & 45.0&0.2&&0.3
\end{tabular}
  \caption{Spring constants for different materials.}
   \label{tab:spring_const}
\end{center}
\end{table}

These are the classes that define the data.

\classsource{Component}{max_size=25}
%\classsource{Rope}{max_size=25}
%\classsource{Brick}{max_size=25}
%\classsource{Elastic}{max_size=25}


\begin{figure}
  \hfill
  \subfloat[\label{fig:hang}Hanging the chain]{
    \includegraphics[height=3.5cm]{hang}
  }
  \hfill
  \subfloat[\label{fig:push}Horizontal compression]{
  \includegraphics[height=1cm]{push}
  }
  \hfill
  \subfloat[\label{fig:pull}Horizontal extension]{
  \includegraphics[height=1cm]{pull}
  }
  \hfill
  \caption{Visualization of the three scenarios.}
\end{figure}


We will walk you through the theoretical part, but we will leave the implementation to you.

We should think \emph{compositionally}. We should first see what happens in the specific cases,
and see if the answer can be generalized in a way that the solution is compositional.