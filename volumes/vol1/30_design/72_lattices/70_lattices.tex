% !TEX root = chapter-standalone.tex

\section{Lattices}

\linkvideo{spring2021-tradeoffs:tradeoffs:orders:lattices} % Lattices

\begin{definition}[Lattice]
    \label{def:lattice}
    A \maindef{lattice} is a poset~$\posAdefinition$ with the additional property that, for any two-element subset~$\makeset{\posela, \poselb} \setsubseteq \posA$, both the \SY{join}~$\join \makeset{\posela, \poselb}$ and the \SY{meet}~$\meet \makeset{\posela, \poselb }$ exist.
    Usually these are written using infix notation as~$\posela \join \poselb$ and~$\posela \meet \poselb$, respectively.
\end{definition}

\begin{marginfigure}
    \centering
    \includesag{lattice_wood}
    \caption{\todographics{@Gioele: Add points $a, b, a\vee b, a\wedge b$}}
    \label{fig:lattice-wood}
\end{marginfigure}

\begin{definition}[Bounded lattices]
    \label{def:bounded-lattice}
    \SYNDEF{bounded lattice}
    If both a top and a bottom exist, we call the \SY{lattice} \emph{bounded}, and denote it
    by~$\posA = \tup{\posAset,\posAleq,\join,\meet,\posbot,\postop}$.
\end{definition}

\begin{example}
    In \cref{def:power-poset} we presented the \SY{poset} arising from the power set~$\powerset \setA$ of a set~\setA and ordered via subset inclusion.
    This is a \SY{lattice}, bounded by~\setA and by the empty set~$\Emptyset$.
    Note that this \SY{lattice} possesses two (dual) monoidal structures~$\tup{\powerset \setA,\setsubseteq,\Emptyset,{{\setunion}}}$ and~$\tup{\powerset \setA,\setsubseteq,\setA,{{\setintersection}}}$.
\end{example}

\begin{marginfigure}
    \centering
    \subfloat[A lattice]{
        \centering
        \includesag{40_dpcatfig_exlattice}}

    \subfloat[Not a lattice]{
        \centering
        \includesag{40_dpcatfig_exlattice_bis}
    }
    \caption{Examples of a \SY{lattice} and a non-lattice. }
    \label{fig:exlattice}
\end{marginfigure}

\begin{example}
    Consider the \SY{poset} \Bool, in which~$b_1 \posleqof\Bool b_2$ iff~$b_1 \Imp b_2$, that is, in addition to the operation
    \begin{equation}
        \Imp\colon\Bool\cartprod \Bool\mto\Bool,
    \end{equation}
    called \emph{implication}, there are also the familiar \emph{and} ($\booland$) and \emph{or} ($\boolor$) operations.
    Note that~$\booland$ and~$\boolor$ are commutative ($b\booland c = c\booland b$,~$b\boolor c = c\boolor b$ ), whereas~$\Imp$ is not.
    Furthermore,~$\booland$ and~$\boolor$ correspond to the \SY{meet} and the \SY{join}, respectively.

    \begin{margintable}
        \centering
        \begin{tabular}{cc|ccc}
            $a$      & $b$      & $a \posleq  b$ & $a \booland b$ & $a \boolor b$ \\ \hline
            $\true$  & $\true$  & $\true$        & $\true$        & $\true$ \\
            $\true$  & $\false$ & $\false$       & $\false$       & $\true$ \\
            $\false$ & $\true$  & $\true$        & $\false$       & $\true$ \\
            $\false$ & $\false$ & $\true$        & $\false$       & $\false$
        \end{tabular}
        \caption{Properties of the \Bool poset.
            Note that~$\posleq \equiv \Imp$.
        }
        \label{tab:boolposet}
    \end{margintable}
\end{example}

\begin{example}
    Consider the set~$\makeset{1,2,3,6}$ ordered by divisibility.
    For instance, since 2 divides 6, we have~$2\posleq 6$.
    This is a \SY{lattice}.
    However, the set~$\makeset{1,2,3}$ ordered by divisibility is not, since 2 and 3 lack a \SY{meet} (\cref{fig:exlattice}).
\end{example}

\begin{lemma}
    \label{lem:u_bounded_lat}
    $\Up \posA$ is a \SY{bounded lattice} (\cref{def:lattice}) with
    \begin{equation}
        \begin{aligned}
            \posleqof{\Up \posA} & \definedas \ \setsupseteq, \\
            \posbot_{\Up \posA}  & \definedas \posA, \\
            \postop_{\Up \posA}  & \definedas \Emptyset, \\
            \meetof{\Up \posA}   & \definedas \setintersection, \\
            \joinof{\Up \posA}   & \definedas \setunion.
        \end{aligned}
    \end{equation}
\end{lemma}
\begin{proof}
    Consider the poset~$\uppersets \posA=\tup{\setOfUppersets \posA,{{\posleqof{\Up \posA}}}}$ and~$\setA,\setB\setin \setOfUppersets \posA$.

    First, we need to show that~$\setA\setintersection \setB\setin \setOfUppersets \posA$. To this extent, we need to show that, for all $\setAel \setin \setA\setintersection \setB$ and for all $\setAel \posleqof{\posA} \setBel$, it holds $\setBel \setin \setA\setintersection \setB$.
    We have~$\setA \setin \setOfUppersets \posA$ and $\setB\setin \setOfUppersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setintersection \setB$, we have~$\setAel \setin \setA \booland \setAel \setin \setB$.
    It follows that~$\setBel \setin \setOfUppersets \posA$ and $\setBel \setin \setOfUppersets \posB$. Therefore, $\setBel \setin \setOfUppersets \posA \setintersection \setB$ and, thus, $\setA\setintersection \setB\setin \setOfUppersets \posA$. 
    Furthermore, we need to show that~$\setA\setintersection \setB$ is the least upper bound of~$\setA$ and~$\setB$.
    Let~$\setC\setin \setOfUppersets \posA$ such that~
\[
\setA\posleqof{\Up \posA} \setC \posleqof{\Up \posA} (\setA\setintersection \setB)
\iff
\setA\setsupseteq \setC\setsupseteq (\setA\setintersection \setB)
\]
and
\[
\setB \posleqof{\Up \posA} \setC \posleqof{\Up \posA} (\setA\setintersection \setB)
\iff
\setB\setsupseteq \setC\setsupseteq (\setA\setintersection \setB).
\]
    Using the fact that intersection preserves inclusions, we have
    \begin{equation*}
        \begin{aligned}
            &(\setA\setintersection \setB)
                                           \setsupseteq (\setC\setintersection \setC) \setsupseteq (\setA\setintersection \setB ) \\
            \iff& (\setA\setintersection \setB)  \setsupseteq \setC \setsupseteq (\setA\setintersection \setB ) \\
            \iff&\setC                          = (\setA\setintersection \setB).
        \end{aligned}
    \end{equation*}
    Therefore,~$\setA\setintersection \setB$ is the least upper bound of~$\setA$ and~$\setB$.

    Second, we need to show that~$\setA\setunion \setB\setin \setOfUppersets \posA$, meaning that for all $\setAel \setin \setA\setunion\setB$, $\setAel \posleqof{\posA} \setBel$ implies $\setBel \setin \setA\setunion\setB$.
    We have~$\setA \setin \setOfUppersets \posA$ and~$\setB \setin \setOfUppersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setunion \setB$, we have either~$\setAel\setin \setA$ or~$\setAel\setin \setB$.
    If~$\setAel\setin \setA$, then~$\setBel\setin \setOfUppersets \setA$.
    If~$\setAel\setin \setB$, then~$\setBel \setin \setOfUppersets \setB$. Either way, $\setBel \setin \setA\setunion\setB$ and, thus, $\setA \setunion \setB \setin \setOfUppersets\posA$.
    Furthermore, we need to show that~$\setA\setunion \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.
    Let~$\setC\setin \setOfUppersets \posA$ such that
\[
\setA\setunion \setB\posleqof{\Up \posA} \setC \posleqof{\Up \posA} \setA
\iff    
\setA\setunion \setB\setsupseteq \setC\setsupseteq \setA
\]
and
\[
\setA\setunion \setB\posleqof{\Up \posA} \setC \posleqof{\Up \posA} \setB
\iff    
\setA\setunion \setB\setsupseteq \setC\setsupseteq \setB.
\]
    Using the fact that union preserves inclusions, we have
    \begin{equation*}
        \begin{aligned}
            &(\setA\setunion \setB)
            \setunion (\setA\setunion \setB)  \setsupseteq (\setC \setunion \setC) \setsupseteq (\setA\setunion \setB) \\
            \iff&\setA\setunion \setB              \setsupseteq \setC\setsupseteq (\setA\setunion \setB ) \\
            \iff&\setC                             =(\setA\setunion \setB).
        \end{aligned}
    \end{equation*}
    Therefore,~$\setA\setunion \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.

    We have therefore proved that~$\uppersets \posA=\defineposet{\setOfUppersets \posA}{\posleqof{\posUA}}$ is a \SY{lattice}.
    To show that it is bounded, we notice that~$\Emptyset \setsubseteq \setC$ for any~$\setC\setin \setOfUppersets \posA$, meaning that~$\Emptyset$ is the top.
    Furthermore, we notice that~$\setC\setsubseteq \posA$ for any~$\setC\setin \setOfUppersets \posA$, meaning that~\posA is a bottom.
    Therefore, the \SY{lattice} is bounded.
\end{proof}

\begin{lemma}
    $\posLA$ is a \SY{bounded lattice} (\cref{def:lattice}) with:
    \begin{equation*}
        \begin{aligned}
            \posleqof{\posLA} & \definedas \ \setsubseteq, \\
            \posbot_{\posLA}  & \definedas \Emptyset, \\
            \postop_{\posLA}  & \definedas \posA, \\
            \meetof{\posLA}   & \definedas \setunion, \\
            \joinof{\posLA}   & \definedas \setintersection.
        \end{aligned}
    \end{equation*}
\end{lemma}
\begin{proof}
    Consider the poset~$\posLA=\tup{\setOfLowersets \posA, \posleqof{\posLA}}$ and~$\setA,\setB\setin \setOfLowersets \posA$.

    First, we need to show that~$\setA\setunion \setB\setin \setOfLowersets \posA$. That is, $\setBel \posleqof{\posA} \setAel$ implies $\setBel \setin \setA\setunion \setB$.
    We have~$\setA \setin \setOfLowersets \posA$ and~$\setB\setin \setOfLowersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setunion \setB$, either~$\setAel\setin \setA$ or~$\setAel\setin \setB$.
    If~$\setAel\setin \setA$, then~$\setBel\setin \setA$.
    If~$\setAel\setin \setB$, then~$\setBel\setin \setOfLowersets \posA$.
    It follows that~$\setBel\setin \setA\setunion \setB$ and, thus,  all~$\setA\setunion \setB\setOfLowersets \posA$.
    Furthermore, we need to show that~$\setA\setunion \setB$ is the least upper bound of~$\setA$ and~$\setB$.
    Consider~$\setC\setin \setOfLowersets \posA$ such that
\[
    \setA\posleqof{\posLA} \setC\posleqof{\posLA} \setA\setunion \setB
\iff
    \setA\setsubseteq \setC\setsubseteq \setA\setunion \setB
\]
and
\[
    \setB\posleqof{\posLA} \setC\posleqof{\posLA} \setA\setunion \setB
\iff
    \setB\setsubseteq \setC\setsubseteq \setA\setunion \setB.
\]
    Using the fact that union preserves inclusions, we have
    \begin{equation*}
        \begin{aligned}
            &(\setA\setunion \setB)
                                    \setsubseteq (\setC \setunion \setC) \setsubseteq (\setA \setunion \setB) \\
            \iff & (\setA\setunion \setB) \setsubseteq \setC \setsubseteq (\setA\setunion \setB) \\
            \iff & \setC                   = (\setA\setunion \setB).
        \end{aligned}
    \end{equation*}
    Therefore,~$\setA\setunion \setB$ is the least upper bound of~$\setA$ and~$\setB$.

    Second, we need to show that~$\setA \setintersection \setB\setin \setOfLowersets \posA$. That is, $\setBel \posleqof{\posA} \setAel$ implies $\setBel \setin \setA\setintersection \setB$.
    We have~$\setA \setin \setOfLowersets \posA$ and~$\setB\setin \setOfLowersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setintersection \setB$, we have~$\setAel \setin \setA\booland \setAel\setin \setB$. Since $\setA,\setB \setin \setOfLowersets\posA$, this implies $\setBel \setin \setA\booland \setBel\setin \setB$ and, thus, $\setBel \setin \setA\setintersection\setB$.
    Consider~$\setC\setin \setOfLowersets \posA$ such that
\[
    \setA\setintersection \setB\posleqof{\posLA} \setC\posleqof{\posLA} \setA
\iff
    \setA\setintersection \setB\setsubseteq \setC\setsubseteq \setA
\]
and
\[
    \setA\setintersection \setB\posleqof{\posLA} \setC\posleqof{\posLA} \setB
\iff
    \setA\setintersection \setB\setsubseteq \setC\setsubseteq \setB.
\]
    Using the fact that intersection preserves inclusions, we have
    \begin{equation}
        \begin{aligned}
            &(\setA\setintersection \setB)
            \setintersection (\setA\setintersection \setB)  \setsubseteq (\setC \setintersection \setC) \setsubseteq (\setA\setintersection \setB) \\
            \iff&\setA\setintersection \setB                    \setsubseteq \setC\setsubseteq (\setA\setintersection \setB) \\
            \iff&\setC                                           =(\setA\setintersection \setB).
        \end{aligned}
    \end{equation}
    Therefore,~$\setA\setintersection \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.

    We have therefore proved that~$\posLA=\tup{\setOfLowersets \posA, \posleqof{\posLA}}$ is a \SY{lattice}.
    To show that it is bounded, we notice that~$\Emptyset \setsubseteq \setC$ for any~$\setC\setin \setOfLowersets \posA$, meaning that~$\Emptyset$ is the bottom.
    Furthermore, we notice that~$\setC\setsubseteq \posA$ for any~$\setC\setin \setOfLowersets \posA$, meaning that~\posA is a top.
    Therefore, the \SY{lattice} is bounded.
\end{proof}

\vfill

\begin{gradedexercise}[\exname{UpperLowerBounds}]
    \label{ex:UpperLowerBounds}
    Let~$\setA = \makeset{\setAel, \setBel, \setCel, \setDel, \setEel }$.
    Give examples of the following situations using Hasse diagrams.
    In each case, provide a \SY{poset} structure on~\setA and a subset~$\setB \setsubseteq \setA$ such that:
    \begin{enumerate}
        \item \setB has a least upper bound;
        \item \setB has a greatest lower bound;
        \item \setB has no least upper bound;
        \item \setB has no greatest lower bound.
    \end{enumerate}
\end{gradedexercise}

\solutionof{UpperLowerBounds}
