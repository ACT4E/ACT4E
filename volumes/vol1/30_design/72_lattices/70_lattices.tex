% !TEX root = chapter-standalone.tex

\section{Lattices}

\linkvideo{spring2021-tradeoffs:tradeoffs:orders:lattices} % Lattices

\begin{definition}[Lattice]
    \label{def:lattice}
    A \emph{lattice} is a poset~$\posA=\tupp{\posAset,\posAleq}$ with the additional property that, for any two-element subset~$\makset{\ela, \elb} \setsubseteq \posA$, both the join~$\join \makeset{\ela, \elb}$ and the meet~$\meet \makeset{\ela, \elb }$ exist.
    Usually these are written using infix notation as~$\ela \join \elb$ and~$\ela \meet \elb$, respectively.
\end{definition}

\begin{marginfigure}
    \begin{center}
        \includesag{lattice_wood}
    \end{center}
    \caption{\todo{Add points?}}
\end{marginfigure}

\begin{remark}[Bounded lattices]
    \label{rem:bounded-lattices}
    If both a top and a bottom exist, we call the lattice \emph{bounded}, and denote it by~$\posA = \tup{\posAset,\ordleq,\join,\meet,\posbot,\postop}$.
\end{remark}

\begin{example}
    In \cref{def:power-poset} we presented the poset arising from the power set~$\powerset \setA$ of a set~$\setA$ and ordered via subset inclusion.
    This is a lattice, bounded by~$\setA$ and by the empty set~$\emptyset$.
    Note that this lattice possesses two (dual) monoidal structures~$\tup{\powerset \setA,\setsubseteq,\emptyset,\setunion}$ and~$\tup{\powerset \setA,\setsubseteq,\setA,\setintersection}$.
\end{example}

\begin{marginfigure}
    \centering
    \subfloat[A lattice]{
        \centering
        \includesag{40_dpcatfig_exlattice}}

    \subfloat[Not a lattice]{
        \centering
        \includesag{40_dpcatfig_exlattice_bis}
    }
    \caption{Examples of a lattice and a non-lattice. }
    \label{fig:exlattice}
\end{marginfigure}

\begin{example}
    Consider the poset over \Bool such that~$b_1 \posleqof\Bool b_2$ iff~$b_1 \Imp b_2$, that is, in addition to the operation
    \begin{equation*}
        \Imp\colon\Bool\cartprod \Bool\to\Bool,
    \end{equation*}
    called \emph{implication}, there are also the familiar \emph{and} ($\booland$) and \emph{or} ($\boolor$) operations.
    Note that~$\booland$ and~$\boolor$ are commutative ($b\booland c = c\booland b$,~$b\boolor c = c\boolor b$ ), whereas~$\Imp$ is not.
    Furthermore,~$\booland$ and~$\boolor$ correspond to the meet and the join, respectively.

    \begin{margintable}
        \centering
        \begin{tabular}{cc|ccc}
            $a$      & $b$      & $a \posleq  b$ & $a \booland b$ & $a \boolor b$ \\ \hline
            $\true$  & $\true$  & $\true$        & $\true$        & $\true$ \\
            $\true$  & $\false$ & $\false$       & $\false$       & $\true$ \\
            $\false$ & $\true$  & $\true$        & $\false$       & $\true$ \\
            $\false$ & $\false$ & $\true$        & $\false$       & $\false$
        \end{tabular}
        \caption{Properties of the \Bool poset.
            Note that~$\posleq \equiv \Imp$.
        }
        \label{tab:boolposet}
    \end{margintable}
\end{example}

\begin{example}
    Consider the set~$\{1,2,3,6\}$ ordered by divisibility.
    For instance, since 2 divides 6, we have~$2\posleq 6$.
    This is a lattice.
    However, the set~$\{1,2,3\}$ ordered by divisibility is not, since 2 and 3 lack a meet (\cref{fig:exlattice}).
\end{example}

\begin{lemma}
    \label{lem:u_bounded_lat}
    $\Up \posA$ is a bounded lattice (\cref{def:lattice}) with
    \begin{equation}
        \begin{aligned}
            \posleqof{\Up \posA} & \definedas \ \setsupseteq, \\
            \posbot_{\Up \posA}  & \definedas \posA, \\
            \postop_{\Up \posA}  & \definedas \emptyset, \\
            \meet_{\Up \posA}    & \definedas \setintersection, \\
            \join_{\Up \posA}    & \definedas \setunion.
        \end{aligned}
    \end{equation}
\end{lemma}
\begin{proof}
    Consider the poset~$\uppersets \posA=\tup{\setOfUppersets \posA,\setsupseteq}$ and~$\setA,\setB\setin \setOfUppersets \posA$.

    First, we need to show that~$\setA\setintersection \setB\setin \setOfUppersets \posA$.
    One has~$\setA \setsubseteq \setOfUppersets \posA$ and $\setB\setsubseteq \setOfUppersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setintersection \setB$, we have~$\setAel \setin \setA \booland \setAel \setin \setB$.
    It follows that~$\setAel \setin \setOfUppersets \posA$ for all~$\setAel \setin \setA\setintersection \setB$.
    Furthermore, we need to show that~$\setA\setintersection \setB$ is the least upper bound of~$\setA$ and~$\setB$.
    Assume this is not true, meaning that there exists a~$\setC\setin \setOfUppersets \posA$,~$\setC\neq (\setA\setintersection \setB)$, such that~$\setA\setsupseteq \setC\setsupseteq (\setA\setintersection \setB)$ and~$\setB\setsupseteq \setC\setsupseteq (\setA\setintersection \setB$).
        Using the fact that intersection preserves inclusions, one has
        \begin{equation}
            \begin{aligned}
                (\setA\setintersection \setB)
                                              & \setsupseteq (\setC\setintersection \setC) \setsupseteq (\setA\setintersection \setB ) \\
                (\setA\setintersection \setB) & \setsupseteq \setC \setsupseteq (\setA\setintersection \setB ) \\
                \setC                         & = (\setA\setintersection \setB),
            \end{aligned}
        \end{equation}
        which contradicts the assumption.
        Therefore,~$\setA\setintersection \setB$ is the least upper bound of~$\setA$ and~$\setB$.

        Second, we need to show that~$\setA\setunion \setB\setin \setOfUppersets \posA$.
        One has~$\setA\setsubseteq \setOfUppersets \posA$ and~$\setB \setsubseteq \setOfUppersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setunion \setB$, we have either~$\setAel\setin \setA$ or~$\setAel\setin \setB$.
        If~$\setAel\setin \setA$, then~$\setAel\setin \setOfUppersets \posA$.
        If~$\setAel\setin \setB$, then~$\setAel \setin \setOfUppersets \posA$.
        It follows that~$\setAel \setin \setOfUppersets \posA$ for all~$\setAel\setin \setA\setunion \setB$.
        Furthermore, we need to show that~$\setA\setunion \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.
        Assume this is not true, meaning that there exists a~$\setC\setin \setOfUppersets \posA$,~$\setC\neq \setA\setunion \setB$, such that~$\setA\setunion \setB\setsupseteq \setC\setsupseteq \setA$ and~$\setA\setunion \setB\setsupseteq \setC\setsupseteq \setB$.
        Using the fact that union preserves inclusions, one has
        \begin{equation}
            \begin{aligned}
                (\setA\setunion \setB)
                \setunion (\setA\setunion \setB) & \setsupseteq (\setC \setunion \setC) \setsupseteq (\setA\setunion \setB) \\
                \setA\setunion \setB             & \setsupseteq \setC\setsupseteq (\setA\setunion \setB ) \\
                \setC                            & =(\setA\setunion \setB),
            \end{aligned}
        \end{equation}
        which contradicts the assumption.
        Therefore,~$\setA\setunion \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.

        We have therefore proved that~$\uppersets \posA=\tup{\setOfUppersets \posA,\setsupseteq}$ is a lattice.
        To show that it is bounded, we notice that~$\emptyset \setsubseteq \setC$ for any~$\setC\setin \setOfUppersets \posA$, meaning that~$\emptyset$ is the top.
        Furthermore, we notice that~$\setC\setsubseteq \posA$ for any~$\setC\setin \setOfUppersets \posA$, meaning that~$\posA$ is a bottom.
    Therefore, the lattice is bounded.
\end{proof}

\begin{lemma}
    $\posLA$ is a bounded lattice (\cref{def:lattice}) with:
    \begin{equation}
        \begin{aligned}
            \posleqof{\posLA} & \definedas \ \setsubseteq, \\
            \posbot_{\posLA}  & \definedas \emptyset, \\
            \postop_{\posLA}  & \definedas \posA, \\
            \meet_{\posLA}    & \definedas \setunion, \\
            \join_{\posLA}    & \definedas \setintersection.
        \end{aligned}
    \end{equation}
\end{lemma}
\begin{proof}
    Consider the poset~$\posLA=\tup{\setOfLowersets \posA,\setsubseteq}$ and~$\setA,\setB\setin \setOfLowersets \posA$.

    First, we need to show that~$\setA\setunion \setB\setin \setOfLowersets \posA$.
    One has~$\setA \setsubseteq \setOfLowersets \posA$ and~$\setB\setsubseteq \setOfLowersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setunion \setB$, either~$\setAel\setin \setA$ or~$\setAel\setin \setB$.
    If~$\setAel\setin \setA$, then~$\setAel\setin \setOfLowersets \posA$.
    If~$\setAel\setin \setB$, then~$\setAel\setin \setOfLowersets \posA$.
    It follows that~$\setAel\setin \setOfLowersets \posA$ for all~$\setAel\setin \setA\setunion \setB$.
    Furthermore, we need to show that~$\setA\setunion \setB$ is the least upper bound of~$\setA$ and~$\setB$.
    Assume this is not true, meaning that there exists a~$\setC\setin \setOfLowersets \posA$,~$\setC\neq \setA\setunion \setB$, such that~$\setA\setsubseteq \setC\setsubseteq \setA\setunion \setB$ and~$\setB\setsubseteq \setC\setsubseteq \setA\setunion \setB$.
    Using the fact that union preserves inclusions, one has
    \begin{equation}
        \begin{aligned}
            (\setA\setunion \setB)
                                   & \setsubseteq (\setC\setunion \setC) \setsubseteq (\setA\setunion \setB) \\
            (\setA\setunion \setB) & \setsubseteq \setC \setsubseteq (\setA\setunion \setB) \\
            \setC                  & = (\setA\setunion \setB),
        \end{aligned}
    \end{equation}
    which contradicts the assumption.
    Therefore,~$\setA\setunion \setB$ is the least upper bound of~$\setA$ and~$\setB$.

    Second, we need to show that~$\setA \setintersection \setB\setin \setOfLowersets \posA$.
    One has~$\setA \setsubseteq \setOfLowersets \posA$ and~$\setB\setsubseteq \setOfLowersets \posA$, meaning that by definition, if~$\setAel\setin \setA\setintersection \setB$, we have~$\setAel \setin \setA\booland \setAel\setin \setB$ ($\setAel\setin \setOfLowersets \posA$, for all~$\setAel\setin \setA \setintersection \setB$).
    Assume this is not true, meaning there exists a~$\setC\setin \setOfLowersets \posA$,~$\setC\neq \setA\setintersection \setB$, such that~$\setA\setintersection \setB\setsubseteq \setC\setsubseteq \setA$ and~$\setA\setintersection \setB\setsubseteq \setC\setsubseteq \setB$.
    Using the fact that intersection preserves inclusions, one has
    \begin{equation}
        \begin{aligned}
            (\setA\setintersection \setB)
            \setintersection (\setA\setintersection \setB) & \setsubseteq (\setC \setintersection \setC) \setsubseteq (\setA\setintersection \setB) \\
            \setA\setintersection \setB                    & \setsubseteq \setC\setsubseteq (\setA\setintersection \setB) \\
            \setC                                          & =(\setA\setintersection \setB),
        \end{aligned}
    \end{equation}
    which contradicts the assumption.
    Therefore,~$\setA\setintersection \setB$ is the greatest lower bound of~$\setA$ and~$\setB$.

    We have therefore proved that~$\posLA=\tup{\setOfLowersets \posA,\setsubseteq}$ is a lattice.
    To show that it is bounded, we notice that~$\emptyset \setsubseteq \setC$ for any~$\setC\setin \setOfLowersets \posA$, meaning that~$\emptyset$ is the bottom.
    Furthermore, we notice that~$\setC\setsubseteq \posA$ for any~$\setC\setin \setOfLowersets \posA$, meaning that~$\posA$ is a top.
    Therefore, the lattice is bounded.
\end{proof}

\vfill

\begin{gradedexercise}[\exname{UpperLowerBounds}]
    \label{ex:UpperLowerBounds}
    Let~$\setA = \{\setAel, \setBel, \setCel, \setDel, \setEel \}$.
    Give examples of the following situations using Hasse diagrams.
    In each case, provide a poset structure on~$\setA$ and a subset~$\setB \setsubseteq \setA$ such that:
    \begin{enumerate}
        \item $\setB$ has a least upper bound;
        \item $\setB$ has a greatest lower bound;
        \item $\setB$ has no least upper bound;
        \item $\setB$ has no greatest lower bound.
    \end{enumerate}
\end{gradedexercise}

\solutionof{UpperLowerBounds}
