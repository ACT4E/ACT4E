% !TEX root = chapter-standalone.tex

\section{Union of Design Problems}
\todojira{388}{We need to discuss the positioning of this section.
    This has to be before ``interaction with composition''}
\linkvideo{spring2021-functorial-comp-b:solving-queries:or-and-and} % Join and Meet in DP

Let~$\adpa\colon \F{\posgenA}\profto \R{\posgenB}$ and~$\adpb\colon \F{\posgenA}\profto \R{\posgenB}$ be design problems.
We define the \emph{union}~$\adpa \join \adpb$ to be the design problem which is feasible whenever \emph{either}~$\adpa$ or~$\adpb$ is feasible.
This models~$\adpa$ and~$\adpb$ as interchangeable technologies: either one can replace the other.

\begin{definition}[Union of design problems]
    \label{def:union_dp}
    Given two design problems~$\adpa \colon \F{\posgenA} \profto \R{\posgenB}$ and~$\adpb\colon \F{\posgenA} \profto \R{\posgenB}$, their \emph{union}~$\adpa \join \adpb\colon \F{\posgenA} \profto \R{\posgenB}$ is defined by
    \begin{align}
        (\adpa \join \adpb)
        \colon \F{\posgenA}\op \cartprod \R{\posgenB} & \toinPos \Bool         \label{eq:union-dp-eq}                                        \\
        \tup{\FposgenAelop, \RposgenBel}              & \mapsto \adpa(\FposgenAelop, \RposgenBel) \boolor \adpb(\FposgenAelop, \RposgenBel).
    \end{align}
\end{definition}

The union of design problems is represented as in~\cref{fig:uniondp}.

\begin{figure}[h!]
    \centering
    \includesag{52_union}
    \caption{Diagrammatic representation of the union of design problems. }
    \label{fig:uniondp}
\end{figure}

\begin{example}
    Jeb's Spaceship Parts is locked in a deadly rivalry with Starshow Bob to supply engines for the new X103 space orbiter.
    Neither knows the exact operational scenario that the X103 will encounter, but have provided a range of performance benchmarks for their engines (\cref{fig:exunion_1}).
    \begin{figure}[h!]
        \centering
        \includesag{50_rival_jeb_bob}
        \caption{Example of two engine producers. }
        \label{fig:exunion_1}
    \end{figure}
    Back at NASA headquarters, Beau has uploaded Jeb and Bob's data in order to construct the design problem reported in~\cref{fig:exunion_2}.
    \begin{figure}[h!]
        \centering
        \includesag{50_rival_beau}
        \caption{Example of the union of the engine design problems. }
        \label{fig:exunion_2}
    \end{figure}
\end{example}

\section{Intersection of Design Problems}

Given two design problems~$\adpa, \adpb \colon \F{\posgenA} \profto \R{\posgenB}$, we can define a design problem~$\adpa \meet \adpb$ that is feasible if only if~$\adpa$ and~$\adpb$ are both feasible.
We call~$\adpa \meet \adpb$ the \emph{intersection} of~$\adpa$ and~$\adpb$.
One interpretation of~$\adpa \meet \adpb$ is that~$\adpa$ and~$\adpb$ are two slightly different models of the same process, and we want to make sure that the design is conservatively feasible for both models.

\begin{definition}[Intersection of design problems]
    \label{def:intersection_dp}
    \label{def:dp-intersection}
    Given design problems~$\adpa\colon \F{\posgenA} \profto \R{\posgenB}$ and~$\adpb\colon \F{\posgenA} \profto \R{\posgenB}$,
    their \emph{intersection} is denoted~$(\adpa \meet \adpb)\colon \F{\posgenA} \profto \R{\posgenB}$, defined by:
    \begin{equation}
        \begin{aligned}
            (\adpa \meet \adpb)
            \colon \F{\posgenA}\op \cartprod \R{\posgenB} & \toinPos \Bool                                                                         \\
            \tup{\FposgenAelop, \RposgenBel}              & \mapsto \adpa(\FposgenAelop, \RposgenBel) \booland  \adpb(\FposgenAelop, \RposgenBel).
        \end{aligned}
    \end{equation}
\end{definition}
The intersection of design problems is represented as in~\cref{fig:intersectiondp}.

\begin{figure}[h!]
    \centering
    \includesag{52_intersection}
    \caption{Diagrammatic representation of the intersection of design problems. }
    \label{fig:intersectiondp}
\end{figure}

We can directly generalize the intersection~$\adpa \meet \adpb$ by allowing~$\adpa$ and~$\adpb$ to have different domain and codomains,~$\adpa \colon \F{\posgenA} \profto \R{\posgenB}$ and~$\adpb \colon \F{\posgenC} \profto \R{\posgenD}$.
We call this putting two design problems ``in parallel''.
