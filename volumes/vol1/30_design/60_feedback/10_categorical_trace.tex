% !TEX root = chapter-standalone.tex


\section{Feedback in category theory}

\begin{ctdefinition}[Trace of an endomorphism]
Let $\tup{\CatC,\mtimesC,\idmoncat_{\CatC}, \braiding}$ be a symmetric monoidal category. Let $\Obja \in \ObC$ be dualizable and let $\mora \in \Hom(\Obja, \Obja)$. The \emph{trace} of $\mora$ is the morphism $\Tr(\mora) \in \Hom(\idmoncat, \idmoncat)$ defined by
\begin{equation}\label{eq:endomorphism-trace}
\idmoncat \overset{\coev_\Obja}{\mto} \Obja \mtimescat \Obja^\vee  \overset{\mora \mtimescat \id_{\Obja^\vee}}{\mto} \Obja \mtimescat \Obja^\vee  \overset{\braiding}{\mto}  \Obja^\vee \mtimescat \Obja \overset{\ev_\Obja}{\mto} \idmoncat.
\end{equation}
\end{ctdefinition}

\begin{ctdefinition}[Trace of a generalized endomorphism]
Let $\tup{\CatC,\mtimesC,\idmoncat_{\CatC}, \braiding}$ be a symmetric monoidal category. Let $\Obja \in \ObC$ be dualizable and let $\mora \in \Hom(\Objb \mtimescat \Obja, \Objc \mtimescat \Obja)$. The \emph{trace over} $\Obja$ of $\mora$ is the morphism $\Tr_{\Objb, \Objc}^\Obja (\mora) \in \Hom(\Objb, \Objc)$ defined by
\begin{equation}\label{eq:endomorphism-trace}
\Objb \overset{\id_\Objb \mtimescat \coev_\Obja}{\mto} \Objb \mtimescat \Obja \mtimescat \Obja^\vee   \overset{\mora \mtimescat \id_{\Obja^\vee}}{\mto} \Objc \mtimescat \Obja \mtimescat \Obja^\vee  \overset{\id_\Objc \mtimescat \braiding}{\mto}  \Objc \mtimescat \Obja^\vee \mtimescat \Obja \overset{\id_\Objc \mtimescat \ev_\Obja}{\mto} \Objc.
\end{equation}
\end{ctdefinition}

\devel{
\begin{forslides}

\begin{equation}\label{eq:slides-trace-1}
\idmoncat \overset{\coev_\Obja}{\mto} \Obja \mtimescat \Obja^\vee  \overset{\mora \mtimescat \id_{\Obja^\vee}}{\mto} \Obja \mtimescat \Obja^\vee  \overset{\braiding}{\mto}  \Obja^\vee \mtimescat \Obja \overset{\ev_\Obja}{\mto} \idmoncat.
\end{equation}

\begin{equation}\label{eq:slides-trace-2}
\Objb \overset{\id_\Objb \mtimescat \coev_\Obja}{\mto} \Objb \mtimescat \Obja \mtimescat \Obja^\vee   \overset{\mora \mtimescat \id_{\Obja^\vee}}{\mto} \Objc \mtimescat \Obja \mtimescat \Obja^\vee  \overset{\id_\Objc \mtimescat \braiding}{\mto}  \Objc \mtimescat \Obja^\vee \mtimescat \Obja \overset{\id_\Objc \mtimescat \ev_\Obja}{\mto} \Objc.
\end{equation}

\begin{equation}\label{eq:slides-trace-3}
\Tr(\mora) \in \Hom(\idmoncat, \idmoncat)
\end{equation}

\begin{equation}\label{eq:slides-trace-4}
\Tr_{\Objb, \Objc}^\Obja (\mora) \in \Hom(\Objb, \Objc)
\end{equation}

\begin{equation}\label{eq:slides-trace-5}
\tup{\CatC,\mtimesC,\idmoncat_{\CatC}, \braiding}
\end{equation}



\end{forslides}
}

\begin{ctdefinition}[Traced monoidal category]
  \label{def:traced-monoidal-category}
  A symmetric monoidal category $\tup{\CatC,\mtimesC,\idmoncat_{\CatC}, \braiding}$ is said to be \emph{traced} if it is equipped with a family of functions
  \begin{equation}
    \Tr_{A,B}^X\colon \CatC(A\otimes X, B\otimes X)\to \CatC(A,B),
  \end{equation}
  satisfying the following axioms:
  \begin{compactenum}
    \item \emph{Vanishing:} For all morphisms $f\colon A\to B$ in \CatC,
    \begin{equation}
      \label{eq:vanishing_1}
      \Tr_{A,B}^1(f)=f.
    \end{equation}
    Furthermore, for all morphisms $f\colon A\otimes X \otimes Y \to B\otimes X \otimes Y$ in \CatC:
    \begin{equation}
      \label{eq:vanishing_2}
      \Tr_{A,B}^{X\otimes Y}(f)=\Tr_{A,B}^X\left(
      \Tr_{A\otimes X,B\otimes X}^Y(f)\right).
    \end{equation}
    \item \emph{Superposing:} For all morphisms $f\colon A\otimes X\to B\otimes X$ in \CatC:
    \begin{equation}
      \label{eq:superposing}
      \Tr_{C\otimes A,C\otimes B}^{X}(\id_C\otimes f)=\id_C\otimes \Tr_{A,B}^X(f).
    \end{equation}
    \item \emph{Yanking:}
    \begin{equation}
      \label{eq:yanking}
      \Tr_{X,X}^X\left(\sigma_{X,X}\right)=\id_X.
    \end{equation}
  \end{compactenum}
\end{ctdefinition}
