\section{Lattice structure of \DP hom-sets}

Given the definitions of~$\meet$ and~$\join$ in the previous sections, we can prove that every \DP hom-sets have a lattice structure.

This lattice is bounded by a ``true'' and a ``false'' DP.
For any functionality-resource pair~$\F{\posgenA},\R{\posgenB}$, we denote by~$\postop_{\F{\posgenA},\R{\posgenB}}$ the design problem which is always feasible.
We denote by~$\posbot_{\F{\posgenA},\R{\posgenB}}$ the design problem which is never feasible, for any functionality-resource pair~$\F{\posgenA},\R{\posgenB}$.

\begin{lemma}
    \label{lem:dpboundedlattice}
    $\HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ is a bounded lattice with union~$\join$ as join, intersection~$\meet$ as meet, least upper bound~$\postop_{\F{\posgenA},\R{\posgenB}}$ and greatest lower bound~$\posbot_{\F{\posgenA},\R{\posgenB}}$.
\end{lemma}

\begin{proof}
    First, we need to prove that~$\HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ is a poset.
    To prove this, we check the following:
    \begin{itemize}
        \item \emph{Reflexivity}: Given~$\adpa\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$:
              \begin{equation}
                  \prfsemi{
                      \true
                  }{
                      \adpa\posDPleq \adpa
                  }
              \end{equation}
        \item \emph{Antisymmetry}: Given~$\adpa,\adpb\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$:
              \begin{equation}
                  \prfsemi{
                      \adpa\posDPleq \adpb
                  }{
                      \adpb\posDPleq \adpa
                  }{
                      \adpa=\adpb
                  }
              \end{equation}
        \item \emph{Transitivity}: Given~$\adpa,\adpb,\adpc\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$:
              \begin{equation}
                  \prfperiod{
                      \adpa\posDPleq \adpb
                  }{
                      \adpb\posDPleq \adpc
                  }{
                      \adpa \posDPleq \adpc
                  }
              \end{equation}
    \end{itemize}
    Therefore,~$\HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ is a poset.
    Furthermore, consider two design problems~$\adpa,\adpb\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$.
    Their greatest lower bound (meet) is~$\adpa\meet\adpb$, since it is the greatest design problem implying both~$\adpa$ and~$\adpb$.
    Their least upper bound (join), instead, is~$\adpa\join \adpb$, since it is the least design problem implied by both~$\adpa$ and~$\adpb$.
    This proves that~$\Hom_\DP$ is a lattice.
    To prove that it is bounded, we identify the top element as~$\postop_{\F{\posgenA},\R{\posgenB}}$ (it is implied by all other design problems) and the bottom element as~$\posbot_{\F{\posgenA},\R{\posgenB}}$ (it implies by all the other design problems).
\end{proof}

We show that a \DP hom-set is a \emph{complete lattice}.

\begin{definition}[Complete Lattice]
    \label{def:complete-lattice}
    A poset~$\posA=\tup{\posAset,\posleq}$ is a \emph{\iindex{complete lattice}} if every subset~\posB of~\posA has both a \emph{greatest lower bound} (often referred to as the \emph{infimum, meet}) and a \emph{least upper bound} (often referred to as the \emph{supremum, join}) in~$\tup{\posAset, \posleq}$.
\end{definition}

\begin{example}
    Consider the power set of any given set, ordered by inclusion.
    The supremum of any two subsets is given by their union.
    The infimum of any two subsets is given by their intersection.
\end{example}

\begin{lemma}[\DP homsets are complete lattices]
    \label{lem:DP-homsets-complete-lattice}
    Hom-sets of \DP are complete lattices.
\end{lemma}

\begin{proof}
    Consider any~$\F{\posgenA},\R{\posgenB}\setin \Obof\DP$ and~$\HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$.
    We have already shown that $\setA=\HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ is a bounded lattice (\cref{lem:dpboundedlattice}).
    Now, take any subset~$\setB$ of~$\setA$.
    We define the following two design problems:
    \begin{equation}
        \defmapcomma{
            \bigvee_{\adp \setin \setB} \adp
        }{
            \F{\posgenA}\op \cartprod \R{\posgenB}
        }{
            \toinPos
        }{
            \Bool
        }{
            \tup{\FposgenAel,\RposgenBel}
        }{
            \exists \adp\setin \setB\colon \adp(\FposgenAel^*,\RposgenBel)
        }
    \end{equation}
    and
    \begin{equation}
        \defmapperiod{
            \bigwedge_{\adp \setin \setB} \adp
        }{
            \F{\posgenA}\op \cartprod \R{\posgenB}
        }{
            \toinPos
        }{
            \Bool
        }{
            \tup{\FposgenAelop,\RposgenBel}
        }{
            \forall \adp\setin \setB\colon \adp(\FposgenAelop,\RposgenBel)
        }
    \end{equation}
    These are clearly design problems (given that~$\adp$ is a design problem) and given their signature they belong to~$\setA$.
    We will now argue that~$\bigvee_{\adp \setin \setB} \adp$ is the supremum of~$\setB$ and~$\bigwedge_{\adp \setin \setB} \adp$ is the infimum of~$\setB$.
    \paragraph*{$\bigvee_{\adp \setin \setB} \adp$ is the supremum of~$\setB$:}
    First, for any~$\adpa\setin \setB$, we know that~$\adpa\posleqof\DP \adpa \join \bigvee_{\adp \setin \setB \backslash \adpa} \adp= \bigvee_{\adp \setin \setB} \adp$, proving that~$\bigvee_{\adp \setin \setB} \adp$ is an upper bound of~$\setB$.
    We now want to show that~$\bigvee_{\adp \setin \setB} \adp$ is the least upper bound of~$\setB$: for any upper bound~$\adpb$ of~$\setB$, we need to show~$\bigvee_{\adp \setin \setB} \adp \posleqof\DP\adpb$.
    In other words, for any pair~$\tup{\FposgenAelop,\RposgenBel}\setin \F{\posgenA}\op\cartprod \R{\posgenB}$, we need to show~$(\bigvee_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)\posleqof\Bool \adpb(\FposgenAelop,\RposgenBel)$.
    Fix any~$\tup{\FposgenAelop,\RposgenBel}$.
    If~$(\bigvee_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)=\false$, the condition is trivially satisfied.

    If, instead,~$(\bigvee_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)=\true$, there exists a~$\adp\setin \setB$ such that~$\adp(\FposgenAelop,\RposgenBel)=\true$.
    Given that~$\adpb$ is an upper bound of~$\setB$, this implies~$\true=\adp(\FposgenAelop,\RposgenBel)\posleqof\Bool \adpb(\FposgenAel^*,\RposgenBel)=\true$, proving the condition.

    \paragraph*{$\bigwedge_{\adp \setin \setB} \adp$ is the infimum of~$\setB$:}
    First, for any~$\adpa\setin \setB$, we know that~$\adpa \meet \bigwedge_{\adp \setin \setB \backslash \adpa} \adp= \bigwedge_{\adp \setin \setB} \adp \posleqof\DP \adpa$, proving that~$\bigwedge_{\adp \setin \setB} \adp$ is a lower bound of~$\setB$.
    We now want to show that~$\bigwedge_{\adp \setin \setB} \adp$ is the greatest lower bound of~$\setB$: for any lower bound~$\adpb$ of~$\setB$, we need to show~$\adpb\posleqof\DP\bigwedge_{\adp \setin \setB} \adp $.
    In other words, for any pair~$\tup{\FposgenAelop,\RposgenBel}\setin \F{\posgenA}\op\cartprod \R{\posgenB}$, we need to show~$\adpb(\FposgenAelop,\RposgenBel) \posleqof\Bool (\bigwedge_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)$.
    Fix any~$\tup{\FposgenAelop,\RposgenBel}$.
    If~$(\bigwedge_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)=\true$, the condition is trivially satisfied.
    If, instead,~$(\bigwedge_{\adp \setin \setB} \adp)(\FposgenAelop,\RposgenBel)=\false$, there is at least one~$\adp\setin \setB$ for which~$\adp(\FposgenAelop,\RposgenBel)=\false$.
    Given that~$\adpb$ is a lower bound of~$\setB$, this implies~$\false=\adpb(\FposgenAelop,\RposgenBel)\posleqof\Bool \adp(\FposgenAelop,\RposgenBel)=\false$, proving the condition.
\end{proof}

\begin{definition}[Distributive Lattice]
    \label{def:distributive-lattice}
    A lattice~$\posA=\tup{\posA,\meet, \join}$ is a \emph{\iindex{distributive lattice}} if for all~$\posela,\poselb,\poselc\setin \posA$:
    \begin{equation}
        \label{eq:cond_distr_latt}
        \posela \meet (\poselb \join \poselc)=(\posela \meet \poselb)\join (\posela \meet \poselc).
    \end{equation}
\end{definition}
\begin{remark}
    Note that condition \cref{eq:cond_distr_latt} is equivalent to its dual:
    \begin{equation}
        \posela \join (\poselb\meet \poselc)=(\posela \join \poselb)\meet (\posela\join \poselc),
    \end{equation}
    for all~$\posela,\poselb,\poselc\setin \posA$.
\end{remark}

\begin{lemma}
    \label{lem:vee_wedge}
    Consider~$\adpa,\adpb,\adpc\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$.
    We have
    \begin{equation}
        (\adpa \meet \adpb)
        \join \adpc=(\adpa \join \adpc) \meet (\adpb\join \adpc).
    \end{equation}
\end{lemma}
\begin{proof}
    We have:
    \begin{equation}
        \begin{aligned}
            ~ & ((\adpa \meet \adpb)\join \adpc)(\FposgenAelop,\RposgenBel) \\
              & =
            (\adpa \meet \adpb)(\FposgenAelop,\RposgenBel)\boolor \adpc(\FposgenAelop,\RposgenBel) \\
              & =(\adpa(\FposgenAelop,\RposgenBel) \booland \adpb(\FposgenAelop,\RposgenBel))\boolor \adpc(\FposgenAelop,\RposgenBel) \\
              & =(\adpa(\FposgenAelop,\RposgenBel) \boolor  \adpc(\FposgenAelop,\RposgenBel)) \booland (\adpb(\FposgenAelop,\RposgenBel)\boolor \adpc(\FposgenAelop,\RposgenBel)) \\
              & =((\adpa \join \adpc) \meet (\adpb\join \adpc))(\FposgenAelop,\RposgenBel).
        \end{aligned}
    \end{equation}
\end{proof}

\begin{lemma}
    \label{lem:wedge_vee}
    Consider~$\adpa,\adpb,\adpc\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$.
    We have
    \begin{equation}
        (\adpa \join \adpb)
        \meet \adpc=(\adpa \meet \adpc) \join (\adpb\meet \adpc).
    \end{equation}
\end{lemma}
\begin{proof}
    We have:
    \begin{equation}
        \begin{aligned}
            ~ & ((\adpa \join \adpb)\meet \adpc)(\FposgenAelop,\RposgenBel) \\
              & = (\adpa \join \adpb)(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenAelop,\RposgenBel) \\
              & =(\adpa(\FposgenAelop,\RposgenBel) \boolor \adpb(\FposgenAelop,\RposgenBel))\boolor \adpc(\FposgenAelop,\RposgenBel) \\
              & =(\adpa(\FposgenAelop,\RposgenBel) \booland  \adpc(\FposgenAelop,\RposgenBel)) \boolor (\adpb(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenAelop,\RposgenBel)) \\
              & =((\adpa \meet \adpc) \join (\adpb\meet \adpc))(\FposgenAelop,\RposgenBel).
        \end{aligned}
    \end{equation}
\end{proof}

\begin{lemma}[\DP homsets are distributive lattices]
    Hom-sets of \DP are distributive lattices.
\end{lemma}
\begin{proof}
    Either \cref{lem:vee_wedge} or \cref{lem:wedge_vee} prove the statement.
\end{proof}

\todotextjira{517}{\bernina: Add diagram.}

\section{Interaction with composition}
Furthermore, we show that all composition operations preserve joins, and all composition operations except trace preserve meets.

\subsection{Series composition}
\begin{lemma}
    \label{lem:series_vee}
    Consider~$\adpa,\adpb\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ and~$\adpc\setin \HomSet{\DP}{\F{\posgenB}}{\R{\posgenC}}$.
    We have
    \begin{equation}
        (\adpa \join \adpb)
        \fthen \adpc=(\adpa\dpthen \adpc) \join (\adpb\dpthen \adpc).
    \end{equation}
    This is diagrammatically represented in~\cref{fig:series_join_dp}.

    \begin{figure}[h!]
        \centering
        \includesag{series_join_dp}
        \caption{}
        \label{fig:series_join_dp}
    \end{figure}
\end{lemma}
\begin{proof}
    We have:
    \begin{equation}
        \begin{aligned}
            ~ & ((\adpa \join \adpb)\fthen \adpc)(\FposgenAelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa \join \adpb)(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenBelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa(\FposgenAelop,\RposgenBel) \boolor \adpb(\FposgenAelop,\RposgenBel))\booland \adpc(\FposgenBelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa(\FposgenAelop,\RposgenBel) \booland  \adpc(\FposgenBelop,\R{\posgenCel})) \boolor (\adpb(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenBelop,\R{\posgenCel})) \\
              & =((\adpa\dpthen \adpc) \join (\adpb\dpthen \adpc))(\FposgenAelop,\R{\posgenCel}).
        \end{aligned}
    \end{equation}
\end{proof}

\begin{remark}
    Consider~$\adpa,\adpb\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ and~$\adpc,\adpd\setin \HomSet{\DP}{\F{\posgenB}}{\R{\posgenC}}$.
    In general, we have:
    \begin{equation}
        (\adpa\join \adpb)
        \fthen (\adpc\join \adpd) \neq (\adpa\dpthen \adpc)\join (\adpb\dpthen \adpd).
    \end{equation}
    Indeed, consider~$\adpa=\postop_{\F{\posgenA},\R{\posgenB}}$,~$\adpb=\posbot_{\F{\posgenA},\R{\posgenB}}$,~$\adpc=\posbot_{\F{\posgenB},\R{\posgenC}}$, and~$\adpd=\postop_{\F{\posgenB},\R{\posgenC}}$.
    Clearly:
    \begin{equation}
        \begin{aligned}
            ((\adpa\join \adpb)\fthen (\adpc\join \adpd))(\FposgenAelop,\R{\posgenCel}) & =\bigvee_{\posBel\setin \posB} (\adpa\join \adpb)(\FposgenAelop,\R{\posgenCel})\booland (\adpc\join \adpd)(\FposgenBelop,\R{\posgenCel}) \\
                                                                                        & =\true,
        \end{aligned}
    \end{equation}
    but
    \begin{equation}
        \begin{aligned}
            ~ & ((\adpa\dpthen \adpc)\join (\adpb\dpthen \adpd))(\FposgenAelop,\R{\posgenCel}) \\
            = & \left( \bigvee_{\posBel\setin \posB} \adpa (\FposgenAelop,\RposgenBel) \booland \adpc(\FposgenBelop,\R{\posgenCel})\right)\boolor
            \left( \bigvee_{\posBel\setin \posB} \adpb (\FposgenAelop,\RposgenBel) \booland \adpd(\FposgenBelop,\R{\posgenCel})\right) \\
            = & \false \boolor \false \\
            = & \false.
        \end{aligned}
    \end{equation}
\end{remark}

\begin{lemma}
    \label{lem:series_wedge}
    Consider~$\adpa,\adpb\setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ and~$\adpc\setin \HomSet{\DP}{\F{\posgenB}}{\R{\posgenC}}$.
    We have
    \begin{equation}
        (\adpa \meet \adpb)
        \fthen \adpc=(\adpa\dpthen \adpc) \meet (\adpb\dpthen \adpc).
    \end{equation}
    This is diagrammatically represented in~\cref{fig:series_meet_dp}.
    \begin{figure}[h!]
        \centering
        \includesag{series_meet_dp}
        \caption{}
        \label{fig:series_meet_dp}
    \end{figure}
\end{lemma}
\begin{proof}
    We have:
    \begin{equation}
        \begin{aligned}
            ~ & ((\adpa \meet \adpb)\fthen \adpc)(\FposgenAelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa \meet \adpb)(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenBelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa(\FposgenAelop,\RposgenBel) \booland \adpb(\FposgenAelop,\RposgenBel))\booland \adpc(\FposgenBelop,\R{\posgenCel}) \\
              & =\bigvee_{\posBel\setin \posB} (\adpa(\FposgenAelop,\RposgenBel) \booland  \adpc(\FposgenBelop,\R{\posgenCel})) \booland (\adpb(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenBelop,\R{\posgenCel})) \\
              & =((\adpa\dpthen \adpc) \meet (\adpb\dpthen \adpc))(\FposgenAelop,\R{\posgenCel}).
        \end{aligned}
    \end{equation}
\end{proof}

