% !TEX root = chapter-standalone.tex

\section{Interaction with series composition}
In the previous section, we introduced the concept of order in~\DP, and proved that the \SY{hom-sets} of~\DP form a \SY{bounded lattice}.
In this section, we show that composition (\cref{def:dp-series}) of \SY{design problems} is an order-preserving operation.

\todographicsjira{432}{\bernina: @Gioele: (polish) These relations are very well explained with diagrams.}
\begin{lemma}
    \label{lem:series_pres_order}
    Given~$\adpa,\adpab \setin \HomSet{\DP}{\F{\posgenA}}{\R{\posgenB}}$ and~$\adpc,\adpd \setin \HomSet{\DP}{\F{\posgenB}}{\R{\posgenC}}$ we have:
    \begin{equation}
        \prfperiod{
            \adpa\posDPleq \adpb
        }{
            \adpc\posDPleq \adpd
        }{
            (\adpa\dpthen \adpc) \posDPleq (\adpb\dpthen \adpd)
        }
    \end{equation}
    In other words, series composition is order-preserving on \DP.
\end{lemma}
\todotext{This is just the order on DPs...}
\begin{proof}
    We have
    \begin{equation}
        \label{eq:series_pres_ord}
        \begin{aligned}
            ~ & \pars{ \adpa\dpthen \adpc}(\FposgenAelop,\R{\posgenCel}) \\
              & = \bigvee_{\posgenBel\setin \posgenB}\adpa(\FposgenAelop,\RposgenBel)\booland \adpc(\FposgenBelop,\R{\posgenCel}) \\
              & \posDPleq \bigvee_{\posBel\setin \posBset} \adpb(\FposgenAelop,\RposgenBel)\booland \adpd(\FposgenBelop,\R{\posgenCel}) \\
              & =\pars{ \adpb\dpthen \adpd}(\FposgenAelop,\R{\posgenCel}).
        \end{aligned}
    \end{equation}
    Therefore, $\fthen$ is order-preserving on~\DP.
\end{proof}

