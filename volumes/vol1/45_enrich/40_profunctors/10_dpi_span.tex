% !TEX root = chapter-standalone.tex

\section{DPIs are spans}
\label{sec:spans}

\todostructurejira{277}{\bernina: @JL: Not sure this is the place to talk about spans.
    Maybe define spans before DP, then reference from DPs?
}

\begin{ctdefinition}[Span]
    \label{def:span}
    Given a category~\CatC, a \maindef{span} from an object~$\Obja$ to an object~$\Objb$ is a diagram of the form
    %
    \middlesag{51_span}
    %
    where~$\Objc$ is some other object of~\CatC.
\end{ctdefinition}

\begin{example}
    Consider the category~$\Berg_0$, (a specific version of the category~$\Berg_\alpha$, introduced in \cref{sec:trekking}).
    The ``0'' means that the category only includes paths which go down.
    An example of span in this category is reported in~\cref{fig:exmountains}.
    \begin{figure}[h!]
        \centering
        \includesag{130_mountains}
        \caption{Swiss peaks can be thought of as a span in~\Berg.}
        \label{fig:exmountains}
        \todographics{@Gioele: note that the 130mountains.tikz uses \str{linewidth} which means that it will change based on the context of where the figure is placed.
            Use absolute value.
        }
    \end{figure}
    Recall that \textsf{Jungfrau Peak}, \textsf{Interlaken}, and \textsf{Grindelwald} are objects of $\Berg_\alpha$, and the arrows are morphisms in~$\Berg_\alpha$ (paths from one location to the other).
\end{example}

We can interpret DPIs as spans.
Precisely, given the two maps~$\prov \colon \impsp \to \funsp$ (an implementation \textbf{prov}ides a functionality) and~$\req\colon \impsp \to \ressp$ (an implementation \textbf{req}uires resources) we have the span in~\Set:
%
\equationsag{130_catalogue}{eq:130_catalogue}

%\begin{definition}[Design problem induced by a catalogue]
%  Every catalogue~$\tup{\impsp,\prov,\req}$ \emph{induces} a design problem of the form~$d\colon \funsp \profto \ressp$, with
%  \begin{equation*}
%    \begin{aligned}
%      d\colon \funsp \op \times \ressp &\toinPos \Bool\\
%      \tup{\fun^*,\res}&\mapsto \bigvee_{\imp\setin \impsp}\left(\prov(\imp)\funleq \fun \right)\wedge \left( \req(\imp)\resleq \res \right)
%    \end{aligned}
%  \end{equation*}
%\end{definition}
