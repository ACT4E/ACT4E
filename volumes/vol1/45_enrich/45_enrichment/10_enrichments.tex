% !TEX root = chapter-standalone.tex

\section{Enrichments}
\label{sec:enriched}

%\marginnote{This is a margin note using the geometry package}

A design problem ``enriched in \Bool'' answers the question, ``is it feasible to provide a given functionality \fun with resources \res?''.
A design problem ``enriched in \Set'' answers the question, ``which implementations provide \fun with \res?''.
A design problem ``enriched in \DP'' answers the question, ``which design problems provide \fun with \res?''.
If compact closure allows us to zoom out by studying design problems of design problems, then enrichment allows us to zoom in by studying the ``subatomic'' composition of design problems.

\begin{example}
    \label{ex:dpi_example}
    Beau, the NASA engineer, stares hard at his screen.
    His boss, Elly May, only wants to know whether the rocket will fly, but he's the one that has to deal with all potential suppliers and technologies.
    Since NASA started letting any Podunk junkyard company bid on rocket contracts, the number of potential parts had sky\emph{rocketed}.
    Intuitively, he wants to keep track of this extra parts information, so he defines, for every design problem $\adp \colon \funsp \profto \ressp$, an extra set of implementations $\impsp_\text{adp}$ and two functions $\prov\colon \impsp_\text{adp} \to \funsp$ and  $\req\colon \impsp_\text{adp} \to \ressp$; we say that $i$ provides at most $\fun \setin \funsp$ and $i$ requires at least $\res \setin \ressp$.
    Now the familiar $\mathsf{engine} \colon \F{\text{Thrust}} \profto \R{\text{Fuel}}$ design problem looks like this:
    \begin{widepar}
        \begin{equation}
            \begin{aligned}
                engine \colon \textF{Thrust}\op \cartprod \textR{Fuel} & \toinPos \powerset(\impsp_\text{engine}) \\
                \tup{\F{t}^*,\R{f}}                                    & \mapsto \makeset{ i \setin \impsp_\text{engine} \mid \text{exec}(i) \leq_\F{\text{Thrust}} \F{t}, \text{eval}(i) \geq_\R{\text{Fuel}} \R{f} }
            \end{aligned}
        \end{equation}
    \end{widepar}
    Beau is feeling pretty proud of himself.
    Now any time NASA wants a design to be built, he can just press a button and the computer will spit out all the parts needed.
\end{example}

In order to sharpen the intuition of the above example (implementation spaces of the sort above were actually implemented in~\cite{censi}), we will need to learn more about the theory of enriched categories.

Given that \DP is compact closed and the external hom is a poset, it is a short, visual step to seeing that \DP is also what we call a \emph{2-category}: a category where the (external) hom-object between any two objects is itself a category (remember that a poset is a kind of category, from \cref{sec:posetsarecats}).
In other words, a 2-category is a category endowed with the extra structure of ``morphisms between morphisms''.

Another way of defining a 2-category is to say that it is ``enriched in \Category'', the category of categories, whose objects are (small) categories and morphisms are \SY{functors}.
More generally, to say that a category \CatC is \emph{enriched in~\CatD}, where \CatD is a monoidal category, is to say that $\HomSet\CatC{A}{B} \setin \CatD$ for all $A,B \setin \CatC$, and that composition of morphisms in $\HomSet\CatC{A}{B}$ respects the rules of composition in~\CatD.

