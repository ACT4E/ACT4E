
\section{The $\UPos$ and~$\LPos$ categories}

\begin{definition}[Category \UPos]
    \label{def:upos_cat}
    The category \UPos consists of:
    \begin{enumerate}
        \item \emph{Objects}: objects are posets;
        \item \emph{Morphisms}: given objects~$\Obja,\Objb\setin \Ob_{\UPos}$, morphisms from~$\mora\colon \Obja \mto \Objb$ are monotone maps of the form~$\ulposmap{\mapa} \colon \Obja \toinPos \uppersets{\Objb}$.
        \item \emph{Composition of morphisms}: Given morphisms~$\mora\colon \Obja \mto \Objb$,~$\morb\colon \Objb\mto \Objc$, their composition~$\mora\mthen \morb\colon \Obja\mto \Objc$ is given by
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{(\mapa \mthen \mapb)} \colon \Obja & \toinPos \uppersets{\Objc} \\
                      \Objael                                      & \mapsto \bigsetunion_{\Objbel\setin \ulposmap{\mapa}(\Objael)}\ulposmap{\mapb}(\Objbel);
                  \end{aligned}
              \end{equation}
        \item \emph{Identity morphism}: given an object~$\Obja\setin \Ob_{\UPos}$, the identity morphism $\catid_\Obja \colon \Obja \mto \Obja$ is given by the application of the upper closure operator:
              \begin{equation}
                  \ulposmap{\catid}_\Obja(\Objael)\definedas \upit\makeset{\Objael}.
              \end{equation}
    \end{enumerate}
\end{definition}

\begin{remark}
    Note that the composition of morphisms in this category corresponds to the generalization of the series operator for boolean profunctors.
\end{remark}

Analogously, we can define the \LPos category.
\begin{definition}[Category \LPos]
    \label{def:lpos_cat}
    The category \LPos consists of:
    \begin{enumerate}
        \item \emph{Objects}: objects are posets;
        \item \emph{Morphisms}: given objects~$\Obja,\Objb\setin \Ob_{\LPos}$, morphisms~$\mora\colon \Obja\mto \Objb$ are monotone maps of the form~$\ulposmap{\mora} \colon \Obja \toinPos \lowersets{\Objb}$.
        \item \emph{Composition of morphisms}: Given morphisms~$\mora \colon \Obja \mto \Objb$,~$\morb \colon \Objb\mto \Objc$, their composition~$\mora\mthen \morb\colon \Obja\mto \Objc$ is given by
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{(\mapa \mthen \mapb)} \colon \Obja & \toinPos \lowersets{\Objc} \\
                      \Objael                                      & \mapsto \bigsetunion_{\Objbel\setin \ulposmap{\mora} (\Objael)}\ulposmap{\morb}(\Objbel);
                  \end{aligned}
              \end{equation}
        \item \emph{Identity morphism}: given an object $\Obja\setin \Ob_{\LPos}$, the identity morphism $\catid_\Obja \colon \Obja \mto \Obja$ is given by the application of the lower closure operator:
              \begin{equation}
                  \ulposmap{\catid}_\Obja(\Objael)\definedas \downit\makeset{\Objael}.
              \end{equation}
    \end{enumerate}
\end{definition}

We now show that \UPos and \LPos are indeed categories.

\begin{lemma}
    \label{lem:upos_lpos_cats}
    \UPos and \LPos are categories.
\end{lemma}

\begin{proof}
    We prove that \UPos is a category.
    The proof for \LPos is analogous.
    In the following, we show unitality and associativity.

    \textbf{Unitality}:
    Given~$\mora\colon \Obja \mto \Objb$, we have:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\left( \mora \mthen \catid_\Objb\right)}(\Objael) & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\ulposmap{\catid_\Objb}(\Objbel) \\
                                                                        & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\upit\makeset{\Objbel} \\
                                                                        & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\makeset{\Objbel'\setin \Objb \colon \Objbel\posleqof\Objb \Objbel' }.
        \end{aligned}
    \end{equation*}
    We know that~$\ulposmap{\mora}(\Objael)$ is an upper set:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\mora}(\Objael) & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\makeset{\Objbel} \\
                                      & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\makeset{ \Objbel'\setin \Objb \colon \Objbel\posleqof\Objb \Objbel'}.
        \end{aligned}
    \end{equation*}
    Therefore,~$\ulposmap{\left( \mora \mthen \catid_\Objb\right)}(\Objael)=\ulposmap{\mora}(\Objael)$ for all~$\Objael\setin \Obja$.
    Similarly, we have:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\catid_\Obja \mthen \mora)}(\Objael) & =\bigsetunion_{\Objael'\setin \ulposmap{\catid_\Obja}(\Objael)}\ulposmap{\mora}(\Objael') \\
                                                            & =\bigsetunion_{\Objael'\setin \upit \makeset{\Objael}}\ulposmap{\mora}(\Objael') \\
                                                            & =\ulposmap{\mora}(\Objael),
        \end{aligned}
    \end{equation*}
    where the last equality holds since~$\ulposmap{\mora}$ is a monotone function and~$\ulposmap{\mora}(\Objael')\setsubseteq \ulposmap{\mora}(\Objael)$ for all~$\Objael'\setin \upit \makeset{\Objael}$.

    \textbf{Associativity}:
    Consider  three morphisms~$\mora\colon \Obja \mto \Objb$, $\morb\colon \Objb\mto \Objc$, and $\morc \colon \Objc\mto \Objd$.
    We have:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\left( (\mora \mthen \morb) \mthen \morc\right)}(\Objael) & =
            \bigsetunion_{\Objcel \setin \left( \bigsetunion_{\Objbel \setin \ulposmap{\mora}(\Objael)}\ulposmap{\morb}(\Objbel)\right)}\ulposmap{\morc}(\Objcel) \\
                                                                                & =\bigsetunion_{\Objbel\setin \ulposmap{\mora}(\Objael)}\bigsetunion_{\Objcel\setin \ulposmap{\morb}(\Objbel)}\ulposmap{\morc}(\Objcel) \\
                                                                                & =\ulposmap{\left( \mora \mthen \left( \morb\mthen \morc\right)\right)}(\Objael).
        \end{aligned}
    \end{equation*}
    Therefore, \UPos is a category.
\end{proof}

We can show that \UPos and \LPos are equivalent categories (\cref{def:cat-equivalence}).

\begin{lemma}
    \label{lem:ulposequiv}
    \UPos and \LPos are equivalent: there exists a pair of functors
    \begin{equation}
        \begin{aligned}
            \funeqa\colon \UPos & \fto \LPos, \\
            \funeqb\colon \LPos & \fto \UPos,
        \end{aligned}
    \end{equation}
    such that~$\funeqa \then \funeqb=\funid_{\UPos}$ and~$\funeqb \then \funeqa=\funid_{\LPos}$, where~$\funid_{\UPos}$ and~$\funid_{\LPos}$ are the identity functors on $\UPos$ and~$\LPos$, respectively.
\end{lemma}

\begin{proof}
    To prove this, we need to define the needed functors and to show that they satisfy the listed properties.
    We choose the functors to be the ones that map a poset~$\posA$ in a category to its opposite version~$\posA\op$ in another category.
    Given a morphism~$\mora\colon \Obja \mto \Objb$ in \UPos, we have:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\funeqa(\mora))}\colon \Obja\op & \toinPos \lowersets{\Objb}\op \\
            \Objael                                    & \mapsto \ulposmap{\mora}(\Objael).
        \end{aligned}
    \end{equation*}
    Given a morphism~$\morb\colon \Obja \mto \Objb$ in \LPos, we have:
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\funeqb(\morb))}\colon \Obja\op & \toinPos \uppersets{\Objb}\op \\
            \Objael                                    & \mapsto \ulposmap{\morb}(\Objael).
        \end{aligned}
    \end{equation*}

    \textbf{$\funeqa$ and~$\funeqb$ are functors}:
    \begin{itemize}
        \item \emph{Preservation of identities}: Given~$\Obja\setin \Ob_{\UPos}$, we have:
              \begin{equation*}
                  \begin{aligned}
                      \ulposmap{(\funeqa(\catid_\Obja))} & =\upit_\Obja\makeset{\Objael} \\
                                                         & =\downit_{\Obja\op}\makeset{\Objael} \\
                                                         & =\ulposmap{\catid_{\Obja\op}},
                  \end{aligned}
              \end{equation*}
              where~$\catid_\Obja$ is an identity morphism in \UPos, and~$\catid_{\Obja\op}$ is an identity morphism in \LPos.
              Similarly, given~$\Obja\setin \Ob_{\LPos}$ we have:
              \begin{equation*}
                  \begin{aligned}
                      \ulposmap{(\funeqb(\catid_\Obja))} & =\downit_\Obja\makeset{\Objael} \\
                                                         & =\upit_{\Obja\op}\makeset{\Objael} \\
                                                         & =\ulposmap{\catid}_{\Obja\op}.
                  \end{aligned}
              \end{equation*}
        \item \emph{Preservation of composition}: This can be easily seen as follows.
              Given any~$\mora\setin \HomSet{\UPos}{\Obja}{\Objb}$,~$\morb\setin \HomSet{\UPos}{\Objb}{\Objc}$:
              \begin{equation*}
                  \begin{aligned}
                      \ulposmap{(\funeqa(\mora \mthen \morb))} & =\ulposmap{(\mora\mthen \morb)} \\
                                                               & =\ulposmap{(\funeqa(\mora)\mthen \funeqa(\morb))}.
                  \end{aligned}
              \end{equation*}
              Similarly, given any~$\mora\setin \HomSet{\LPos}{\Obja}{\Objb}$,~$\morb\setin \HomSet{\LPos}{\Objb}{\Objc}$:
              \begin{equation*}
                  \begin{aligned}
                      \ulposmap{(\funeqb(\mora \mthen \morb))} & =\ulposmap{(\mora \mthen \morb)} \\
                                                               & =\ulposmap{(\funeqb(\mora)\mthen \funeqb(\morb))}.
                  \end{aligned}
              \end{equation*}
    \end{itemize}

    \textbf{Compositions return identity functors}:
    We want to show that by composing the two functors we obtain the identity functors in \UPos and \LPos, respectively.
    Clearly, composing the two functors returns the identity on the objects, since for any poset~$\posA$, one has~$(\posA\op)\op=\posA$.
    The functors act on morphisms by ``flipping the context'', and ``flipping'' twice is the ``same'' as not flipping.
\end{proof}

We can show that~$\UPos$ and~$\LPos$ are monoidal categories.

\begin{lemma}
    \label{lem:upos_moncat}
    \UPos is a monoidal category with the following additional structure:
    \begin{enumerate}
        \item \emph{Tensor product~$\mtimescat$}: On objects, the tensor product corresponds to the product of posets.
              Given two morphisms~$\mora\colon \Obja\mto \Objb$ and~$\morb\colon \Objc\mto \Objd$, we have~$\mora \mtimescat \morb\colon  \Obja \cartprod \Objc \mto \Objb\cartprod \Objd$, with
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{(\mora\mtimescat \morb)}\colon \Obja \cartprod \Objc & \toinPos \uppersets{(\Objb\cartprod \Objd)} \\
                      \tup{\Objael,\Objcel}                                          & \mapsto \ulposmap{\mora}(\Objael)\cartprod \ulposmap{\morb}(\Objcel).
                  \end{aligned}
              \end{equation}
              Note that the Cartesian product of upper sets is an upper set.

        \item \emph{Unit}: The unit is the identity poset: the poset with a singleton carrier set and only the identity relation.
              We denote this by~$\singleton$.
        \item \emph{Left unitor}: The left unitor is given by the pair of morphisms~$\leftunitor_\Obja\colon \singletonobj\cartprod \Obja \mto \Obja$ and~$\leftunitor_\Obja^{-1}\colon \Obja \mto \singletonobj\cartprod \Obja$, with
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\leftunitor}_\Obja\colon \singletonobj\cartprod \Obja & \toinPos \Up{\Obja} \\
                      \tup{\styleobj{\singletonel},\Objael}                           & \mapsto \upit\makeset{\Objael},
                  \end{aligned}
              \end{equation}
              and
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\leftunitor_{\Obja}^{-1}}\colon \Obja & \toinPos \Up(\singletonobj\cartprod \Obja) \\
                      \Objael                                         & \mapsto \singletonobj \cartprod \upit \makeset{\Objael},
                  \end{aligned}
              \end{equation}
              respectively.
        \item \emph{Right unitor}: The right unitor is given by the pair of morphisms~$\rightunitor_\Obja\colon \Obja\cartprod \singletonobj  \mto \Obja$ and~$\rightunitor_\Obja^{-1}\colon \Obja \mto \Obja \cartprod \singletonobj$, with
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\rightunitor}_\Obja\colon \Obja\cartprod \singletonobj & \toinPos \Up{\Obja} \\
                      \tup{\Objael,\styleobj{\singletonel}}                            & \mapsto \upit\makeset{\Objael},
                  \end{aligned}
              \end{equation}
              and
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\rightunitor_{\Obja}^{-1}}\colon \Obja & \toinPos \Up( \Obja \cartprod \singletonobj) \\
                      \Objael                                          & \mapsto \upit \makeset{\Objael} \cartprod \singletonobj,
                  \end{aligned}
              \end{equation}
              respectively.
        \item \emph{Associator}: The associator is given by the pair of morphisms~$\associator_{\Obja\Objb,\Objc}\colon (\Obja\cartprod \Objb)\cartprod \Objc \mto \Obja\cartprod ( \Objb \cartprod \Objc)$ and~$\associator_{\Obja,\Objb\Objc}\colon \Obja\cartprod (\Objb\cartprod \Objc) \mto (\Obja\cartprod \Objb) \cartprod \Objc$, given by
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\associator_{\Obja\Objb,\Objc}}\colon (\Obja\cartprod \Objb)\cartprod \Objc & \toinPos \Up \Obja\cartprod (\Up \Objb \cartprod \Up \Objc) \\
                      \tup{\tup{\Objael,\Objbel},\Objcel}                                                   & \mapsto \upit\makeset{\Objael}\cartprod (\upit\makeset{\Objbel}\cartprod \upit\makeset{\Objcel}),
                  \end{aligned}
              \end{equation}
              and
              \begin{equation}
                  \begin{aligned}
                      \ulposmap{\associator_{\Obja,\Objb\Objc}}\colon \Obja\cartprod (\Objb\cartprod \Objc) & \toinPos (\Up \Obja\cartprod \Up \Objb) \cartprod \Up \Objc \\
                      \tup{\Objael,\tup{\Objbel,\Objcel}}                                                   & \mapsto (\upit\makeset{\Objael}\cartprod \upit\makeset{\Objbel})\cartprod \upit\makeset{\Objcel}.
                  \end{aligned}
              \end{equation}
    \end{enumerate}
\end{lemma}
\begin{proof}
    \todojira{238}{type proof}
\end{proof}

We now want to show that \UPos can be equipped to become a symmetric monoidal category.
To do so, we first need the following two facts.

\begin{lemma}
    \label{lem:unpack_u_functor}
    Given posets~$\posA,\posB$, a monotone map~$\mora \colon \posA \to \posB$, and a family of singleton sets~$\makeset{S_i}_{i\setin I}$, with~$S_i=\makeset{s_i}$,~$s_i\setin \posA$, the following equality holds:
    \begin{equation}
        \label{eq:lemma_unpack}
        \upit \left( \bigsetunion_{\posAel \setin \upit \bigsetunion_{i\setin I}S_i}\makeset{\mora(\posAel)}\right)= \upit \left( \bigsetunion_{i\setin I} \makeset{\mora(s_i)}\right).
    \end{equation}
\end{lemma}

\todotextjira{241}{the phrasing here seems unnecessarily complicated\dots maybe we phrase the lemma as something like ``$\upit  f( \upit S) = \upit f(S) $'' for any set $S$ and any monotone map $f$ ?}

\begin{proof}
    We first want to show that:
    \begin{equation}
        \label{eq:unpack_1}
        \underbrace{\upit \left(\bigsetunion_{\posAel \setin \upit \bigsetunion_{i\setin I}S_i}\makeset{\mora(\posAel)} \right)}_{\star}\setsubseteq \upit \underbrace{\left( \bigsetunion_{i\setin I}\makeset{\mora(s_i)}\right)}_{\diamond}.
    \end{equation}
    Let's take a
    \begin{equation}
        \posBel \setin \upit\left( \bigsetunion_{\posAel \setin \upit \bigsetunion_{i\setin I}S_i}\makeset{\mora(\posAel)}\right).
    \end{equation}
    If we have such a~$\posBel$, it means that there exists a
    \begin{equation}
        \posBel'\setin \bigsetunion_{\posAel\setin \upit\bigsetunion_{i\setin I}S_i}\makeset{\mora(\posAel)}
    \end{equation}
    such that~$\posBel'\posleqof\posB \posBel$, and hence there is a~$\posAel'\setin \upit \bigsetunion_{i\setin I} S_i$ such that~$\posBel'=\mora(\posAel')$.
    Consequently, there must exist an~$i'\setin I$ such that~$s_{i'}\posleqof\posA \posAel'$.
    The monotonicity of~$\mapa$ implies:
    \begin{equation}
        \mora(s_{i'})\posleqof\posA \mora(\posAel')=\posBel'\posleqof\posB \posBel.
    \end{equation}
    We know that~$s_{i'}\setin \diamond$ and any~$\posBel^*\setin \posB$ satisfying~$\mora(s_{i'})\posleqof\posB \posBel^*$ belongs to~$\upit \diamond$.
    Therefore,~$\star\setsubseteq \upit \diamond$, which proves the validity of \cref{eq:unpack_1}.

    We now want to show that:
    \begin{equation}
        \label{eq:unpack_2}
        \upit \left(\bigsetunion_{\posAel \setin \upit \bigsetunion_{i\setin I}S_i}\makeset{\mora(\posAel)} \right)\setsupseteq \upit \left( \bigsetunion_{i\setin I}\makeset{\mora(s_i)}\right).
    \end{equation}
    By now taking a
    \begin{equation}
        \posBel\setin \upit \left( \bigsetunion_{i\setin I}\makeset{\mora(s_i)}\right),
    \end{equation}
    we know that there is an~$i'\setin I$ such that~$\mora(s_{i'})\posleqof\posB \posBel$.
    Furthermore, we know that~$\mora(s_{i'})\setin \diamond$.
    Therefore, any~$\posBel^*\posleqof\posB \mora(s_{i'})$ must be in~$\upit \diamond$, meaning that~$\posBel\setin \star$, and proving the validity of \cref{eq:unpack_2}.

    The validity of \cref{eq:unpack_1} and \cref{eq:unpack_2} implies \cref{eq:lemma_unpack}.
\end{proof}

\begin{remark}
    \label{rem:unpack_u_functor_bis}
    Given posets~$\posA,\posB$ and a monotone map~$\mora\colon \posA\to \posB$, we have:
    \begin{equation}
        \upit \left( \bigsetunion_{\posAel'\setin \upit \makeset{\posAel}} \makeset{\mora(\posAel')}\right)=\upit \makeset{\mora(\posAel)}.
    \end{equation}
    This follows from \cref{lem:unpack_u_functor}, by considering a family of singleton sets consisting solely of the set~$\makeset{\posAel}$.
\end{remark}

\begin{lemma}
    The cartesian product of upper sets is an upper set.
    The cartesian product of lower sets is a lower set.
\end{lemma}
\begin{proof}
    Consider two posets~$\posA,\posB$ and two respective upper sets~$\setA,\setB$.
    One has
    \begin{equation*}
        \prfcomma{\setAel \setin \setA}{\setAel \posleqof\posA \setAel'}{\setAel'\setin \setA}
    \end{equation*}
    and
    \begin{equation*}
        \prfperiod{\setBel \setin \setB}{\setBel \posleqof\posB \setBel'}{\setBel'\setin \setB}
    \end{equation*}
    Therefore:
    \begin{equation*}
        \prfcomma{
            \tup{\setAel,\setBel} \setin \setA\cartprod \setB
        }{
            \tup{\setAel,\setBel} \posleqof{\posA \cartprod \posB} \tup{\setAel',\setBel'}
        }{
            \tup{\setAel',\setBel'}\setin \setA \cartprod \setB
        }
    \end{equation*}
    which proves that~$\setA\cartprod \setB$ is an upper set.
    The proof for the product of lower sets is analogous.
\end{proof}
\begin{lemma}
    \label{lem:UPos-is-sym-mon}
    $\tup{\UPos,\mtimescat,\idmoncat}$ from \cref{lem:upos_moncat} equipped with the braiding isomorphism~$\braiding_{\Obja,\Objb}\colon \Obja \cartprod \Objb \mtoiso \Objb \cartprod \Obja$, given by
    \begin{equation}
        \label{eq:Upos-braiding}
        \begin{aligned}
            \ulposmap{\braiding}_{\Obja,\Objb}\colon \Obja \cartprod \Objb & \toinPos \uppersets{(\Objb \cartprod \Obja)} \\
            \tup{\Objael,\Objbel}                                          & \mapsto \upit\makeset{\Objbel} \cartprod \upit\makeset{\Objael},
        \end{aligned}
    \end{equation}
    defined for all~$\Obja,\Objb\setin \Ob_{\UPos}$, forms a symmetric monoidal category.
\end{lemma}
\begin{proof}
    We first show that the braiding defines an isomorphism.
    In other words, we want to show
    \begin{equation*}
        \ulposmap{(\braiding_{\Obja,\Objb}\mthen \braiding_{\Objb,\Obja})}=\ulposmap{\catid_{\Obja \cartprod \Objb}}.
    \end{equation*}
    One has
    \begin{equation*}
        \begin{aligned}
            ~ & \ulposmap{(\braiding_{\Obja,\Objb}\mthen \braiding_{\Objb,\Obja})}(\Objael,\Objbel) \\
              & =\bigsetunion_{\tup{\Objael',\Objbel'}\setin \ulposmap{\braiding_{\Obja,\Objb}}(\Objael,\Objbel)}\ulposmap{\braiding_{\Objb,\Obja}}(\Objael',\Objbel') \\
              & =\bigsetunion_{\tup{\Objbel',\Objael'}\setin \upit\makeset{\Objbel}\cartprod \upit\makeset{\Objael}}\upit\makeset{ \Objael'}\cartprod \upit\makeset{ \Objbel'} \\
              & =\upit\makeset{\Objael} \cartprod \upit\makeset{\Objbel} \\
              & =\ulposmap{\catid_{\Obja\cartprod \Objb}}(\Objael,\Objbel).
        \end{aligned}
    \end{equation*}
    Note that this comes from the fact that~$\braiding$ is an involution.
    We now show naturality.
    Consider~$\mora \colon \Obja \mto \Objb$,~$\morb\colon \Objc \mto \Objd$.
    One has
    %
    \begin{equation}
        \label{eq:braid-upos-natural-a}
        \begin{aligned}
            ~ & \ulposmap{\left(\left( \mora \mtimescat \morb\right)\mthen \braiding_{ \Objb, \Objd}\right)}(\Objael,\Objcel) \\
              & = \tup{\ulposmap{\mora}(\Objael),\ulposmap{\morb}(\Objcel)}\mthen \braiding_{ \Objb, \Objd} \\
              & =\tup{\bigsetunion_{\Objcel'\setin \ulposmap{\morb}(\Objcel)}\upit \Objcel',\bigsetunion_{\Objael'\setin \ulposmap{\mora}(\Objael)}\upit \Objael'}.
        \end{aligned}
    \end{equation}
    On the other hand:
    \begin{equation}
        \label{eq:braid-upos-natural-b}
        \begin{aligned}
            ~ & \ulposmap{\left(\braiding_{ \Objd, \Objb}\mthen \left( \mora \mtimescat \morb\right)\right)}(\Objael,\Objcel) \\
              & =
            \tup{\upit\makeset{\Objcel},\upit\makeset{\Objael}}\mthen \ulposmap{\left( \mora \mtimescat \morb\right)} \\
              & =\tup{\bigsetunion_{\Objcel'\setin \upit\makeset{\Objcel}} \ulposmap{\morb}(\Objcel'),\bigsetunion_{\Objael'\setin \upit\makeset{\Objael}}\ulposmap{\mora}(\Objael')}.
        \end{aligned}
    \end{equation}
    Clearly, from \cref{lem:unpack_u_functor} and \cref{rem:unpack_u_functor_bis} we know that \cref{eq:braid-upos-natural-a} and \cref{eq:braid-upos-natural-b} are equivalent, proving naturality.
    We now just need to show hexagon identities.
    First, we want to show that
    \begin{equation}
        \label{eq:upos_hexagon_1}
        (\braiding_{\Obja,\Objb}\mtimescat \catid_\Objc) \mthen \associator_{\Objb,\Obja,\Objc}\mthen (\catid_{\Objb}\mtimescat \braiding_{\Obja,\Objc})=
        \associator_{\Obja,\Objb,\Objc} \mthen \braiding_{\Obja,\Objb\mtimescat \Objc}\mthen \associator_{\Objb,\Objc,\Obja}
    \end{equation}
    To do so, we first look at the left-hand side of \cref{eq:upos_hexagon_1}.
    One has
    \begin{equation*}
        \begin{aligned}
             & \ulposmap{((\braiding_{\Obja,\Objb}\mtimescat \catid_\Objc) \mthen \associator_{\Objb,\Obja,\Objc})}(\tup{\Objael,\Objbel},\Objcel) \\
             & =\bigsetunion_{\tup{\tup{\Objbel',\Objael'},\Objcel'}\setin \ulposmap{(\braiding_{\Obja,\Objb}\mtimescat \catid_\Objc)}(\tup{\Objael,\Objbel},\Objcel)}\ulposmap{\associator}_{\Objb,\Obja,\Objc}(\Objbel',\Objael',\Objcel') \\
             & =\bigsetunion_{\tup{\tup{\Objbel',\Objael'},\Objcel'}\in(\upit \makeset{\Objbel} \cartprod \upit\makeset{ \Objael})\cartprod \upit \makeset{\Objcel}}\upit\makeset{\Objbel'} \cartprod (\upit \makeset{\Objael'}\cartprod \upit\makeset{ \Objcel'}) \\
             & =\upit\makeset{\Objbel} \cartprod (\upit \makeset{\Objael}\cartprod \upit\makeset{ \Objcel}).
        \end{aligned}
    \end{equation*}
    Furthermore, one has
    \begin{equation}
        \label{eq:upos_hexagon_2}
        \begin{aligned}
             & \ulposmap{((\braiding_{\Obja,\Objb}\mtimescat \catid_\Objc) \mthen \associator_{\Objb,\Obja,\Objc}\mthen (\catid_{\Objb}\mtimescat \braiding_{\Obja,\Objc}))}(\tup{\Objael,\Objbel},\Objcel) \\
             & =\bigsetunion_{\tup{\Objbel',\tup{\Objael',\Objcel'}}\setin \upit\makeset{\Objbel} \cartprod (\upit \makeset{\Objael}\cartprod \upit\makeset{ \Objcel})} \ulposmap{(\catid_{\Objb}\mtimescat \braiding_{\Obja,\Objc})}(\Objbel',\tup{\Objael',\Objcel'}) \\
             & =\bigsetunion_{\tup{\Objbel',\tup{\Objael',\Objcel'}}\setin \upit\makeset{\Objbel} \cartprod (\upit \makeset{\Objael}\cartprod \upit\makeset{ \Objcel})} \upit\makeset{\Objbel'}\cartprod (\upit\makeset{\Objcel'}\cartprod \upit\makeset{\Objael'}) \\
             & =\upit\makeset{\Objbel} \cartprod (\upit \makeset{\Objcel}\cartprod \upit\makeset{ \Objael}).
        \end{aligned}
    \end{equation}
    Let's now look at the right-hand side of \cref{eq:upos_hexagon_1}.
    One has
    \begin{equation*}
        \begin{aligned}
             & \ulposmap{\associator_{\Obja,\Objb,\Objc} \mthen \braiding_{\Obja,\Objb\mtimescat \Objc}}(\tup{\Objael,\Objbel},\Objcel) \\
             & =\bigsetunion_{\tup{\Objael',\tup{\Objbel',\Objcel'}}\setin \ulposmap{\associator}_{\Obja,\Objb,\Objc}(\tup{\Objael,\Objbel},\Objcel)}\ulposmap{\braiding}_{\Obja,\Objb\mtimescat\Objc}(\Objael',\tup{\Objbel',\Objcel'}) \\
             & =\bigsetunion_{\tup{\Objael',\tup{\Objbel',\Objcel'}}\setin \upit\makeset{\Objael} \cartprod (\upit \makeset{ \Objbel}\cartprod \upit\makeset{ \Objcel})} (\upit\makeset{\Objbel'} \cartprod \upit \makeset{ \Objcel'})\cartprod \upit\makeset{ \Objael'} \\
             & =(\upit\makeset{\Objbel} \cartprod \upit \makeset{ \Objcel})\cartprod \upit\makeset{ \Objael}.
        \end{aligned}
    \end{equation*}
    Furthermore, one has
    \begin{equation}
        \label{eq:upos_hexagon_3}
        \begin{aligned}
             & \ulposmap{(\associator_{\Obja,\Objb,\Objc} \mthen \braiding_{\Obja,\Objb\mtimescat \Objc}\mthen \associator_{\Objb,\Objc,\Obja})}(\tup{\Objael,\Objbel},\Objcel) \\
             & =\bigsetunion_{\tup{\tup{\Objbel',\Objcel'},\Objael'}\setin (\upit\makeset{\Objbel} \cartprod \upit \makeset{ \Objcel})\cartprod \upit\makeset{ \Objael}}\ulposmap{\associator}_{\Objb,\Objc,\Obja}(\tup{\Objbel',\Objcel'},\Objael') \\
             & =\bigsetunion_{\tup{\tup{\Objbel',\Objcel'},\Objael'}\setin (\upit\makeset{\Objbel} \cartprod \upit \makeset{ \Objcel})\cartprod \upit\makeset{ \Objael}}\upit\makeset{\Objbel'}\cartprod (\upit\makeset{\Objcel'}\cartprod \upit\makeset{\Objael'}) \\
             & =\upit\makeset{\Objbel} \cartprod (\upit \makeset{\Objcel}\cartprod \upit\makeset{ \Objael}).
        \end{aligned}
    \end{equation}
    Clearly, since \cref{eq:upos_hexagon_2} and \cref{eq:upos_hexagon_3} are equal, the first hexagon identity is checked.
    The second hexagon identity can be checked analogously.
\end{proof}

\begin{definition}[Trace in \UPos]
    \label{def:trace-UPos}
    Given a morphism~$\mora\colon \Obja \cartprod \Objc \mto \Objb\cartprod \Objc$ in \UPos, its trace in is defined as a morphism~$\Tr_{\Obja,\Objb}^{\Objc}(\mora)\colon \Obja \mto \Objb$, given by
    \begin{equation}
        \begin{aligned}
            \ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}\colon \Obja & \mto \uppersets \Objb \\
            \Objael                                                 & \mapsto \makeset{\Objbel \setin \Objb \mid \bigvee_{\Objcel \setin \Objc}\tup{\Objbel, \Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}.
        \end{aligned}
    \end{equation}
\end{definition}
\begin{lemma}
    \label{lem:UPos-is-traced}
    $\tup{\UPos,\mtimescat, \idmoncat,\braiding}$ equipped with the trace operation defined in \cref{def:trace-UPos} is a traced monoidal category.
\end{lemma}
\begin{proof}
    We have already checked that~$\tup{\UPos,\mtimescat, \idmoncat,\braiding}$ forms a symmetric monoidal category.
    First, we check that the trace indeed returns a valid morphism in \UPos.
    Given any~$\Obja,\Objb,\Objc\setin \Ob_{\UPos}$ and~$\mora\colon \Obja\cartprod \Objc \mto \Objb\cartprod \Objc$,
    and any~$\Objael\posleq \Objael'\setin \Obja$, we need to prove that
    \begin{equation*}
        \prfdouble{ \Tr_{\Obja,\Objb}^{\Objc}(\mora)(\Objael) \posleqof{\UPos}  \Tr_{\Obja,\Objb}^{\Objc}(\mora)(\Objael')}{\ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}(\Objael) \setsupseteq \ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}(\Objael')}
    \end{equation*}
    We know that~$\ulposmap{\mora}$ is a monotone map, meaning that
    \begin{equation*}
        \prftree{\tup{\Objbel,\Objcel} \setin \ulposmap{\mora}(\Objael',\Objcel)}{\tup{\Objbel,\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}
    \end{equation*}
    Therefore:
    \begin{equation*}
        \prftree{\Objbel \setin \ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}(\Objael')}{\Objbel \setin \ulposmap{\Tr_{\Obja,\Objb}^{\Objc}}(\mora)(\Objael)}
    \end{equation*}
    proving that~$\ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}$ is a monotone function.
    Furthermore, due to the monotonicity of~$\ulposmap{\mora}$, for any~$\Objbel\posleq \Objbel'\setin \Objb$,~$\Objael\setin \Obja$,~$\Objcel \setin \Objc$, one has:
    \begin{equation*}
        \prftree{\tup{\Objbel,\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}{\tup{\Objbel',\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}
    \end{equation*}
    proving that~$\ulposmap{\Tr_{\Obja,\Objb}^{\Objc}(\mora)}(\Objael)$ is an upper set for all~$\Objael\setin \Obja$.
    We now check the trace axioms one by one.

    \textbf{Naturality I}:
    Given any~$\Obja,\Obja',\Objb,\Objc \setin \Ob_{\UPos}$,~$\mora\colon \Obja\cartprod \Objc \mto \Objb\cartprod \Objc$, and~$\morb\colon \linebreak[0]\Obja'\mto \Obja$, one has:
    \begin{equation}
        \label{eq:natu-1-upos-a}
        \begin{aligned}
            \ulposmap{\Tr_{\Obja',\Objb}^{\Objc}((\morb\mtimescat \catid_\Objc)\mthen \mora)}(\Objael') & =
            \makesett{ \Objbel \setin \Objb \mid \bigvee_{\Objcel\setin \Objc} \tup{\Objbel,\Objcel}\setin (\ulposmap{(\morb \mtimescat \catid_\Objc)\mthen \mora)}(\Objael',\Objcel)} \\
                                                                                                        & =\makesett{ \Objbel \setin \Objb \mid \bigvee_{\Objcel\setin \Objc} \tup{\Objbel,\Objcel}\setin \bigsetunion_{\tup{\Objael,\Objcel'}\setin \ulposmap{\morb}(\Objael')\cartprod\upit\makeset{\Objcel}}\ulposmap{\mora}(\Objael,\Objcel')} \\
                                                                                                        & =\makesett{\Objbel \setin \Objb\mid \bigvee_{\Objcel\setin \Objc}\tup{\Objbel,\Objcel}\setin \bigsetunion_{\Objael\setin \ulposmap{\morb}(\Objael')} \ulposmap{\mora}(\Objael,\Objcel)}.
        \end{aligned}
    \end{equation}
    On the other hand, one has
    \begin{equation}
        \label{eq:natu-1-upos-b}
        \begin{aligned}
            \ulposmap{(\morb\mthen \Tr_{\Obja,\Objc}^{\Objc}(\mora))}(\Objael') & =
            \bigsetunion_{\Objael\setin \ulposmap{\morb}(\Objael')}\ulposmap{\Tr_{\Obja,\Objc}^{\Objc}(\mora)}(\Objael) \\
                                                                                & =\bigsetunion_{\Objael\setin \ulposmap{\morb}(\Objael')}\makesett{\Objbel \setin \Objb\mid \bigvee_{\Objcel\setin \Objc}\tup{\Objbel,\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)} \\
                                                                                & =\makesett{\Objbel \setin \Objb\mid \bigvee_{\Objcel\setin \Objc}\tup{\Objbel,\Objcel}\setin \bigsetunion_{\Objael\setin \ulposmap{\morb}(\Objael')} \ulposmap{\mora}(\Objael,\Objcel)}.
        \end{aligned}
    \end{equation}
    Clearly \cref{eq:natu-1-upos-a} and \cref{eq:natu-1-upos-b} are equivalent, proving the first naturality condition.

    \textbf{Naturality II}:
    Given any~$\Obja,\Objb,\Objb',\Objc \setin \Ob_{\UPos}$, $\mora\colon \Obja\cartprod \Objc \mto \Objb\cartprod \Objc$, and $\morb\colon \Objb\mto \Objb'$, one has:
    \begin{equation*}
        \begin{aligned}
            ~ & \ulposmap{\Tr_{\Obja,\Objb'}^{\Objc}(\mora \mthen (\morb \mtimescat \catid_\Objc))}(\Objael) \\
              & =
            \makesett{\Objbel'\setin \Objb' \mid \bigvee_{\Objcel\setin \Objc} \tup{\Objbel',\Objcel}\setin \ulposmap{(\mora \mthen (\morb \mtimescat \catid_\Objc))}(\Objael,\Objcel)} \\
              & =\makesett{ \Objbel'\setin \Objb'\mid \bigvee_{\Objcel\setin \Objc} \tup{\Objbel',\Objcel}\setin \bigsetunion_{\tup{\Objbel,\Objcel}\setin \ulposmap{\mapa}(\Objael,\Objcel)} \ulposmap{\morb}(\Objbel) \cartprod \upit\makeset{ \Objcel}}
        \end{aligned}
    \end{equation*}
    On the other hand
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\Tr_{\Obja,\Objb}^{\Objc}(\mora)\mthen \morb)}(\Objael) & =
            \bigsetunion_{\Objbel \setin \makeset{ \Objbel \setin \Objb \mid \bigvee_{\Objcel \setin \Objc}\tup{\Objbel,\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}}\ulposmap{\morb}(\Objbel)
        \end{aligned}
    \end{equation*}
    \todotext{Not clear yet how to massage to show equivalence.
        Talk with J}
    \textbf{Vanishing}:
    Given any~$\Obja,\Objb\setin \Ob_{\UPos}$ and~$\mora\colon \Obja \mto \Objb$ in \UPos, one has
    \begin{equation*}
        \begin{aligned}
            ~ & \ulposmap{\Tr_{\Obja,\Objb}^{\singleton}(\mora)}(\Objael) \\
              & =\makeset{\Objbel \setin \Objb \mid \tup{\Objbel,\singletonel}\setin \ulposmap{(\mora\mtimescat \catid_{\singleton})}(\Objael,\singletonel)} \\
              & =\ulposmap{\mora}(\Objael).
        \end{aligned}
    \end{equation*}
    Furthermore, given any~$\Obja,\Objb,\Objc,\Objd \setin \Ob_{\UPos}$ and~$\mora\colon \Obja \cartprod \Objc \cartprod \Objd\mto \Objb \cartprod \Objc \cartprod \Objd$, one has
    \begin{equation}
        \label{eq:vanish-upos-a}
        \begin{aligned}
            ~ & \ulposmap{\Tr_{\Obja,\Objb}^{\Objc\cartprod \Objd}(\mora)}(\Objael) \\
              & =\makesett{\Objbel \setin \Objb \mid \bigvee_{\tup{\Objcel,\Objdel}\setin \Objc\cartprod \Objd} \tup{\Objbel,\Objcel,\Objdel}\setin \ulposmap{\mora}(\Objael,\Objcel,\Objdel) }
        \end{aligned}
    \end{equation}
    To check the second vanishing axiom, we also write:
    \begin{equation*}
        \begin{aligned}
            ~ & \ulposmap{\Tr_{\Obja\cartprod \Objc,\Objb\cartprod \Objc}^{\Objd}(\mora)}(\Objael,\Objcel) \\
              & =\makesett{\tup{\Objbel,\Objcel}\setin \Objb\cartprod \Objc \mid \bigvee_{\Objdel\setin \Objd} \tup{\Objbel,\Objcel,\Objdel} \setin \ulposmap{\mora}(\Objael,\Objcel,\Objdel) }.
        \end{aligned}
    \end{equation*}
    Therefore, we can write:
    \begin{equation}
        \label{eq:vanish-upos-b}
        \begin{aligned}
            ~ &
            \ulposmap{\left(\Tr_{\Obja,\Objb}^{\Objc}\left(\Tr_{\Obja\cartprod \Objc,\Objb\cartprod \Objc}^{\Objd}(\mora)\right)\right)}(\Objael) \\
              & =
            \makesett{\Objbel \setin \Objb\mid \bigvee_{\Objcel \setin \Objc}\tup{\Objbel, \Objcel}\setin \ulposmap{\Tr_{\Obja\cartprod \Objc,\Objb\cartprod \Objc}^{\Objd}(\mora)}(\Objael,\Objcel)} \\
              & =\makesett{ \Objbel \setin \Objb\mid \bigvee_{\Objcel \setin \Objc}\tup{\Objbel, \Objcel}\setin \makesett{ \tup{\Objbel',\Objcel'}\setin \Objb\cartprod \Objc \mid \bigvee_{\Objdel\setin \Objd}\tup{\Objbel',\Objcel',\Objd}\setin \ulposmap{\mora}(\Objael,\Objcel',\Objdel)}} \\
              & =\makesett{ \Objbel \setin \Objb\mid \bigvee{\Objcel\setin \Objc}\left(\bigvee_{\Objdel \setin \Objd} \tup{\Objbel,\Objcel,\Objdel}\setin \ulposmap{\mora}(\Objael,\Objcel,\Objdel) \right)} \\
              & =\makesett{\Objbel \setin \Objb \mid \bigvee_{\tup{\Objcel,\Objdel}\setin \Objc\cartprod \Objd} \tup{\Objbel,\Objcel,\Objdel}\setin \ulposmap{\mora}(\Objael,\Objcel,\Objdel) }.
        \end{aligned}
    \end{equation}
    Clearly, \cref{eq:vanish-upos-a} and \cref{eq:vanish-upos-b} are equivalent, proving the second vanishing axiom.
    \textbf{Superposing}:
    Given any~$\Obja,\Objb,\Objc\setin \Ob_{\UPos}$ and~$\mora\colon \Obja\cartprod \Objc \mto \Objb \cartprod \Objc$, one has:
    \begin{equation}
        \label{eq:superposing-upos-a}
        \begin{aligned}
             & \ulposmap{\Tr_{\Objd\cartprod \Obja, \Objd\cartprod \Objb}^{\Objc}(\catid_\Objd \mtimescat \mora)}(\Objdel,\Objael) \\
             & =\makesett{ \tup{\Objdel, \Objbel}\setin \Objd \cartprod \Objb \mid \bigvee_{\Objcel \setin \Objc}\tup{\Objdel,\Objbel, \Objcel}\setin \ulposmap{(\catid_\Objd \mtimescat \mora)}(\Objdel,\Objael, \Objcel)} \\
             & =\makesett{ \tup{\Objdel, \Objbel}\setin \Objd \cartprod \Objb \mid \bigvee_{\Objcel \setin \Objc} (\Objdel \setin \ulposmap{\catid_\Objd}(\Objdel))\booland (\tup{\Objbel, \Objcel}\setin \ulposmap{\mora}(\Objael, \Objcel))} \\
             & =\makesett{ \tup{\Objdel, \Objbel}\setin \Objd \cartprod \Objb \mid \bigvee_{\Objcel \setin \Objc} (\Objdel \setin \upit \makeset{\Objdel})\booland (\tup{\Objbel, \Objcel}\setin \ulposmap{\mora}(\Objael, \Objcel))} \\
             & =\makesett{ \tup{\Objdel, \Objbel}\setin \upit\makeset{\Objdel} \cartprod \Objb \mid \bigvee_{\Objcel \setin \Objc}  \tup{\Objbel, \Objcel}\setin \ulposmap{\mora}(\Objael, \Objcel)} \\
             & =\upit\makeset{\Objdel}\cartprod \makesett{\Objbel \setin \Objb \mid \bigvee_{\Objcel \setin \Objc}  \tup{\Objbel, \Objcel}\setin \ulposmap{\mora}(\Objael, \Objcel)} \\
        \end{aligned}
    \end{equation}
    On the other hand, one has:
    \begin{equation}
        \label{eq:superposing-upos-b}
        \begin{aligned}
            \ulposmap{(\catid_\Objd \mtimescat \Tr_{\Obja,\Objb}^{\Objc}(\mora))}(\Objdel,\Objael) & =
            \upit\makeset{\Objdel}\cartprod\makesett{ \Objbel \setin \Objb \mid \bigvee_{\Objcel\setin \Objc}\tup{\Objbel,\Objcel}\setin \ulposmap{\mora}(\Objael,\Objcel)}.
        \end{aligned}
    \end{equation}
    Clearly, \cref{eq:superposing-upos-a} and \cref{eq:superposing-upos-b} are equivalent, proving the superposing axiom.

    \textbf{Yanking}:
    Consider~$\Obja\setin \Ob_{\UPos}$.
    One has
    \begin{equation*}
        \begin{aligned}
            ~ & \ulposmap{\Tr_{\Obja,\Obja}^{\Obja}(\braiding_{\Obja,\Obja})}(\Objael) \\
              & =\makeset{ \Objael'\setin \Obja \mid \bigvee_{\Objael''\setin \Obja}\tup{\Objael',\Objael''}\setin \ulposmap{\braiding}_{\Obja,\Obja}(\Objael,\Objael'')} \\
              & =\makeset{ \Objael'\setin \Obja \mid \bigvee_{\Objael''\setin \Obja}\tup{\Objael',\Objael''}\setin \upit\makeset{\Objael''}\cartprod \upit\makeset{ \Objael}} \\
              & =\makeset{ \Objael'\setin \Obja \mid \bigvee_{\Objael''\setin \Obja} (\Objael'\setin \upit\makeset{\Objael''}) \booland(\Objael'' \setin \upit\makeset{ \Objael})} \\
              & =\makeset{ \Objael'\setin \Obja \mid \Objael'\setin \upit\makeset{\Objael}} \\
              & =\upit \makeset{\Objael} \\
              & =\ulposmap{\catid}_\Obja(\Objael),
        \end{aligned}
    \end{equation*}
    proving the yanking axiom.
    \todotextjira{339}{@Gioele: S how UPos traced}
\end{proof}

\begin{definition}
    [Order on morphisms in~$\UPos$]
    \label{def:upos_order}
    Given any two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in~$\UPos$, we define an order between them as
    \begin{equation*}
        \prfperiod{\mora \posleqof\UPos \morb}{\ulposmap{\mora}(\Objael)\posleqof{\uppersets \Objb} \ulposmap{\morb}(\Objael), \quad \forall \Objael \setin \Obja}
    \end{equation*}
\end{definition}

\begin{definition}
    [Order on morphisms in~$\LPos$]
    \label{def:lpos_order}
    Given any two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in~$\LPos$, we define an order between them as
    \begin{equation*}
        \prfperiod{\mora \posleqof\LPos \morb}{\ulposmap{\mora}(\Objael)\posleqof{\lowersets \Objb} \ulposmap{\morb}(\Objael), \quad \forall \Objael \setin \Obja}
    \end{equation*}
\end{definition}

\begin{definition}
    [Intersection of morphisms in~$\UPos$]
    Given two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in \UPos, their \emph{intersection} (join) is a morphism~$\mora \meet \morb \colon \Obja \mto \Objb$, given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\mora \meet \morb)}\colon \Obja & \mto \uppersets \Objb \\
            \Objael                                    & \mapsto \ulposmap{\mora}(\Objael) \setintersection \ulposmap{\morb}(\Objael).
        \end{aligned}
    \end{equation*}
\end{definition}

\begin{definition}
    [Intersection of morphisms in~$\LPos$]
    Given two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in \LPos, their \emph{intersection} (meet) is a morphism~$\mora \meet \morb \colon \Obja \mto \Objb$, given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\mora \meet \morb)}\colon \Obja & \mto \lowersets \Objb \\
            \Objael                                    & \mapsto \ulposmap{\mora}(\Objael) \setintersection \ulposmap{\morb}(\Objael).
        \end{aligned}
    \end{equation*}
\end{definition}

\begin{definition}
    [Union of morphisms in~$\UPos$]
    Given two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in \UPos, their \emph{union} (join) is a morphism~$\mora \join \morb \colon \Obja \mto \Objb$, given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\mora \join \morb)}\colon \Obja & \mto \uppersets \Objb \\
            \Objael                                    & \mapsto \ulposmap{\mora}(\Objael) \setunion \ulposmap{\morb}(\Objael).
        \end{aligned}
    \end{equation*}
\end{definition}

\begin{definition}
    [Union of morphisms in~$\LPos$]
    Given two morphisms~$\mora,\morb\colon \Obja \mto \Objb$ in \LPos, their \emph{union} (join) is a morphism~$\mora \join \morb \colon \Obja \mto \Objb$, given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{(\mora \join \morb)}\colon \Obja & \mto \lowersets \Objb \\
            \Objael                                    & \mapsto \ulposmap{\mora}(\Objael) \setunion \ulposmap{\morb}(\Objael).
        \end{aligned}
    \end{equation*}
\end{definition}

\begin{lemma}
    \label{lem:UPos-is-bounded-lattice}
    Given any~$\Obja,\Objb\setin \Ob_\UPos$,~$\HomSet{\UPos}{\Obja}{\Objb}$ is a bounded lattice with union~$\join$ of morphisms in~$\UPos$ as join, intersection~$\meet$ of morphisms in \UPos as meet, least upper bound~$\postop_{\HomSet{\UPos}{\Obja}{\Objb}}\colon \Obja \mto \Objb$ given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\postop_{\HomSet{\UPos}{\Obja}{\Objb}}}\colon \Obja & \mto \uppersets \Objb \\
            \Objael                                                       & \mapsto \emptyset,
        \end{aligned}
    \end{equation*}
    and greatest lower bound~$\posbot_{\HomSet{\UPos}{\Obja}{\Objb}}\colon \Obja \mto \Objb$ given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\posbot_{\HomSet{\UPos}{\Obja}{\Objb}}}\colon \Obja & \mto \uppersets \Objb \\
            \Objael                                                       & \mapsto \Objb.
        \end{aligned}
    \end{equation*}
\end{lemma}
\begin{proof}
    First, we need to prove that~$\HomSet{\UPos}{\Obja}{\Objb}$ forms a poset.
    To prove this, we check the following, using the order defined in \cref{def:upos_order}
    \begin{itemize}
        \item \emph{Reflexivity:} Given~$\mora \setin \HomSet{\UPos}{\Obja}{\Objb}$, one can write
              \begin{equation*}
                  \ulposmap{\mora}(\Objael) \setsupseteq \ulposmap{\mora}(\Objael), \quad \forall \Objael \setin \Obja,
              \end{equation*}
              which implies~$\mora \posleqof{\UPos} \mora$.
        \item \emph{Antisymmetry:}
              Consider
              \begin{equation}
                  \mora,\morb \setin \HomSet{\UPos}{\Obja}{\Objb}
              \end{equation} with~$\mora \posleqof\UPos \morb$ and~$\morb \posleqof\UPos \mora$.
              We know
              \begin{equation*}
                  (\mora \posleqof\UPos \morb)
                  \implies \ulposmap{\mora}(\Objael) \setsupseteq \ulposmap{\morb}(\Objael), \quad \forall \Objael \setin \Obja,
              \end{equation*}
              but also
              \begin{equation*}
                  (\morb \posleqof\UPos \mora)
                  \implies \ulposmap{\morb}(\Objael) \setsupseteq \ulposmap{\mora}(\Objael), \quad \forall \Objael \setin \Obja,
              \end{equation*}
              implying~$\mora=\morb$.
        \item \emph{Transitivity:}
              Consider
              \begin{equation}
                  \mora,\morb,\morc \setin \HomSet{\UPos}{\Obja}{\Objb}
              \end{equation}
              with~$\mora \posleqof\UPos \morb$ and~$\morb \posleqof\UPos \morc$.
              One has, for all~$\Objael\setin \Obja$,
              \begin{equation*}
                  \begin{aligned}
                      (\ulposmap{\mora}(\Objael) \setsupseteq \ulposmap{\morb}(\Objael))
                      \wedge ( \ulposmap{\morb}(\Objael) \setsupseteq \ulposmap{\morc}(\Objael))
                       & \implies \ulposmap{\mora}(\Objael) \setsupseteq \ulposmap{\morc}(\Objael) \\
                       & \implies \mora \posleqof\UPos \morc.
                  \end{aligned}
              \end{equation*}
    \end{itemize}
    \todotext{Here, meet and join are swapped (wrt to symbols), because of the inverse order.
        Should we define them oppositely for UPos?
    }
    Consider now~$\mora,\morb \setin \HomSet{\UPos}{\Obja}{\Objb}$.
    Their least upper bound (join) is~$\mora \meet \morb$, since it is the least morphism such that~$\mora \posleqof\UPos (\mora \meet \morb)$ and~$\morb \posleqof\UPos (\mora \meet \morb)$.
    Their greatest lower bound (meet) is~$\mora \join \morb$, since it is the greatest morphism such that~$(\mora \join \morb)\posleqof\UPos \mora $ and~$(\mora \join \morb)\posleqof\UPos \morb$.
    \todotext{Discuss with J if we actually want to show explicitly ``greatest'' and ``lowest''}
    Furthermore, for any~$\mora \setin \HomSet{\UPos}{\Obja}{\Objb}$, one will have, for all~$\Objael \setin \Obja$
    \begin{equation*}
        \ulposmap{\mora}(\Objael) \setsupseteq \emptyset=\ulposmap{\postop_{\HomSet{\UPos}{\Obja}{\Objb}}}(\Objael),
    \end{equation*}
    implying that for all~$\mora \setin \HomSet{\UPos}{\Obja}{\Objb}$ one has~$\mora \posleqof\UPos \postop_{\HomSet{\UPos}{\Obja}{\Objb}}$.
    Finally, for any~$\mora \setin \HomSet{\UPos}{\Obja}{\Objb}$, one will have, for all~$\Objael \setin \Obja$
    \begin{equation*}
        \ulposmap{\posbot_{\HomSet{\UPos}{\Obja}{\Objb}}}(\Objael)=\Objb \setsupseteq \ulposmap{\mora}(\Objael)
    \end{equation*}
    implying that for all~$\mora \setin \HomSet{\UPos}{\Obja}{\Objb}$ one has~$\posbot_{\HomSet{\UPos}{\Obja}{\Objb}}\posleqof\UPos \mora$.
\end{proof}

\begin{lemma}
    \label{lem:LPos-is-bounded-lattice}
    Given any~$\Obja,\Objb\setin \Ob_\UPos$,~$\HomSet{\LPos}{\Obja}{\Objb}$ is a bounded lattice with intersection~$\wedge$ of morphisms in~$\LPos$ as meet, union~$\vee$ of morphisms in \LPos as join, least upper bound~$\postop_{\HomSet{\LPos}{\Obja}{\Objb}}\colon \Obja \mto \Objb$ given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\postop_{\HomSet{\LPos}{\Obja}{\Objb}}}\colon \Obja & \mto \lowersets \Objb \\
            \Objael                                                       & \mapsto \Objb,
        \end{aligned}
    \end{equation*}
    and greatest lower bound~$\posbot_{\HomSet{\UPos}{\Obja}{\Objb}}\colon \Obja \mto \Objb$ given by
    \begin{equation*}
        \begin{aligned}
            \ulposmap{\posbot_{\HomSet{\LPos}{\Obja}{\Objb}}}\colon \Obja & \mto \lowersets \Objb \\
            \Objael                                                       & \mapsto \emptyset.
        \end{aligned}
    \end{equation*}
\end{lemma}
\begin{proof}
    The proof is analogous to the one of \cref{lem:UPos-is-bounded-lattice}.
    Note that meets/joins and top/bottom are switched in meaning, because of the difference in order between~$\uppersets \Obja$ and~$\lowersets \Obja$.
\end{proof}

