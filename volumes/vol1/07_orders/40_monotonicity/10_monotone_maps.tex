% !TEX root = chapter-standalone.tex

\section{Monotone maps}
\label{sec:monotonicity-monotone-maps}

%\linkvideo{spring2021-functors:semi-and-fun:mon-functions} % Monotone functions
% \linkvideo{spring2021-functors:semi-and-fun:mon-functions:fun-req-mon} % Functionalities and requirements
\linkvideo{spring2021-functors:semi-and-fun:mon-functions:mon-on-pos} % Monotone functions on posets

A \SY{monotone map} is the generalization to \SY{posets} of a ``non-decreasing'' function on real numbers.
The function $x \mapsto \max(0, 42 x)$ is non-decreasing on the real numbers because
\begin{equation}\label{eq:monotone-eq-1}
    \prfdoubleperiod{
        x \leq y
    }{
        \max(0, 42 x) \leq \max(0, 42 y)
    }
\end{equation}
Note that we use ``$\leq$'' and not ``$<$''.
Non-decreasing is weaker than ``increasing''.

The definition of \SY{monotone function} on a \SY{poset} is the direct generalization of this concept; the only change is that we use the partial order rather than the total order on the reals.

\begin{definition}[Monotone map]
    \label{def:monotone}
    A \maindef{monotone map} between two \SY{posets}~$\posAdefinition$ and~$\posBdefinition$ is a map~$\mapa \colon \posAset \sto \posBset$ that preserves the ordering, in the sense that
    \begin{equation}\label{eq:monotone-map-definition}
        \prfperiod{
            \posela \posAleq \poselb
        }{
            \mapa(\posela) \posBleq \mapa(\poselb)
        }
    \end{equation}
\end{definition}
\showslides{
    \begin{forslides}
        \begin{equation}\label{eq:monotone-map-identity}
            \prfperiod{
                \posela \posAleq \poselb
            }{
                \posela \posAleq \poselb
            }
        \end{equation}
        \begin{equation}\label{eq:monotone-map-discrete-1}
            \prfdoubleperiod{
                \posela \posAleq \poselb
            }{
                \posela = \poselb
            }
        \end{equation}
        \begin{equation}\label{eq:monotone-map-discrete-2}
            \prfperiod{
                \posela \posAleq \posela
            }{
                \mora(\posela) \posAleq \mora(\posela)
            }
        \end{equation}
        \begin{equation}\label{eq:monotone-map-constant}
            \prfperiod{
                \posela \posAleq \poselb
            }{
                \poselc \posAleq \poselc
            }
        \end{equation}
    \end{forslides}
}

\begin{example}[The identity is monotone]
    Given a poset~\posA, the identity map $\catidat{\posAset}\colon \posAset \mto\linebreak[0] \posAset$ is monotone, since if~$\posela\posAleq \poselb$, then~$\mapidat{\posAset}(\posela)=\posela \posAleq \poselb = \mapidat{\posAset}(\poselb )$.
\end{example}

\begin{example}[Constant maps are monotone]
    Every constant map is monotone.
\end{example}

\begin{figure*}[b]
    \centering
    \includesag{40_dpcatfig_exmonotone}
    \caption{The cardinality map is a \SY{monotone map}. }
    \label{fig:cardinality}
\end{figure*}

\begin{example}[Cardinality map]\label{exa:cardinality}
    Consider the power \SY{poset} (\cref{def:power-poset}) $\powerposet\setA$ of a finite set \setA.
    The cardinality map
    \begin{equation}\label{eq:cardinality-map}
        \cardmap : \powerset\setA \sto \natnumbers
    \end{equation}
    is monotone when considered as a map from the \SY{poset} $\powerposet\setA$ to the \SY{poset} $\natswithleq$.
    % \begin{equation}
    %     \defmap{
    %         \cardmap
    %     }{
    %         \powerposet{\setA}
    %     }{
    %         \sto
    %     }{
    %         \tup{\natnumbers,\leq}
    %     }{
    %         \subA
    %     }{
    %         \vert\subA\vert
    %     }
    % \end{equation}
    % is monotone.
    \Cref{fig:cardinality} shows a visualization of this map for the set~$\setA=\makeset{\posela,\poselb,\poselc}$.
    To prove this, recall that in the power \SY{poset} subsets are ordered by inclusion.
    Therefore, we need to show that
    \begin{equation}\label{eq:cardinality}
        \prfdoubleperiod{
            \subA \setsubseteq \subB
        }{
            \cardof \subA \leq \cardof \subB
        }
    \end{equation}
    This is easy to see that, because all elements of $\subA$ are also in $\subB$, the cardinality of~$\subA$ cannot be more than the cardinality of~$\subB$.
    Monotonicity depends on the partial order used on the domain and the codomain.
    To indicate that a map is monotone, we write it indicating the two \SY{posets} as the domain/codomain:
    \begin{equation}\label{eq:cardinality-as-posmap}
        \cardmap \colon \tup{\powerset\setA, \setsubseteq} \mto \tup{\natnumbers, {{\Nleq}}}.
    \end{equation}
\end{example}
\showslides{
    \begin{forslides}
        \begin{equation}\label{eq:scalar-nondecreasing}
            \prftree{
                x \leq y
            }{
                \mora(x) \leq \mora(y)
            }
        \end{equation}

        \begin{equation}\label{eq:scalar-increasing}
            \prftree{
                x < y
            }{
                \mora(x) < \mora(y)
            }
        \end{equation}
    \end{forslides}
}

\begin{lemma}\label{lem:discrete-is-monotone}
    Consider a discrete poset~\posA and a poset~\posB.
    Any map~$\mapa \colon \posA\to \posB$ is monotone.
\end{lemma}
\newcommand{\samewidth}[1]{\makebox[3cm]{$#1$}}
\begin{proof}
    Since~\posA is a discrete poset, we have
    \begin{equation}
        \prfdoubleperiod{
            \posAnel{1}\posAleq \posAnel{2}
        }{
            \posAnel{1}=\posAnel{2}
        }
    \end{equation}
    Therefore, we have
    \begin{equation}
        \prfperiod{
            \prftree{
                \prftree[r]{
                    \quad($P$ discrete)
                }{
                    \samewidth{\posAnel{1}\posAleq \posAnel{2}}
                }{
                    \samewidth{\posAnel{1}=\posAnel{2}}
                }
            }{
                \samewidth{\mapa(\posAnel{1})=\mapa(\posAnel{2})}
            }
        }{
            \samewidth{\mapa(\posAnel{1})\posBleq \mapa(\posAnel{2})}
        }
    \end{equation}
\end{proof}
% Unless indicated otherwise, in this book all maps between \SY{posets} are assumed to be monotone or will turn out to be monotone.

\clearpage
\vfill
\begin{gradedexercise}[\exname{MonotoneMapCheck}]
    \label{ex:MonotoneMapCheck?}

    Prove your answers to the following questions.
    \begin{enumerate}
        \item Is the function $\mapa \colon \tup{\wnumbers, \leq} \to \tup{\wnumbers, \leq}, \ela \mapsto \ela^2$ monotone?
        \item Let $\setA = \makeset{a, b, c}$ and consider the posets $\tup{\powerset{\setA}, \subseteq}$ and $\tup{\natnumbers, \leq}$.
                Let $\mapa \colon \powerset{\setA} \to \natnumbers, \subA \mapsto \vert \subA \vert$ be the function which calculates the cardinality of any subset of $\setA$.
                Is $\mapa$ monotone?
        \item Consider the set of natural numbers which divide the number 36, equipped with the partial order ``$\preccurlyeq$'' such that $\ela \preccurlyeq \elb$ if and only if $\ela$ divides $\elb$.
                Call this poset $\posA = \tup{\posAset, \preccurlyeq}$, and let $\mapa \colon \posAset \to \makeset{\false, \true}$ be defined by
                \begin{equation}
                    \mapa(\ela) =
                    \begin{cases}
                        \true  & \text{ if } \ela \text{ is an even number, } \\
                        \false & \text{ if } \ela \text{ is an odd number.
                        }
                    \end{cases}
                \end{equation}
                Is $\mapa$ monotone if we equip $\makeset{\false, \true}$ with the usual partial order such that $\false \leq \true$?
    \end{enumerate}
\end{gradedexercise}
\solutionof{MonotoneMapCheck}

