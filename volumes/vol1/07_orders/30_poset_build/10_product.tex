% !TEX root = chapter-standalone.tex

\section{Product of posets}
%\linkvideo{spring2021-tradeoffs:tradeoffs:orders:composing-posets} % Composing posets
\linkvideo{spring2021-tradeoffs:tradeoffs:orders:composing-posets:product-poset} % Product of posets
Just like the product of sets, we can construct the product of \SY{posets}.
That is a \SY{poset} with the underlying set being the \SYN{set product}{product} of the underlying sets.

\begin{ctdefinition}[Product of posets]
    \label{def:poset-product}
    Given \SY{posets}~$\posAdefinition$ and~$\posBdefinition$, the \maindef{product poset}
    \begin{equation}\label{eq:productposet-1}
        \posA\Ptimes \posB=\tup{\posAset \cartprod \posBset, {{\posleqof{\posA\Ptimes \posB}}}},
    \end{equation}
    is the set~$\posAset \cartprod \posBset$ equipped with the order~$\posleqof{\posA \Ptimes \posB}$ given by
    \begin{equation}\label{eq:productposet-2}
        \prfdoubleperiod{
            \tup{\posAnel{1}, \posBnel{1}}
            \posleqof{\posA\Ptimes \posB}
            \tup{\posAnel{2}, \posBnel{2}}
        }{
            (\posAnel{1} \posAleq \posAnel{2})
            \booland
            (\posBnel{1} \posBleq \posBnel{2})
        }
    \end{equation}
\end{ctdefinition}

Recalling the battery choice example, we have the two \SY{posets} representing time and money.
Given that we want to minimize both time and costs, by considering the money \SY{poset} containing elements ``\poscheap'', ``\posmidrange'', and ``\posexpensive'', and the weight \SY{poset} containing elements ``\poslight'', and ``\posheavy'', we can represent the product as in~\cref{fig:productpizza}.

\begin{figure*}[h!]
    \centering
    \aligninner{\includesag{70_hasse_pizza_product}}
    \caption{Product \SY{poset} of time and weight for battery choices.}
    \label{fig:productpizza}
\end{figure*}

\begin{example}
    Consider now two \SY{posets} and their product, given in~\cref{fig:composing_posets_1}.
    \begin{figure*}[h!]
        \aligninner{
            \includesag{40_exposet_1_1}
        }
        \caption{Product of two \SY{posets}.}
        \label{fig:composing_posets_1}
    \end{figure*}
\end{example}
\vfill
\clearpage

\subsection{Measuring the product}
The following lemma gives expressions for the width and height of the product of two \SY{posets}.

\begin{widepar}
    \begin{lemma}
        \label{lem:measuring-product}
        If~$\posA,\posB$ are non-empty finite \SY{posets}, then we know the height of their product:
        \begin{equation}\label{eq:bound-height}
            \posetheight(\posA\Ptimes \posB) = \posetheight(\posA)+\posetheight(\posB)-1
        \end{equation}
        We can derive this bound for the width of the product:
        \begin{equation}\label{eq:bound-width}
            \posetwidth(\posA) \cdot \posetwidth(\posB)
            \leq \posetwidth(\posA\Ptimes \posB)
            \leq \min \makeset{
                \cardof \posAset  \cdot \posetwidth(\posB),\cardof \posBset   \cdot \posetwidth(\posA)
            }.
        \end{equation}
        This bound is tight, in the sense that there exist \SY{posets} that reach this bound.
    \end{lemma}
\end{widepar}

\begin{proof}
    The bound \cref{eq:bound-width} can be found in ~\cite{bezrukovantichains}.
    As for \cref{eq:bound-height}, we have the following proof.
    First, we can construct the longest \SY{chain} in~\posA:
    \begin{equation}
        \setA=\makeset{\posAnel{1},\ldots, \posAnel{\posetheight(\posA)}}.
    \end{equation}
    Furthermore, we can construct the longest \SY{chain} in~\posB:
    \begin{equation}
        \setB=\makeset{\posBel_1,\ldots, \posBnel{\posetheight(\posB)}}.
    \end{equation}
    Out of them, we can construct the \SY{chain} \begin{equation}
        \setC=\makeset{ \tup{\posAnel{1},\posBnel{1}}, \tup{\posAnel{2},\posBnel{1}},\ldots, \tup{\posAnel{\posetheight(\posA)}, \posBnel{1}}, \tup{\posAnel{\posetheight(\posA)}, \posBnel{2}},\ldots},
    \end{equation}
    which has height~$\posetheight(\posA)+\posetheight(\posB)-1$.
    So we know a lower bound for the height:
    \begin{equation}
        \posetheight(\posA\Ptimes \posB)\geq \posetheight(\posA)+\posetheight(\posB)-1.
    \end{equation}
    Now, consider a \SY{chain}~$\makeset{\tup{\posAnel{1},\posBnel{1}},\ldots, \tup{\posAnel{n},\posBnel{n}}}$ in~$\posA\Ptimes \posB$.
    In general, this means that at least a coordinate of~$\tup{\posAnel{i},\posBnel{i}}$ must increase in~$\tup{\posAnel{i+1},\posBnel{i+1}}$.
    The first coordinate can only increase by $\posetheight(\posA)-1$ times, and the second one by $\posetheight(\posB)-1$ times.
    Summing up, the total number of elements in the \SY{chain} is \emph{at most} $\posetheight(\posA)+\posetheight(\posB)-1$:
    \begin{equation}
        \posetheight(\posA\Ptimes \posB)\leq \posetheight(\posA)+\posetheight(\posB)-1.
    \end{equation}
    Because upper and lower bounds are the same, we have an exact expression for the height.
    Note that this result holds only assuming that~\posA and~\posB are not empty (for that case,~$\posetheight(\posA\Ptimes \posB)=0$).
\end{proof}
