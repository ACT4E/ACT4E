% !TEX root = ../ACT4E-devel-fast.tex
% !TEX root = ../ACT4E-devel-fast.tex

\surroundwithmdframed[
  backgroundcolor=none,
  topline=false,
  rightline=false,
  bottomline=false,
  leftmargin=-10pt,
  skipabove=0pt,
  skipbelow=0pt
]{proof}
%\surroundwithmdframed[
%  backgroundcolor=none,
%  topline=false,
%  rightline=false,
%  bottomline=false,
%  leftmargin=2pt,
%  skipabove=0pt,
%  skipbelow=0pt
%]{remark}
%\newenvironment{remark}{\textbf{Remark}}{\medskip}

\newlength{\mysep}
\setlength{\mysep}{2pt}

\newtheoremstyle{break}
  {\mysep} % space above (empty=default)
  {\mysep}% space below (empty=default
  {}% body font
  {}% Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries}% Thm head font
  {}% Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}% Thm head spec

% how to remove parentheses
%\makeatletter
%\def\thmhead@plain#1#2#3{%
%  \thmname{#1}\thmnumber{\@ifnotempty{#1}{ }\@upn{#2}}%
%  \thmnote{ {\the\thm@notefont#3}}}
%\let\thmhead\thmhead@plain
%\makeatother

\theoremstyle{definition}


\newtheorem{theorem}{Theorem}[chapter]
\newtheorem*{theorem*}{Theorem}

\newtheorem{proposition}[theorem]{Proposition}
\newtheorem*{proposition*}{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{lemma*}{Lemma}

\newtheorem*{problem}{Problem}
\newtheorem{remark}[theorem]{Remark}

\newtheorem{construction}[theorem]{Construction}
\newtheorem{example}[theorem]{Example}
\newtheorem{counterexample}[theorem]{Counter-example}

%\theoremstyle{remark}
\newtheorem*{warning}{Warning}
%\newtheorem{remark}[theorem]{Remark}
%\newtheorem{warning}[theorem]{Warning}

\theoremstyle{break}

\newtheorem{definition}[theorem]{Definition}
\newtheorem*{definition*}{Definition}



\surroundwithmdframed[
  backgroundcolor=LightGray!30,
  roundcorner=4pt,
    linewidth=0pt
]{definition}

\newtheorem{ctdefinition}[theorem]{Definition}

% \newenvironment{definition}
%    {\colorlet{shadecolor}{blue!25}\begin{shaded}\begin{protodefinition}} % light blue for lemmas only
%    {\end{protodefinition}\end{shaded}}
%\newenvironment{ctdefinition}
%{\colorlet{shadecolor}{LightBlue!50}\begin{shaded*}
%                                      \begin{protodefinition}} % light blue for lemmas only
%                                      {\end{protodefinition}
%\end{shaded*}}
%


\surroundwithmdframed[
  backgroundcolor=LightBlue!30,
  roundcorner=4pt,
    linewidth=0pt
]{ctdefinition}


% \newtheorem{ctdefinition}[theorem]{Definition}


\newenvironment{ctdefinitionshade}
{\colorlet{shadecolor}{LightBlue!50}\begin{shaded*}
}%
                                      {
\end{shaded*}}



\newcounter{exercise}[part]
% \newtheorem{protoexcercise}[exercise]{Exercise}
% \newcounter{exercisecounter}[part]
% \newtheorem{gradedexercise}[exercisecounter]{Graded exercise}
\newtheorem{gradedexercise}{Graded exercise}[part]

%
% \newenvironment{gradedexercise}
% {\colorlet{shadecolor}{LightGreen!50}\begin{shaded*}
%                                       \begin{protogradedexcercise}} %
%                                       {\end{protogradedexcercise}
% \end{shaded*}}



\surroundwithmdframed[
  backgroundcolor=LightGreen!30,
  roundcorner=4pt,
    linewidth=0pt
]{gradedexercise}


\newenvironment{body}{\par}{}
\newtheorem{codeexercise}{Code exercise}[part]

% \newtheorem{codeexercise}[exercisecounter]{Code exercise}
%
% \newenvironment{codeexercise}
% {\colorlet{shadecolor}{LightGreen!50}\begin{shaded*}
%                                       \begin{protocodeexercise}} %
%                                       {\end{protocodeexercise}
% \end{shaded*}}


\surroundwithmdframed[
  backgroundcolor=LightGreen!30,
  roundcorner=4pt,
    linewidth=0pt
]{codeexercise}


\newenvironment{gradedsolution}
{\colorlet{shadecolor}{LightPink!20}\begin{shaded*}}{\end{shaded*}}




% We cannot do this if we put figures inside of examples.
% \surroundwithmdframed[
%   topline=false,
%   rightline=false,
%   bottomline=false,
%   %leftmargin=\parindent,
%   %skipabove=\medskipamount,
%   %skipbelow=\medskipamount
% ]{example}

\newcommand{\classlisting}[1]{%
\begin{longcode}
\centering%
\caption{The \classname{#1} interface.}%
\vspace{-0.5cm}
\label{lst:#1}%
\classsource{#1}{}%
\end{longcode}%
}

\newcommand{\solutionof}[1]{%
\instructors{%
    \IfFileExists{\rootdir/ACT4E-solutions/CatProductPowerSet.tex}{
        \IfFileExists{\rootdir/ACT4E-solutions/#1.tex}{
            \input{\rootdir/ACT4E-solutions/#1.tex}
        }{
            \textbf{You need to create file ACT4E-solutions/#1.tex}
        }
    }{
        \textbf{You need to checkout the repo ACT4E-solutions}
    }
}%
}


\newcommand{\linkvideo}[1]{%
    \input{\rootdir/videos/generated/#1/watch}%
}


%
\newcommand{\watch}[5]{%
\marginnote{
    \centering
    \href{#1}{Watch: \emph{#2} (#3).}\\
    \href{#1}{\fbox{\includegraphics[height=2.5cm]{#4}}}\\%
    \href{#1}{\includegraphics[height=2cm]{#5}}%
}%
}

\newcommand{\publictodomessage}{%
    \begin{publictodo}
        We are working on this section, and more content will appear.
    \end{publictodo}%
}
\newcommand{\missingsolution}{%
    \begin{publictodo}
        Solution is missing.
    \end{publictodo}%
}

\newcommand{\missingproof}{%
    \begin{publictodo}
        Proof is missing.
    \end{publictodo}%
}
\newcommand{\aligninner}[1]{
    \Ifthispageodd{%
           #1
            \hfill
        }{%
            \hfill
            #1
        }%
}

% https://ethidsc.atlassian.net/browse/ACT4EBOOK-264
\newenvironment{publictodo}
{
    \begin{marginfigure}[+5mm]
        \aligninner{%
            \includegraphics[width=0.8cm]{construction-cone}
        }
    \end{marginfigure}
    \colorlet{shadecolor}{yellow!50}
    \begin{shaded*}%
}%
{%
    \end{shaded*}%
}
\newcommand{\wrapit}[1]{%
#1
% \adjustbox{scale=0.9}{#1}%
}
\newcommand{\todographics}[1]{\wrapit{\todo[color=red!70]{#1}}}
\newcommand{\todotext}[1]{\wrapit{\todo[color=red!50]{#1}}}
\newcommand{\todostructure}[1]{\wrapit{\todo[color=red!10]{#1}}}

\newcommand{\todojira}[2]{\todo{\href{https://ethidsc.atlassian.net/jira/software/c/projects/ACT4EBOOK/issues/ACT4EBOOK-#1}{ACT4EBOOK--#1}: #2}}
\newcommand{\todographicsjira}[2]{\todographics{\href{https://ethidsc.atlassian.net/jira/software/c/projects/ACT4EBOOK/issues/ACT4EBOOK-#1}{ACT4EBOOK--#1}: #2}}
\newcommand{\todostructurejira}[2]{\todostructure{\href{https://ethidsc.atlassian.net/jira/software/c/projects/ACT4EBOOK/issues/ACT4EBOOK-#1}{ACT4EBOOK--#1}: #2}}
\newcommand{\todotextjira}[2]{\todotext{\href{https://ethidsc.atlassian.net/jira/software/c/projects/ACT4EBOOK/issues/ACT4EBOOK-#1}{ACT4EBOOK--#1}: #2}}



\makeatletter
\newcommand{\iflabelexists}[2]{%
    \ifthenelse{\boolean{devel}}{%
        \@ifundefined{r@#1}{%
            \todotext{label #1 not defined}%
            #2%
        }{#2}%
    }{%
       \@ifundefined{r@#1}{}{#2}%
    }%
}
\newcommand{\iflabeldoesnotexist}[2]{%
    \@ifundefined{r@#1}{%
        #2%
    }{}%
}
\makeatother







\newenvironment{forslides}{\colorlet{shadecolor}{Pink!50}\begin{shaded*}%
\textbf{This content was created for slides. Do not erase or change the names}.\\%
                                      }{\end{shaded*}}

%%%%%%%%%%%%%%%%%%%%
% Fail the compilation if using \XXX in non-devel
%
\AtBeginDocument{
    \ifthenelse{\boolean{devel}}{
        \newcommand{\XXX}{{\color{red}XXX}\xspace}
    }{
        \def\XXX{
        \PackageError{ACT4E}{You have included XXX in a non-devel version.}{We interrupt compilation.}
        }
    }
}
\newcommand{\citeXXX}{{\color{red}[cite]}\xspace}



% \def\parttoc{{\color{red} disabled because of kaobook}}
% \def\minitoc{{\color{red} disabled because of kaobook}}


%%%%%%%%%%%%%%%%%%%%
% Abbreviations for prf
%
\newcommand{\prfdouble}{\expandafter\prftree[double]}
\newcommand{\prfcomma}{\expandafter\prftree[r]{\raisebox{3pt}{,}}}
\newcommand{\prfperiod}{\expandafter\prftree[r]{\raisebox{3pt}{.}}}
\newcommand{\prfdoublecomma}{\expandafter\prftree[double][r]{\raisebox{3pt}{,}}}
\newcommand{\prfdoubleperiod}{\expandafter\prftree[double][r]{\raisebox{3pt}{.}}}

%%%%%%%%%%%%%%%%%%%%
% Line breaks in formulas
%
\makeatletter
\def\@insertbreakingcomma{%
  \ifnum\@tempcnta = 0\else,\linebreak[1]\fi%
  \advance\@tempcnta\@ne%
}

\newcommand{\makeset}[1]{%
  \@tempcnta=0
  % {\color{formulasetcolor} \{}
    \{%
  \@for\@ii:=#1\do{%
    \@insertbreakingcomma%
    \@ii%
  }%
  % {\color{formulasetcolor} \}}
    \}%
}


\newcommand{\tupp}[1]{%
  \@tempcnta=0%
    \langle%
  \@for\@ii:=#1\do{%
    \@insertbreakingcomma%
    \@ii%
  }%
    \rangle%
}
\makeatother

\newcommand{\lb}{\linebreak[1]} % allow linebreak in formula
\newcommand{\com}{,\linebreak[1] }% Use this as a comma that can have a line break after

% \makeatletter
% % Centered captions for all floats
%
% % Settings for paragraphs in the margins
% \renewcommand{\@margin@par}{%
% 	\centering% justify text
% 	\setlength{\RaggedRightParindent}{0em}% Suppress indentation
% 	\setlength{\parindent}{0em}% Suppress indentation
% 	\setlength{\parskip}{0.5pc}% Set the space between paragraphs
% 	%\singlespacing% Set the space between lines
% 	\frenchspacing% No additional space after periods
% 	\normalfont% Use the default font
% 	\footnotesize% Use a smaller size
% }
%
% \makeatother
% Centered contents for margintable
%
% \RenewDocumentEnvironment{margintable}{o}{%
%   \FloatBarrier
%   \marginskip{\kaomarginskipabove}%
%   \begin{lrbox}{\@sidenotes@margintablebox}%
% 	\begin{minipage}{\marginparwidth}%
% 	  \captionsetup{type=table}%
%       \centering
% }{%
%     \end{minipage}%
%   \end{lrbox}%
%   \marginnote[#1]{\usebox{\@sidenotes@margintablebox}}%
%   \marginskip{\kaomarginskipbelow}%
% }


\AtBeginDocument{
    \renewcommand\theequation{\arabic{equation}}
    \renewcommand\thefigure{\arabic{figure}}

}
