% !TEX root = ../../ACT4E-full.tex
\usepackage{xr}

%
\RedeclareSectionCommand[
  beforeskip=10pt,
  afterskip=10pt,
%  headings=normal,
%  style=chapter% no part page
]{part}


%\usepackage{scrpage2}  %<---
\usepackage{scrlayer-scrpage}
\usepackage[table,svgnames]{xcolor}


\usepackage{pdfpages}
\setlength\parindent{0pt}
\setlength\parskip{3pt}
% used for printing 400 page book
% \usepackage[width=6in, height=9in, top=1.8cm,  bottom=0.8cm,  outer=0.8cm, inner=2.0cm]{geometry}
% used for printing on feb14 (soft + hardcover)
%\usepackage[width=6in, height=9in, top=1.95cm,  bottom=0.95cm,  outer=1.1cm, inner=1.4cm]{geometry}

% trying to go 8x10
\usepackage[width=8.125in, height=10.250in, top=1.95cm,  bottom=0.95cm,  outer=1.8cm, inner=1.6cm]{geometry}

% showframe shows the useful margins
% I wish it to make it gray but cannot
% find the way
% https://tex.stackexchange.com/questions/164521/change-color-pitch-line-style-of-showframe-geometry-package

\pagenumbering{arabic}

\renewcommand{\thepart}{\Alph{part}}


\usepackage{fancyvrb}
\newcommand{\outsnippet}[3]{
  \UseVerbatim{#1}
}


\usepackage[backend=bibtex]{biblatex}
\addbibresource{dpcatbib.bib}



\usepackage{ifthen}
\usepackage{iftex}
\usepackage{ifxetex}
\ifxetex
\else
\usepackage[utf8]{inputenc}
\fi

\usepackage{subcaption}

\usepackage{blkarray, array}




\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{lipsum}
\usepackage{xspace}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb} % conflict with mathdesign
\usepackage{mathtools}
\usepackage{multirow}



\usepackage{comment}
\usepackage{accents}
\usepackage[style=russian]{csquotes}


\usepackage{ebproof}
\usepackage{units}
\usepackage{paralist}


\usepackage[%
  pdftitle={Applied Compositional Thinking for Engineers},
  pdfkeywords={Applied Category Theory},
  colorlinks = true,
  linkcolor = black,
  citecolor = darkblue,
  urlcolor  = darkblue]{hyperref}
\usepackage{framed}


\usepackage[obeyFinal]{todonotes} % after xcolor
\presetkeys{todonotes}{inline}{}

\usepackage[capitalize]{cleveref}
\usepackage{pgfplots}
\pgfplotsset{compat=1.16}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{graphicx}

% Note we need to add also relative paths for the tiks in sag to compile independently .
\graphicspath{
    {figures/},
    {../figures/},
    {pics/},
    {../pics/},
    {slides/},
    {../slides/},
    {figures/reits/},
    {../figures/reits/},
    {figures/firstpaper/},
    {../figures/firstpaper/},
    {figures/uncertainty/},
    {../figures/uncertainty/},
    {papers/uncertainty/},
    {../papers/uncertainty/},
    {},
    {../}}
\usepackage{adjustbox}

% means all figures need to be placed before next section starts


\usepackage[section]{placeins}
\usepackage{eso-pic}
\usepackage{capt-of}
\usepackage{wrapfig}
\usepackage[normalem]{ulem}
\usepackage{newclude}
\usepackage{refstyle}

% \usepackage{breqn}


\usepackage[shortlabels]{enumitem}
\setitemize{noitemsep,topsep=0pt,parsep=0pt,partopsep=0pt}
\setenumerate{noitemsep,topsep=0pt,parsep=0pt,partopsep=0pt}

%%%% FONTS
\usepackage{stix}
\usepackage{skull} % skull
% \usepackage{fdsymbol} % heart, spades, ...
% \usepackage{txfonts}
% \usepackage{mathrsfs} % conflict with mathdesign
\usepackage{stmaryrd}
\usepackage{pifont}
% \usepackage[utopia]{mathdesign} % conflict with mathrsfs



\usepackage{relsize}
\providecommand{\tabularnewline}{\\}
\providecommand{\acronym}[1]{\textsc{#1}\xspace}


%%%%%%%%%%%%%%%%%%%%% Typography / fonts




\ifxetex
% \usepackage{fontspec}
% \usepackage[protrusion=true,tracking=false,kerning=false,spacing=false]{microtype}
\usepackage[protrusion=true,tracking=false,kerning=false,spacing=false]{microtype}
\else

\usepackage[tracking=true,kerning=true,spacing=true,final]{microtype}

% This is the most stretched...
% \usepackage[activate={true,nocompatibility},tracking=false,kerning=true,spacing=true,stretch=30,final,babel,factor=1100]{microtype}
\pdfprotrudechars=2
\pdfadjustspacing=2
% \newfontfeature{Microtype}{protrusion=default;expansion=default;}
% \directlua{fonts.protrusions.setups.default.factor=.5}

\fi

% % cache the tikz
%\usetikzlibrary{external}
%\tikzexternalize[prefix=tikz-cache/]


\usepackage{makeidx}
\makeindex

%\usepackage{breqn}


\usepackage{minitoc}
\usepackage{import}


%\usepackage{fontawesome}
%\def\faBtc{\FA\symbol{"F15A}}
%\usepackage{eurosym}
%\let\EUR\relax



\newcommand{\pointsize}{0.06}

\newboolean{statuscolors}
\newboolean{instructors}
\newboolean{bookversion}
\newboolean{debugimages}
\newboolean{cachepdf}
\newboolean{devel}% print devel stuff

\newboolean{codeexercises}
\usepackage{longtable}

%% Formatting operations %%
%\newcommand{\instructors}[1]{\ifthenelse{\boolean{instructors}}{%
%    {\color{instructors} \hfill \rule{0.3\textwidth}{1pt} \hfill  $\downarrow$ instructors only $\downarrow$ \hfill  \rule{0.3\textwidth}{1pt} \hfill  } %
%  #1%
%{\color{instructors} \hfill \rule{0.3\textwidth}{1pt} \hfill  $\uparrow$ instructors only $\uparrow$ \hfill  \rule{0.3\textwidth}{1pt} \hfill  } %
%}{}}

\newcommand{\instructors}[1]{\ifthenelse{\boolean{instructors}}{%
    {\color[rgb]{0,0,0.3}\sffamily
  #1
%  \pagecolor{LightGreen!20}
%  \clearpage
%\pagecolor{white}
  }
}{}}

\newcommand{\book}[1]{\ifthenelse{\boolean{bookversion}}{#1}{}}
\newcommand{\devel}[1]{\ifthenelse{\boolean{devel}}{#1}{}}


\newcommand{\codeexercises}[1]{\ifthenelse{\boolean{codeexercises}}{#1}{}}

% Typesetting


\newcommand*{\vcenteredhbox}[1]{\begingroup
\setbox0=\hbox{#1}\parbox{\wd0}{\box0}\endgroup}

\newcommand{\captionsideleft}[2]{
  \medskip
  \begin{minipage}{1.8cm}{
    \hfill
    \protect\captionof{figure}{#1}}\end{minipage}
  \begin{minipage}{6.6cm}
    \vcenteredhbox{{#2}}
    \hfill
  \end{minipage}
  \medskip
}



\newcommand{\chapterfirst}[3]{
  \vfill%
  \begin{minipage}{\textwidth}%
    #3%
  \end{minipage}%
  \vfill%
  \par%
  \minitoc%
  \par%
  \vfill%
  \includegraphics[width=\textwidth]{#1}
  \par%
  \smallskip%
  \begin{minipage}{\textwidth}%
    \small #2%
  \end{minipage}%
  \vfill
  \clearpage%
}
%
%\newcommand{\partfirst}[3]{
%  \vfill%
%  \begin{minipage}{\textwidth}%
%    #3%
%  \end{minipage}%
%  \vfill%
%  \par%
%  \parttoc%
%  \par%
%  \par%
%  \smallskip%
%  \begin{minipage}{\textwidth}%
%    \small #2%
%  \end{minipage}%
%  \vfill
%  \clearpage%
%}


\newcommand{\partfirstb}[4]{
  \vfill%
  \begin{minipage}{\textwidth}%
    #1%
  \end{minipage}%
  \vfill%
  \includegraphics[width=\textwidth]{#2}
  \par%
  \smallskip%
  \begin{minipage}{\textwidth}%
    \small #3%
  \end{minipage}%
  \vfill
  \newpage
  #4
  \par%
  \vfill
  \parttoc%
  \clearpage%
}

\newcommand{\tableColors}{\rowcolors{2}{green!4}{blue!4}}
\newcommand{\tableColorsTwo}{\rowcolors{3}{green!4}{blue!4}}
\newcommand{\dpiconwidth}{1.5cm}


\newcommand{\nomencsectionname}[1]{\rule{0pt}{4mm}\textbf{#1}}
\newcommand{\nomencsubsectionname}[1]{\rule{0pt}{4mm}\emph{#1}}
\newcommand{\unused}{{\color{red}unused}~}


\captionsetup[subtable]{font={rm,md,sc,footnotesize},position=top}
\captionsetup[figure]{font=small,position=bottom}
%\setlength{\abovecaptionskip}{0pt}
%\setlength{\belowcaptionskip}{0pt}
%
%\setlength{\columnsep}{10pt}
%\setlength{\intextsep}{2pt}
%



\crefname{definition}{Def.}{Defs.}
\Crefname{definition}{Def.}{Defs.}


\crefname{proposition}{Prop.}{Prop.}
\Crefname{proposition}{Prop.}{Prop.}

% only make equations ref say (1) rather than Eq. (1)
\crefformat{equation}{(#2#1#3)}

\usepackage{bbding}

% make compact part-level tocs
\renewcommand{\beforeparttoc}{\empty}
\renewcommand{\afterparttoc}{\empty}
\renewcommand{\ptctitle}{\empty}

\makeatletter
\def\@endpart{ }

\makeatother
