\section{Functors}

\subsection{A poset as a category}
\label{sec:posetsarecats}
A single poset $\tup{P, \leq}$ can be described as a category, in which
each point $p\in P$ is an object, and there is a morphism between
$p$ and $q$ if and only if $p \leq q$. This is a ``thin'' category, which means that there is at most one morphism
between two objects: For any $p,q\in P$, there exist only one relation $p\leq q$ in $P$ (\cref{def:poset}). The identity morphism is given by the reflexivity property of posets, i.e. for any $p\in P$, $p\leq p$. Furthermore, composition is given by the transitivity property of posets, i.e. for $p,q,r \in P$, $p\leq q$ and $q\leq r$ implies $p\leq r$.

\begin{example}
Let's revisit \cref{ex:hasseinclusion}, in which we had a poset $\powerset\left(\{a,b,c\}\right)$ with order given by the inclusion (\cref{fig:posetascat}).
\begin{figure}[h!]
\begin{center}
\includesag{40_dpcatfig_power}
\end{center}
\caption{Power set $\powerset{\{a,b,c\}}$ as a category. \label{fig:posetascat}}
\end{figure}
This is a category $\CatC$, with $\ObC=\powerset\left(\{a,b,c\}\right)$ and morphisms given by the inclusion. Note that we omit to draw self-arrows for the identity morphisms. Composition is given by the transitivity of the poset. Note, for instance, that since $\{a\}\subseteq \{a,b\}$ and $\{a,b\} \subseteq \{a,b,c\}$, we can say $\{a\}\subseteq \{a,b,c\}$.
\end{example}


\subsection{Functors}
\begin{shaded}
\begin{definition}[Functor]
\label{def:functor}
Given categories $\CatC$ and $\CatD$, to specify a \emph{functor} $F\colon \CatC\to \CatD$ from $\CatC$ to $\CatD$, one specifies:
\begin{compactenum}
    \item for every object $c\in \ObC$, an object $F(c)\in \ObD$;
    \item for every morphism $f\colon c_1\to c_2$ in $\CatC$, a morphism $F(f)\colon F(c_1)\to F(c_2)$ in $\CatD$.
\end{compactenum}
The above constituents must satisfy the following two properties:
\begin{compactenum}[(a)]
    \item For every object $c\in \ObC$, one has $F(\id_c)=\id_{F(c)}$.
    \item For every three objects $c_1,c_2,c_3 \in \ObC$ and two morphisms $f\in \CatC(c_1,c_2)$, $g\in \CatC(c_2,c_3)$, the equation 
    \begin{equation}
        F(f\then g)=F(f)\then F(g)
    \end{equation}
holds in $\CatD$.
\end{compactenum}
\end{definition}

\begin{remark}
A functor from a category to itself it is called an \emph{endofunctor}.
\end{remark}

\begin{definition}[Full and faithful functors]
\label{def:functorfullfaith}
A functor $F\colon \CatC \to \CatD$ is \emph{full} (respectively \emph{faithful}) if for each pair of objects $x,y\in \CatC$, the function
\begin{equation}
    F\colon \CatC(x,y)\to \CatD(F(x),F(y))
\end{equation}
is surjective (respectively injective).
\end{definition}
\end{shaded}

\begin{lemma}
\label{lemma:posetfunctor}
A monotone function $F$ between posets $P,Q \in \Pos$ is a functor between the poset categories $P$ and $Q$.
\end{lemma}
\begin{proof}
We start by specifying the functor $F$ by specifying its action on objects (elements of a poset) and on morphisms (order relation). A monotone function maps each element of a poset $p\in P$ to $F(p) \in Q$, and, given two posets $P$ and $Q$, it guarantees that for $p_1,p_2\in P$, $F(p_1),F(p_2)\in Q$,  $p_1\leq p_2$ implies $f(p_1)\leq f(p_2)$. We now need to check the two functor properties. First, consider the identity morphism for $p\in P$, namely $p\leq p$. The application of the functor results in the condition $f(p)\leq f(p)$, which is the identity morphism on $Q$. Finally, given three elements $p_1,p_2,p_3\in P$ and two morphisms $p_1\leq p_2$ and $p_2\leq p_3$, by applying the functor to the morphism composition $p_1\leq p_3$ one obtains $F(p_1)\leq F(p_3)$, which is the same as $F(p_1)\leq F(p_2)$ and $F(p_2)\leq F(p_3)$.
\end{proof}

\begin{shaded}
\begin{definition}[Opposite category]
\label{def:oppositecat}
Given a category $\CatC$, the \emph{opposite category} $\CatC\op$ has the same objects as $\CatC$, but a morphism $f\colon x\to y$ in $\CatC\op$ is the same as a morphism $f\colon y\to x$ in $\CatC$. Furthermore, a composite of morphisms $f\then g$ in $\CatC\op$ is the composite $g\then f$ in $\CatC$.
\end{definition}
\end{shaded}

\begin{example}[Opposite of a poset]
    The \emph{opposite} of a  poset $\langle A, \leq \rangle $ is the poset $\langle A\op, \leq\op\rangle $ that has the same elements as~$A$ and the reverse ordering (\cref{fig:opposite}).
    For a given~$x \in A$, we use~$x^*$ to represent its corresponding copy in~$A\op$;
    note that~$x$ and~$x^*$ are distinct.
    Reversing the order means that, for all $x,y\in A$,
    \begin{equation}
        x \leq y \quad \Leftrightarrow \quad y^* \leq\op x^*.
    \end{equation}
    \begin{figure}[tbh]
   \centering
   \includesag{40_dpcatfig_opposite}
   \caption{Opposite of a poset.\label{fig:opposite}}
\end{figure}
Since a poset is a category, this is an example of the above definition. Consider $\CatC$ representing any poset. We can think of $(\cdot)\op$ as an endofunctor of the form
\begin{equation}
    (\cdot)\op\colon \CatC \to \CatC\op,
\end{equation}
which preserves objects (i.e., every object $A \in \CatC$ is mapped to $A^*\in \CatC\op$), and maps each morphism $f\colon A\to B$ in $\CatC$ to a morphism $f'\colon B\to A$ in $\CatC\op$. This is a functor:
\begin{itemize}
    \item For any object $A$, the identity morphism $\id_A\colon A\to A$ in $\CatC$ is itself, i.e. it is mapped to $\id_A'\colon A\to A$, meaning that $(\id_A)\op=\id_{(A)\op}=\id_A$.
    \item Given two morphisms $a\leq b$, $b\leq c$ in $\CatC$, one has
    \begin{equation}
        \begin{aligned}
        (a\leq_{\CatC} c)\op &=c\leq_{\CatC\op} a\\
        &=(b\leq_{\CatC\op} a)\wedge (c\leq_{\CatC\op}b)\\
        &=(a\leq_{\CatC} b)\op \wedge (b\leq_{\CatC} c)\op.
        \end{aligned}
    \end{equation}
\end{itemize}
\end{example}

\begin{example}[Credit and debt]
   Let us define the set $\text{USD}=\{\$0.00,\$0.01,\$0.02,\dots\}$
   of all US dollars monetary quantities approximated to the cent.
   From this set we can define two posets: $\text{USD}^{+} = \tup{\text{USD}, \leq}$ and $\text{USD}^{-} = \tup{\text{USD}, \geq}$, that are the opposite of each other.
   If the context is that, given two quantities~$\$1$ and~$\$2$,
   we prefer~$\$1$ to~$\$2$ (for example because it is a cost to pay to acquire a component), then we are working in~$\text{USD}^{+}$,
   otherwise we are working in~$\text{USD}^{-}$ (for example
   because it represents the price at which we are selling our product).

   Traditionally, in double-entry ledger systems, the numbers were not
   written with negative signs, but rather in color: red and black.
   From this convention we get the idioms ``being in the black''
   and ``being in the red''.
\end{example}

\begin{lemma}
The functor $\Pos \to \Set$ is a forgetful functor.
\end{lemma}
\begin{proof}
This functor maps every poset to the set which has the same elements, but no notion of order. Furthermore, it maps each monotone map between posets to the corresponding function between sets. This is a forgetful functor in the sense that it forgets the notion of order and monotone maps.
\end{proof}

\begin{shaded}
\begin{definition}[Product category]
Given two categories $\CatC$ and $\CatD$, one defines the \emph{product category} $\CatC \times \CatD$ to be the category specified as follows:
\begin{compactenum}
    \item \emph{Objects}: Objects are pairs $\tup{c,d}$, with $c\in \CatC$ and $d\in \CatD$.
    \item \emph{Morphisms}: Morphisms are pairs of morphisms $\tup{f,g}\colon \tup{c,d}\to \tup{c',d'}$, with $f\colon c\to c'$, $g\colon d\to d'$.
    \item \emph{Composition of morphisms}: The composition of morphisms is given by composing each component of the pair separately, i.e. $\tup{f,g}\then \tup{f',g'}=\tup{f\then f',g\then g'}$. 
\end{compactenum}
\end{definition}
\end{shaded}
\begin{example}
Consider two posets $P,Q$ as categories. The product poset $P\times Q$ (\cref{def:productposet}) is the product category of the two posetal categories.
\end{example}

\begin{shaded}
\begin{definition}[Profunctor]
\label{def:profunctor}
Given two categories $\CatC$ and $\CatD$, a \emph{profunctor} from $\CatC$ to $\CatD$ is a functor of the form
\begin{equation}
    H\colon \CatD\op \times \CatC \to \Set.
\end{equation}
\end{definition}
\begin{remark}
One calls a profunctor $H\colon \CatD\op \times \CatC \to \Bool$ a \emph{boolean profunctor} or a \emph{feasibility relation}.
\end{remark}
\end{shaded}




%%%%%%%%
\clearpage
\section{Staring at Pareto fronts}

\subsection{Chains and Antichains} \label{sec:chains-antichains}


\begin{definition}[Chain in a poset]
\label{def:chain}
Given a poset $S$, a \emph{chain} is a sequence of elements ${s_i}$ in~$S$ where two successive elements are comparable, i.e.:
\begin{equation}
    i \leq j \Rightarrow s_i \leq s_j.
\end{equation}
\end{definition}

 
\begin{definition}[Antichain in a poset]
\label{def:antichain}
An \emph{antichain} is a subset $S$ of a poset where no elements are comparable. If $a,b \in S$, then $a \leq b$ implies $a=b$.
\end{definition}
\begin{remark}
We denote the set of antichains of a poset $P$ by $\antichains P$.
\end{remark}
\begin{remark}
Note that given a poset $\tup{P,\leq}$, $\emptyset \in \antichains P$ since $\emptyset$ contains no elements (and hence no comparable elements).
\end{remark}

In the context of pizza recipes, consider the diagram reported in~\cref{fig:antichain}. The blue points represent an antichain of recipes $\{\tup{\unit[1]{USD},\unit[2]{h}},\tup{\unit[2]{USD},\unit[1]{h}}\}$, i.e. recipes which do not dominate each other (one is cheaper but takes longer and the other is more expensive but quicker). The red point represents a recipe which cannot be part of the antichain, since it is dominated by $\tup{\unit[2]{USD},\unit[1]{h}}$. 

\begin{figure}[h!]
\begin{center}
\includesag{70_antichain}
\end{center}
\caption{Example of an antichain of pizza recipes. \label{fig:antichain}}
\end{figure}


\begin{example}
Let's consider the poset $\tup{P,\leq}$ where $a\leq b$ if $a$ is a divisor of $b$ and $P=\{1,5,10,11,13,15\}$. A chain of $P$ is $\{1,5,10,15\}$. An antichain of $P$ is $\{10,11,13\}$.
\end{example}

\begin{example}
Consider \cref{ex:hasseinclusion}. Examples of chains are 
\begin{equation}
    \{\varnothing,\{a\},\{a,b\},\{a,b,c\}\}, \quad  \{\varnothing,\{b\},\{b,c\},\{a,b,c\}\}.
\end{equation}
Examples of antichains are
\begin{equation}
    \{\{a\},\{b\},\{c\}\}, \quad \{ \{a,b\},\{a,c\}, \{b,c\}\}.
\end{equation}
\end{example}

\begin{example}
\label{ex:battery}
Suppose you have to choose a battery model based on its cost and its weight, both to be minimized. There may be models which dominate others. For instance, a model $\tup{\unit[10]{USD},\unit[1]{kg}}$ is always better than a model $\tup{\unit[11]{USD},\unit[1.1]{kg}}$. Also, there may be models which are incomparable, i.e. which form an antichain. For example, you cannot say whether $\tup{\unit[10]{USD},\unit[1]{kg}}$ is better than  $\tup{\unit[5]{USD},\unit[2]{kg}}$. The incomparable models form an antichain.
\end{example}

\subsection{Upper and lower sets}

\begin{definition}[Upper set]
\label{def:upperset}
An \emph{upper set} is a subset $U$ of a poset $P$ such
that, if an element is inside, all elements above it are inside as well.
In formulas:
\begin{equation}
\text{$U$ is an upperset} \equiv \forall x\in U, \forall y\in P\colon x\leq y \Imp y\in U.
\end{equation}
\end{definition}
\begin{remark}
We call $\mathsf{U}P$ the set of upper sets of $P$.
\end{remark}



\begin{definition}[Lower set]
\label{def:lowerset}
A \emph{lower set} is a subset $L$ of a poset $P$ if, if a point is inside, all points below it are inside as well. In formulas:
\begin{equation}
\text{$L$ is a lower set} \equiv \forall x\in L, \forall y\in P\colon y\leq x \Imp y\in L.
\end{equation}
\end{definition}
\begin{remark}
We call $\mathsf{L}P$ the set of lower sets of $P$.
\end{remark}

\begin{remark}
Note that if $A$ is an antichain of a poset $P$, then the set
\begin{equation}
    I(A)=\{x\colon x\leq y, y\in A\}
\end{equation}
is a lower set of $P$.
\end{remark}



Consider the blue poset of pizza recipes from before. The upper and lower sets of this poset can be represented as in~\cref{fig:upperset}. The upper set can be interpreted as all the potential pizza recipes for which we can find better alternatives in the poset. Similarly, the lower set can be interpreted as all the potential pizza recipes which would be better than the ones in the poset.

\begin{figure}[h!]
\begin{center}
\includesag{70_upper_lower_set}
\end{center}
\caption{Example of upper and lower sets of a poset of pizza recipes. \label{fig:upperset}}
\end{figure}
\begin{example}[Upper and lower sets in $\Bool$]
The booleans $\{\false, \true \}$ form a poset with $\false \leq \true:(\Bool,\leq)$ . The subset $\{\false\} \subseteq \Bool$ is not an upper set, since $\false \leq \true$ and $\true \notin \{\false \}$.	
\end{example}

\begin{lemma}
$\UR$ is a bounded lattice (\cref{def:lattice}) with
\begin{equation}
    \{\UR,\leq_{\UR},\bot_{\UR},\top_{\UR},\vee_{\UR},\wedge_{\UR}\}=\{\UR,\supseteq,R,\emptyset,\cap,\cup\}.
\end{equation}
\begin{proof}
Consider the poset $\tup{\UR,\supseteq}$ and $P,Q\in \UR$. 
\begin{itemize}
    \item First, we need to show that $P\cap Q\in \UR$. One has $P \subseteq \UR$ and $Q\subseteq \UR$, meaning that by definition, if $x\in P\cap Q$, we have $x\in P \wedge x\in Q$. It follows that $x\in \UR$ for all $x\in P\cap Q$. Furthermore, we need to show that $P\cap Q$ is the least upper bound of $P,Q$. Assume this is not true, i.e. there exists a $T\in \UR$, $T\neq P\cap Q$, such that $P\supseteq T\supseteq P\cap Q$ and $Q\supseteq T\supseteq P\cap Q$. Using the fact that intersection preserves inclusions, one has
\begin{equation}
\begin{aligned}
    P\cap Q &\supseteq T\cap T \supseteq P\cap Q\\
    P\cap Q &\supseteq T \supseteq P\cap Q\\
    T&= P\cap Q,
\end{aligned}
\end{equation}
which contradicts the assumption. Therefore, $P\cap Q$ is the least upper bound of $P,Q$.
\item Second, we need to show that $P\cup Q\in \LF$. One has $P\subseteq \UR$ and $Q\subseteq \UR$, meaning that by definition, if $x\in P\cup Q$, we have either $x\in P$ or $x\in Q$. If $x\in P$, then $x\in \UR$. If $x\in Q$, then $x\in \UR$. It follows that $x\in \UR$ for all $x\in P\cup Q$.  Furthermore, we need to show that $P\cup Q$ is the greatest lower bound of $P,Q$. Assume this is not true, i.e. there exists a $T\in \UR$, $T\neq P\cup Q$, such that $P\cup Q\supseteq T\supseteq P$ and $P\cup Q\supseteq T\supseteq Q$. Using the fact that union preserves inclusions, one has
\begin{equation}
    \begin{aligned}
    (P\cup Q)\cup (P\cup Q) &\supseteq T \cup T \supseteq P\cup Q\\
    P\cup Q &\supseteq T\supseteq P\cup Q\\
    T&=P\cup Q,
    \end{aligned}
\end{equation}
which contradicts the assumption.  Therefore, $P\cup Q$ is the greatest lower bound of $P,Q$.
\end{itemize}
We have therefore proved that $\tup{\UR,\supseteq}$ is a lattice. To show that it is bounded, we notice that $\emptyset \subseteq T$ for any $T\in \UR$, meaning that $\emptyset$ is the top. Furthermore, we notice that $T\subseteq R$ for any $T\in \UR$, meaning that $R$ is a bottom. Therefore, the lattice is bounded.
\end{proof}
\end{lemma}

\begin{lemma}
$\LF$ is a bounded lattice (\cref{def:lattice}) with 
\begin{equation}
    \{\LF,\leq_{\LF},\bot_{\LF},\top_{\LF},\vee_{\LF},\wedge_{\LF}\}=\{\LF,\subseteq,\emptyset,F,\cup,\cap\}.
\end{equation}
\end{lemma}
\begin{proof}
Consider the poset $\tup{\LF,\subseteq}$ and $P,Q\in \LF$.
\begin{itemize}
    \item First, we need to show that $P\cup Q\in \LF$. One has $P \subseteq \LF$ and $Q\subseteq \LF$, meaning that by definition, if $x\in P\cup Q$, either $x\in P$ or $x\in Q$. If $x\in P$, then $x\in \LF$. If $x\in Q$, then $x\in \LF$. It follows that $x\in \LF$ for all $x\in P\cup Q$. Furthermore, we need to show that $P\cup Q$ is the least upper bound of $P,Q$. Assume this is not true, i.e. there exists a $T\in \LF$, $T\neq P\cup Q$, such that $P\subseteq T\subseteq P\cup Q$ and $Q\subseteq T\subseteq P\cup Q$. Using the fact that union preserves inclusions, one has
\begin{equation}
\begin{aligned}
    P\cup Q &\subseteq T\cup T \subseteq P\cup Q\\
    P\cup Q &\subseteq T \subseteq P\cup Q\\
    T&= P\cup Q,
\end{aligned}
\end{equation}
which contradicts the assumption. Therefore, $P\cup Q$ is the least upper bound of $P,Q$.
\item Second, we need to show that $P\cap Q\in \LF$. One has $P\subseteq \LF$ and $Q\subseteq \LF$, meaning that by definition, if $x\in P\cap Q$, we have $x\in P\wedge x\in Q$, i.e. $x\in \LF$, for all $x\in P\cap Q$. Furthermore, we need to show that $P\cap Q$ is the greatest lower bound of $P,Q$. Assume this is not true, i.e. there exists a $T\in \LF$, $T\neq P\cap Q$, such that $P\cap Q\subseteq T\subseteq P$ and $P\cap Q\subseteq T\subseteq Q$. Using the fact that intersection preserves inclusions, oen has
\begin{equation}
    \begin{aligned}
    (P\cap Q)\cap (P\cap Q) &\subseteq T \cap T \subseteq P\cap Q\\
    P\cap Q &\subseteq T\subseteq P\cap Q\\
    T&=P\cap Q,
    \end{aligned}
\end{equation}
which contradicts the assumption.  Therefore, $P\cap Q$ is the greatest lower bound of $P,Q$.
\end{itemize}
We have therefore proved that $\tup{\LF,\subseteq}$ is a lattice. To show that it is bounded, we notice that $\emptyset \subseteq T$ for any $T\in \LF$, meaning that $\emptyset$ is the bottom. Furthermore, we notice that $T\subseteq F$ for any $T\in \LF$, meaning that $F$ is a top. Therefore, the lattice is bounded. 
\end{proof}

\subsection{From antichains to uppersets and viceversa}
\begin{definition}[Upper closure operator]
\label{def:upperclosure}
The \emph{upper closure operator} $\uparrow$ maps a subset to the smallest upper set that includes it, i.e.:
\begin{equation}
    \begin{aligned}
    \uparrow \colon \powerset(P)&\to \mathsf{U}P\\
    S&\mapsto \{y\in P \mid \exists x\in S \colon x\leq y\}.
    \end{aligned}
\end{equation}
\end{definition}
\begin{remark}
Note that, by definition, an upper set is closed to upper closure.
\end{remark}

\begin{lemma}
The upper closure operator $\uparrow$ is a monotone map.
\end{lemma}
\begin{proof}
Consider the posets $\tup{\powerset(P),\subseteq}$ and $\tup{\mathsf{U}P,\supseteq}$, and $S_1,S_2\in \powerset(P)$. It is clear that given $S_1\subseteq S_2$, one has
\begin{equation}
    \{y\in P\mid \exists x\in S_1\colon x\leq y\} \supseteq \{y\in P\mid \exists x\in S_2\colon x\leq y\}.
\end{equation}
Therefore, $\uparrow S_1\supseteq \ \uparrow S_2$, satisfing the monotonicity property for $\uparrow$.
\end{proof}

In the example of the pizza recipes, first, consider the upper set of a single element of the poset, e.g. $p_1=\tup{\unit[1]{USD},\unit[2]{h}}$  (\cref{fig:upperclosure_1}).
\begin{figure}[h!]
\begin{center}
\includesag{70_upper_closure_1}
\end{center}
\caption{The upper closure of a singleton set of pizza recipes. \label{fig:upperclosure_1}}
\end{figure}
Furthermore, consider the case of two elements, with $p_2=\tup{\unit[2]{USD},\unit[1]{h}}$ (\cref{fig:upperclosure_2}).

\begin{figure}[h!]
\begin{center}
    \includesag{70_upper_closure_2}
\end{center}
\caption{The upper closure of a set of pizza recipes. \label{fig:upperclosure_2}}
\end{figure}
Note that the upper set of the subset formed by the two elements is the union of the upper sets of the single elements.


\begin{definition}[Lower closure operator]
The \emph{lower closure operator} $\downarrow$ maps a subset to the smallest lower set that includes it, i.e.
\begin{equation}
    \begin{aligned}
    \downarrow\colon \powerset(P)&\to \mathsf{L}P\\
    S&\mapsto \{ y\in P \mid \exists x\in S \colon y\leq x\}.
    \end{aligned}
\end{equation}
\end{definition}

\begin{lemma}
The lower closure operator $\downarrow$ is a monotone map.
\end{lemma}
\begin{proof}
Consider the posets $\tup{\powerset(P),\subseteq}$ and $\tup{\mathsf{L}P,\subseteq}$, and let $S_1,S_2\in \powerset(P)$. It is clear that given $S_1\subseteq S_2$, one has
\begin{equation}
    \{y\in P\mid \exists x\in S_1\colon y\leq x\} \subseteq \{y\in P\mid \exists x\in S_2\colon y\leq x\}.
\end{equation}
Therefore, $\uparrow S_1\subseteq \ \uparrow S_2$, satisfing the monotonicity property for $\downarrow$.
\end{proof}

\begin{definition}[Min]
\label{def:Min}
$\Min \colon \powerset(P) \to \antichains P$ is the map that sends a subset $S$ of a poset to the minimal elements of that subset, i.e., those elements $a \in S$ such that $a \leq b$ for all $b \in S$. In formulas:
\begin{equation}
    \begin{aligned}
    \Min \colon \powerset(P) &\to \antichains P\\
    S&\mapsto \{ x\in S\colon (y\in S)\wedge(y\leq x)\Rightarrow (x=y)\}.
    \end{aligned}
\end{equation}
Note that $\antichains P$ could be empty.
\end{definition}

\begin{definition}[Max]
\label{def:Max}
$\Max \colon \powerset(P) \to \antichains P$ is the map that sends a subset $S$ of a poset to the maximal elements of that subset, i.e., those elements $a \in S$ such that $a \geq b$ for all $b \in S$. In formulas:
\begin{equation}
    \begin{aligned}
    \Max \colon \powerset(P) &\to \antichains P\\
    S&\mapsto \{ x\in S\colon (y\in S)\wedge(y\geq x)\Rightarrow (x=y)\}.
    \end{aligned}
\end{equation}
Note that $\antichains P$ could be empty.
\end{definition}


\begin{definition}[Downward closed set]
\label{def:downward-closed-upperset}
An upper set $S$ is \emph{downward-closed} in a poset $P$ if
\begin{equation}
    S =\, \uparrow \Min S.
\end{equation}
\end{definition}
\begin{remark}
The set of downward-closed upper sets of $P$ is denoted $\underline{\mathsf{U}}P$.
\end{remark}

\begin{example}
Consider the battery example of~\cref{ex:battery}, and the antichain given by the battery models $a=\tup{\unit[10]{USD},\unit[1]{kg}}$, $b=\tup{\unit[20]{USD},\unit[0.5]{kg}}$, and $c=\tup{\unit[30]{USD},\unit[0.25]{kg}}$ (\cref{fig:examplebatt}).
The upper closure $\uparrow \{a,b,c\}$ represents all the existing battery models dominated by elements in $\{a,b,c\}$. The lower closure uperator $\downarrow\{a,b,c\}$ represents all the battery models which, if existing, would dominate $\{a,b,c\}$.
\begin{figure}[h!]
\begin{center}
    \includesag{70_battery_1}
\end{center}
\caption{Battery example. From the left: antichain, upper set, and lower set. \label{fig:examplebatt}}
\end{figure}
\end{example}

\begin{lemma}
Given a poset $\tup{P,\leq}$, $\tup{\antichains P,\leq_{\antichains P}}$ is a poset with
\begin{equation}
\label{eq:orderantichain}
    A\leq_{\antichains P} B \text{ if and only if } \uparrow A \supseteq \ \uparrow B.
\end{equation}
Furthermore, it is bounded by the top $\top_{\antichains P}=\emptyset$ and the bottom $\bot_{\antichains P}=\{\bot_P\}$.
\end{lemma}

\begin{proof}
We need to show the poset properties (\cref{def:poset}).
We can prove the following:
\begin{compactitem}
\item \emph{Reflexivity}: From $\tup{P,\leq}$ being a poset we know that 
\begin{equation}
\{y\in P \mid \exists x\in A \colon x\leq y\} \supseteq \{y\in P \mid \exists x\in A \colon x\leq y\},
\end{equation}
and hence $A\leq_{\antichains P}A$.
\item \emph{Antisymmetry}: One has
\begin{equation}
    \begin{aligned}
    \left(A\leq_{\antichains P} B\right) \wedge \left(B\leq_{\antichains P} A\right)
    &\Leftrightarrow \left(\uparrow A \supseteq \ \uparrow \ B\right) \wedge \left( \uparrow  B\supseteq \ \uparrow \ A\right)\\
    &\Leftrightarrow A=_{\antichains P} B.
    \end{aligned}
\end{equation}
\item \emph{Transitivity}: One has
\begin{equation}
    \begin{aligned}
    \left(A\leq_{\antichains P} B\right) \wedge \left(B\leq_{\antichains P} C\right)&\Leftrightarrow  \left(\uparrow A \supseteq \ \uparrow \ B\right) \wedge \left( \uparrow  B\supseteq \ \uparrow C\right)\\
    &\Imp \ \uparrow A\supseteq \ \uparrow C\\
    &\Imp A\leq_{\antichains P}C.
    \end{aligned}
\end{equation}
In order to find the top, we need to find the smallest set $\top_{\antichains P}$ such that $A\leq_{\antichains P} \top_{\antichains P} $ for all $A\in \antichains P$. In other words, the smallest set such that $\uparrow A\supseteq \ \uparrow \top_{\antichains P}$ for all $A\in \antichains P$. This is clearly $\emptyset$, since $\uparrow \emptyset = \emptyset$. Similarly, in order to find the bottom, we need to find the set $\bot_{\antichains P}$ such that $\bot\leq_{\antichains P} A$ for all $A\in \antichains P$. In other words, the largest set such that $\uparrow \bot_{\antichains P} \supseteq \ \uparrow A$ fof all $A\in \antichains P$, which is by definition $\bot_P$. 
\end{compactitem}
\end{proof}