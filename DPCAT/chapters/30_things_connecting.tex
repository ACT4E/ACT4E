% !TEX root = ../CategoricalCoDesign.tex
\section{Thinking about how things connect to each other}
The $\mathbf{Curr}$ category was a good example of how one can use category theory to think about things transforming into each other. In this section, we want to think about how things connect to each other.
\subsection{Trekking}
\label{sec:trekking}
Consider geographical locations expressed through coordinates $\tup{x,y}\in \mathbb{R}^2$. Furthermore, consider a map $\mathsf{alt}$ which, for a known location, returns its altitude (assuming a smooth terrain function):
\begin{equation}
 \mathsf{alt}: \left \{
    \begin{aligned}
    \mathbb{R}^2 \to & \ \mathbb{R}_{\geq 0} \\
    \tup{x,y} \mapsto & a.
    \end{aligned}
\right .
\end{equation}
Consider a human which can traverse trails with a maximum inclination of $\alpha>0$ when going up and $\beta>0$ when going down a trail. We can think about this as a category, call it $\mathbf{trek}$, where objects are geographical locations $\tup{x,y}\in \mathbb{R}^2$ and morphisms are continuous paths between them. The identity morphism for each location consists of the trivial path (i.e. not moving), and composition is given by concatenation of paths. We can now think of the aforementioned human, wanting to go from a location $\tup{x,y}$ to a location $\tup{v,w}$. Finding a path consists of finding at least a morphism in $\Hom_\mathbf{trek}(\tup{x,y},\tup{v,w})$ satisfying the condition on the maximum inclinations $\alpha$ and $\beta$.

\todo{Eventually, make an example by taking altimetry of a famous zone, and compute reachability paths from certain points.}


Using the terminology from Section [INSERT REF], we can see that $\mathbf{trek}$ is the free category on a graph with vertices given by geographical locations $\tup{x,y}\in \mathbb{R}^2$ and arrows given by paths between them. In particular, a valid path $p\colon \tup{x,y}\mapsto \tup{v,w}$ for the human to be able to reach a destination, has not to exceed the maximum inclination $\alpha$ when going up and the maximum inclination $\beta$ when going down.


\subsection{Mobility}

For a specific mode of transportation, say a car, we can define a graph $G_\mathrm{c}=(V_\mathrm{c},A_\mathrm{c},s_\mathrm{c},t_\mathrm{c})$, where $V_\mathrm{c}$ represents geographical locations which the car can reach in a city and $A_\mathrm{c}$ represents the paths it can take (e.g. roads). \GZ{add how graphs are defined, with source target as well}. Similarly, consider a graph $G_\mathrm{s}=(V_\mathrm{s},A_\mathrm{s},s_\mathrm{s},t_\mathrm{s})$, representing the subway system of a city, with stations $V_\mathrm{s}$ and subway lines going through paths $A_\mathrm{s}$. In the following, we want to express intermodality, e.g. someone reaching a certain intermediate location in a car and then deciding to take the subway to reach the final destination. By considering the graph $G=(V,A,s,t)$, with $V=V_\mathrm{c}\cup V_\mathrm{s}$ and $A=A_\mathrm{c}\cup A_\mathrm{s}$, one obtains the desired intermodality graph. $G$ can be seen as a new category, with objects $V$ and morphisms $A$.
\begin{example}
Consider the car category, describing your road trip in California, with $V_\mathrm{c}=\{\mathsf{SFO},\mathsf{S.}\ \mathsf{Mateo},\mathsf{Half} \ \mathsf{Moon}\ \mathsf{Bay},\mathsf{SBP},\mathsf{Lake}\ \mathsf{Balboa},\mathsf{LAX}\}$ and arrows as in~\cref{fig:carcat}.

\begin{figure}[h!]
\begin{center}
\includesag{30_carcategory}
\end{center}
\caption{The car category. \label{fig:carcat}}
\end{figure}

Furthermore, consider the flight category with $V_\mathrm{f}=\{\mathsf{SFO},\mathsf{SJC},\mathsf{SBP},\mathsf{LAX}\}$ and arrows as in~\cref{fig:subcat}.


\begin{figure}[h!]
\begin{center}
\includesag{30_flight}
\end{center}
\caption{Flight category. \label{fig:subcat}}
\end{figure}
The union of the two, which we call the \emph{intermodal graph}, can be represented as a graph, with \textcolor{red}{red} arrows for the car network, \textcolor{blue}{blue} arrows for the flight network (\cref{fig:intermodal}), and black dashed arrows for intermodal morphisms (arising from composition of morphisms involving more modes).

\begin{figure}[h!]
\begin{center}
\includesag{30_intermodal}
\end{center}
\caption{Intermodal graph. The dashed arrows represent intermodal morphisms, and we depict just one of them for simplicity. \label{fig:intermodal}}
\end{figure}
\end{example}

\GZ{Notion of union of graphs and then take the category generated by that?}

\JL{The following doesn't quite make mathematical sense. I think we need to figure out what we want to say (and why) or just omit this.}
\noindent This concept is formalized and generalized in category theory with the union of categories

\GZ{Union of graphs. Cannot take the union!}
\begin{shaded}
\begin{definition}[Union of categories]
Given two categories $\CatC,\CatD$, one can create the \emph{union} $\Cat{E}$ of the two, which is composed of:
\begin{compactenum}
\item \emph{Objects:} $\Ob_\Cat{E}=\Ob_\CatC \cup \Ob_\CatD$.
\item \emph{Morphisms:} A morphism $f$ is given by considering the followng. If $f\in \Hom_\CatC(X,Y)$, then $f\in \Hom_\Cat{E}(X,Y)$. If $f\in \Hom_\CatD(X,Y)$, then $f\in \Hom_\Cat{E}(X,Y)$.
\item \emph{Identity morphism:} For any morphism in $\Cat{E}$, the identity morphism remais the same as in the original category.
\item \emph{Composition operation}: The composition of morphisms remains the same.
\end{compactenum}
\end{definition}
\end{shaded}

%\subsection{Generating categories from graphs}
%What we sketched is the previous sections has deeper roots. In the following, we will introduce the concept of \emph{free categories on graphs}.
%
%\begin{shaded}
%\begin{definition}[Free category on a graph]
%Consider any graph $G=(V,A,s,t)$. We can define a category $\mathbf{Free}(G)$, called the \emph{free category on $G$}. Its objects are the vertices $V$, and given vertices $a\in V$ and $b\in V$, the morphisms $\mathbf{Free}(G)(a,b)$ are the paths from $a$ to $b$. 
%%A path is a sequence of ``consecutive'' edges, \text{i.e.} the source of a subsequent edge is equal to the target of its predecessor. We also formally allow for ``empty paths'', \text{i.e.} a sequence of "zero"-many edges which starts and ends at the same vertex. 
%The identity morphism $id_a$ is defined to be the empty path starting and ending at a vertex $a \in V$, and composition of morphisms is given by concatenation of paths.
%\end{definition}
%\end{shaded}
%
%
%With these two new definitions, we can see that $\mathbf{trek}$ is the free category on a graph with vertices given by geographical locations $\tup{x,y}\in \mathbb{R}^2$ and arrows given by paths between them. In particular, a valid path $p\colon \tup{x,y}\mapsto \tup{v,w}$ for the human to be able to reach a destination, has not to exceed the maximum inclination $\alpha$ when going up and the maximum inclination $\beta$ when going down.

\subsection{The category $\Set$}


\begin{shaded}
\begin{definition}[Category $\Set$]
    The category $\Set$ is defined by:
    \begin{compactenum}
    \item \emph{Objects}: The objects of this category are all sets.
    \item \emph{Morphisms}: The morphisms between any pair of sets $X, Y$
    are maps from $X$ to $Y$.
    \item \emph{Identity morphism}: The identity morphism for the set $X$
    is the identity function $\text{Id}_X$.
    \item \emph{Composition operation}: The composition operation is function
    composition.
    \end{compactenum}
\end{definition}
\end{shaded}

Note that $\Set$ is precisely defined by the four points above. However, there are categories where the objects are sets, but which differ from $\Set$ in the morphisms.
\begin{example}
\label{ex:hasseinclusion}
Given a set $X=\{a,b,c\}$, consider its power set $\powerset(X)$. Define sets as the objects of this new category and define the morphisms to be inclusions (\cref{fig:powersetcat}).
\begin{figure}[h!]
\begin{center}
\includesag{40_dpcatfig_power}
\end{center}
\caption{Power set as a category. \label{fig:powersetcat}}
\end{figure}
The identity morphism of each set is the inclusion with itself (every set is a subset of itself). Composition is given by composition of inclusions, i.e. if $X\subseteq Y \subseteq Z$, then $X\subseteq Z$. This is a category which has sets as objects, but which is different from $\Set$.
\end{example}
\GZ{Find nice examples here}