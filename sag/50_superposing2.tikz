\begin{tikzpicture}[oriented WD, bb min width =.7cm, bby=2ex, bbx=.7cm,bb port length=3pt]
  \node[bb port sep=.8, bb={2}{2}, bb name={$f$}] (Loop) {};
  \draw[ar] let \p1=(Loop.north east), \p2=(Loop.north west), \n1={\y1+\bby+20pt}, \n2=\bbportlen in (Loop_out1) to[in=0] (\x1+\n2,\n1) -- (\x2-\n2,\n1) to[out=180] (Loop_in1);
  \node[bb port sep=.8, bb={1}{1}, above=5pt of Loop, bb name={$g$}] (Straight) {};
\end{tikzpicture}
